<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>7 Ecological networks | Data Science for the Environment — Lecture Notes &amp; Labs</title>
  <meta name="description" content="7 Ecological networks | Data Science for the Environment — Lecture Notes &amp; Labs" />
  <meta name="generator" content="bookdown 0.43 and GitBook 2.6.7" />

  <meta property="og:title" content="7 Ecological networks | Data Science for the Environment — Lecture Notes &amp; Labs" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="7 Ecological networks | Data Science for the Environment — Lecture Notes &amp; Labs" />
  
  
  

<meta name="author" content="Lauren Ponisio" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="version-control-and-collaboration-with-git-and-github.html"/>
<link rel="next" href="string-processing-debugging.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<link href="libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet" />
<script src="libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<script src="libs/d3-4.9.1/d3.min.js"></script>
<script src="libs/forceNetwork-binding-0.4.1/forceNetwork.js"></script>
<script src="libs/sankey-1/sankey.js"></script>
<script src="libs/sankeyNetwork-binding-0.4.1/sankeyNetwork.js"></script>


<style type="text/css">
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>
<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Welcome</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#acknolwedgements"><i class="fa fa-check"></i><b>1.1</b> Acknolwedgements</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="syllabus.html"><a href="syllabus.html"><i class="fa fa-check"></i><b>2</b> Syllabus</a>
<ul>
<li class="chapter" data-level="2.1" data-path="syllabus.html"><a href="syllabus.html#course-overview"><i class="fa fa-check"></i><b>2.1</b> Course Overview</a></li>
<li class="chapter" data-level="2.2" data-path="syllabus.html"><a href="syllabus.html#the-7-fundamentals-wilson"><i class="fa fa-check"></i><b>2.2</b> The 7 Fundamentals (Wilson)</a></li>
<li class="chapter" data-level="2.3" data-path="syllabus.html"><a href="syllabus.html#coding-tools-and-practices"><i class="fa fa-check"></i><b>2.3</b> Coding Tools and Practices</a></li>
<li class="chapter" data-level="2.4" data-path="syllabus.html"><a href="syllabus.html#weekly-topics-and-readings"><i class="fa fa-check"></i><b>2.4</b> Weekly Topics and Readings</a></li>
<li class="chapter" data-level="2.5" data-path="syllabus.html"><a href="syllabus.html#assignments-and-grading"><i class="fa fa-check"></i><b>2.5</b> Assignments and Grading</a></li>
<li class="chapter" data-level="2.6" data-path="syllabus.html"><a href="syllabus.html#policies"><i class="fa fa-check"></i><b>2.6</b> Policies</a></li>
<li class="chapter" data-level="2.7" data-path="syllabus.html"><a href="syllabus.html#final-project"><i class="fa fa-check"></i><b>2.7</b> Final Project</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="key-programming-concepts.html"><a href="key-programming-concepts.html"><i class="fa fa-check"></i><b>3</b> Key Programming Concepts</a>
<ul>
<li class="chapter" data-level="3.1" data-path="key-programming-concepts.html"><a href="key-programming-concepts.html#lecture-summary"><i class="fa fa-check"></i><b>3.1</b> Lecture summary</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="key-programming-concepts.html"><a href="key-programming-concepts.html#learning-objectives"><i class="fa fa-check"></i><b>3.1.1</b> Learning objectives</a></li>
<li class="chapter" data-level="3.1.2" data-path="key-programming-concepts.html"><a href="key-programming-concepts.html#why-programming-concepts-matter"><i class="fa fa-check"></i><b>3.1.2</b> Why programming concepts matter</a></li>
<li class="chapter" data-level="3.1.3" data-path="key-programming-concepts.html"><a href="key-programming-concepts.html#objects-and-basic-types"><i class="fa fa-check"></i><b>3.1.3</b> Objects and basic types</a></li>
<li class="chapter" data-level="3.1.4" data-path="key-programming-concepts.html"><a href="key-programming-concepts.html#assignments-vs.-expressions"><i class="fa fa-check"></i><b>3.1.4</b> Assignments vs. expressions</a></li>
<li class="chapter" data-level="3.1.5" data-path="key-programming-concepts.html"><a href="key-programming-concepts.html#functions-and-operators"><i class="fa fa-check"></i><b>3.1.5</b> Functions and operators</a></li>
<li class="chapter" data-level="3.1.6" data-path="key-programming-concepts.html"><a href="key-programming-concepts.html#core-data-structures"><i class="fa fa-check"></i><b>3.1.6</b> Core data structures</a></li>
<li class="chapter" data-level="3.1.7" data-path="key-programming-concepts.html"><a href="key-programming-concepts.html#comparisons-and-boolean-logic"><i class="fa fa-check"></i><b>3.1.7</b> Comparisons and boolean logic</a></li>
<li class="chapter" data-level="3.1.8" data-path="key-programming-concepts.html"><a href="key-programming-concepts.html#control-flow-if-and-for"><i class="fa fa-check"></i><b>3.1.8</b> Control flow: <code>if</code> and <code>for</code></a></li>
<li class="chapter" data-level="3.1.9" data-path="key-programming-concepts.html"><a href="key-programming-concepts.html#the-apply-family-vectorized-repetition"><i class="fa fa-check"></i><b>3.1.9</b> The <em>apply</em> family (vectorized repetition)</a></li>
<li class="chapter" data-level="3.1.10" data-path="key-programming-concepts.html"><a href="key-programming-concepts.html#writing-your-own-functions"><i class="fa fa-check"></i><b>3.1.10</b> Writing your own functions</a></li>
<li class="chapter" data-level="3.1.11" data-path="key-programming-concepts.html"><a href="key-programming-concepts.html#combining-steps-with-pipes"><i class="fa fa-check"></i><b>3.1.11</b> Combining steps with pipes</a></li>
<li class="chapter" data-level="3.1.12" data-path="key-programming-concepts.html"><a href="key-programming-concepts.html#r-vs.-python-a-quick-orientation"><i class="fa fa-check"></i><b>3.1.12</b> R vs. Python: a quick orientation</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="key-programming-concepts.html"><a href="key-programming-concepts.html#demo-exponential-population-growth"><i class="fa fa-check"></i><b>3.2</b> Demo: Exponential Population Growth</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="key-programming-concepts.html"><a href="key-programming-concepts.html#exponential-population-growth-model"><i class="fa fa-check"></i><b>3.2.1</b> Exponential population growth model</a></li>
<li class="chapter" data-level="3.2.2" data-path="key-programming-concepts.html"><a href="key-programming-concepts.html#simulate-plot-a-single-scenario"><i class="fa fa-check"></i><b>3.2.2</b> Simulate &amp; plot a single scenario</a></li>
<li class="chapter" data-level="3.2.3" data-path="key-programming-concepts.html"><a href="key-programming-concepts.html#compare-two-growth-rates"><i class="fa fa-check"></i><b>3.2.3</b> Compare two growth rates</a></li>
<li class="chapter" data-level="3.2.4" data-path="key-programming-concepts.html"><a href="key-programming-concepts.html#in-class-challenge"><i class="fa fa-check"></i><b>3.2.4</b> In class challenge</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="key-programming-concepts.html"><a href="key-programming-concepts.html#discussion-reflection-reproducible-research-alston-rick-2020"><i class="fa fa-check"></i><b>3.3</b> Discussion &amp; Reflection — Reproducible Research Alston &amp; Rick (2020)</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="key-programming-concepts.html"><a href="key-programming-concepts.html#preclass-reflection-please-submit-short-answers-via-canvas"><i class="fa fa-check"></i><b>3.3.1</b> Pre‑class reflection (please submit short answers via canvas)</a></li>
<li class="chapter" data-level="3.3.2" data-path="key-programming-concepts.html"><a href="key-programming-concepts.html#inclass-smallgroup-prompts"><i class="fa fa-check"></i><b>3.3.2</b> In‑class small‑group prompts</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="key-programming-concepts.html"><a href="key-programming-concepts.html#lab-programming-key-concepts"><i class="fa fa-check"></i><b>3.4</b> Lab: Programming Key Concepts</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="key-programming-concepts.html"><a href="key-programming-concepts.html#lesson-overview"><i class="fa fa-check"></i><b>3.4.1</b> Lesson Overview</a></li>
<li class="chapter" data-level="3.4.2" data-path="key-programming-concepts.html"><a href="key-programming-concepts.html#review-the-seven-core-concepts"><i class="fa fa-check"></i><b>3.4.2</b> Review: The Seven Core Concepts</a></li>
<li class="chapter" data-level="3.4.3" data-path="key-programming-concepts.html"><a href="key-programming-concepts.html#starting-with-rstudio"><i class="fa fa-check"></i><b>3.4.3</b> Starting with RStudio</a></li>
<li class="chapter" data-level="3.4.4" data-path="key-programming-concepts.html"><a href="key-programming-concepts.html#individual-things"><i class="fa fa-check"></i><b>3.4.4</b> Individual things</a></li>
<li class="chapter" data-level="3.4.5" data-path="key-programming-concepts.html"><a href="key-programming-concepts.html#assignment-statements"><i class="fa fa-check"></i><b>3.4.5</b> Assignment statements</a></li>
<li class="chapter" data-level="3.4.6" data-path="key-programming-concepts.html"><a href="key-programming-concepts.html#question-1-population-dynamics"><i class="fa fa-check"></i><b>3.4.6</b> Question 1: Population dynamics</a></li>
<li class="chapter" data-level="3.4.7" data-path="key-programming-concepts.html"><a href="key-programming-concepts.html#commands-that-operate-on-things"><i class="fa fa-check"></i><b>3.4.7</b> Commands that operate on things</a></li>
<li class="chapter" data-level="3.4.8" data-path="key-programming-concepts.html"><a href="key-programming-concepts.html#question-2-using-operators-and-functions"><i class="fa fa-check"></i><b>3.4.8</b> Question 2: Using operators and functions</a></li>
<li class="chapter" data-level="3.4.9" data-path="key-programming-concepts.html"><a href="key-programming-concepts.html#groups-of-things"><i class="fa fa-check"></i><b>3.4.9</b> Groups of things</a></li>
<li class="chapter" data-level="3.4.10" data-path="key-programming-concepts.html"><a href="key-programming-concepts.html#question-3-storing-and-indexing-data"><i class="fa fa-check"></i><b>3.4.10</b> Question 3: Storing and indexing data</a></li>
<li class="chapter" data-level="3.4.11" data-path="key-programming-concepts.html"><a href="key-programming-concepts.html#comparisons-and-booleans"><i class="fa fa-check"></i><b>3.4.11</b> Comparisons and Booleans</a></li>
<li class="chapter" data-level="3.4.12" data-path="key-programming-concepts.html"><a href="key-programming-concepts.html#question-4-storing-data-and-logical-indexing"><i class="fa fa-check"></i><b>3.4.12</b> Question 4: Storing data and logical indexing</a></li>
<li class="chapter" data-level="3.4.13" data-path="key-programming-concepts.html"><a href="key-programming-concepts.html#control-statements---for-repeating-yourself"><i class="fa fa-check"></i><b>3.4.13</b> Control statements - for (repeating yourself)</a></li>
<li class="chapter" data-level="3.4.14" data-path="key-programming-concepts.html"><a href="key-programming-concepts.html#question-5-using-loops-to-repeat-calculations"><i class="fa fa-check"></i><b>3.4.14</b> Question 5: Using loops to repeat calculations</a></li>
<li class="chapter" data-level="3.4.15" data-path="key-programming-concepts.html"><a href="key-programming-concepts.html#control-statements---if-making-choices"><i class="fa fa-check"></i><b>3.4.15</b> Control statements - if (making choices)</a></li>
<li class="chapter" data-level="3.4.16" data-path="key-programming-concepts.html"><a href="key-programming-concepts.html#question-6-making-the-model-stochastic-with-an-if-statement"><i class="fa fa-check"></i><b>3.4.16</b> Question 6: Making the model stochastic with an if statement</a></li>
<li class="chapter" data-level="3.4.17" data-path="key-programming-concepts.html"><a href="key-programming-concepts.html#creating-chunks"><i class="fa fa-check"></i><b>3.4.17</b> Creating chunks</a></li>
<li class="chapter" data-level="3.4.18" data-path="key-programming-concepts.html"><a href="key-programming-concepts.html#question-7-creating-a-logistic-growth-function"><i class="fa fa-check"></i><b>3.4.18</b> Question 7: Creating a logistic growth function</a></li>
<li class="chapter" data-level="3.4.19" data-path="key-programming-concepts.html"><a href="key-programming-concepts.html#question-8-extra-credit-or-graduate-students"><i class="fa fa-check"></i><b>3.4.19</b> Question 8 (Extra credit or graduate students)</a></li>
<li class="chapter" data-level="3.4.20" data-path="key-programming-concepts.html"><a href="key-programming-concepts.html#simulate-visualize-baseline"><i class="fa fa-check"></i><b>3.4.20</b> Simulate &amp; visualize (baseline)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="using-the-tidyverse-for-data-manipulation-and-visualization.html"><a href="using-the-tidyverse-for-data-manipulation-and-visualization.html"><i class="fa fa-check"></i><b>4</b> Using “The Tidyverse” for data manipulation and visualization</a>
<ul>
<li class="chapter" data-level="4.1" data-path="using-the-tidyverse-for-data-manipulation-and-visualization.html"><a href="using-the-tidyverse-for-data-manipulation-and-visualization.html#lecture-summary-1"><i class="fa fa-check"></i><b>4.1</b> Lecture summary</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="using-the-tidyverse-for-data-manipulation-and-visualization.html"><a href="using-the-tidyverse-for-data-manipulation-and-visualization.html#learning-objectives-1"><i class="fa fa-check"></i><b>4.1.1</b> Learning Objectives</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="using-the-tidyverse-for-data-manipulation-and-visualization.html"><a href="using-the-tidyverse-for-data-manipulation-and-visualization.html#demo-introduction-to-the-tidyverse"><i class="fa fa-check"></i><b>4.2</b> Demo: Introduction to the Tidyverse</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="using-the-tidyverse-for-data-manipulation-and-visualization.html"><a href="using-the-tidyverse-for-data-manipulation-and-visualization.html#data-wrangling"><i class="fa fa-check"></i><b>4.2.1</b> Data wrangling</a></li>
<li class="chapter" data-level="4.2.2" data-path="using-the-tidyverse-for-data-manipulation-and-visualization.html"><a href="using-the-tidyverse-for-data-manipulation-and-visualization.html#data-visualization"><i class="fa fa-check"></i><b>4.2.2</b> Data visualization</a></li>
<li class="chapter" data-level="4.2.3" data-path="using-the-tidyverse-for-data-manipulation-and-visualization.html"><a href="using-the-tidyverse-for-data-manipulation-and-visualization.html#common-types-of-visualizations"><i class="fa fa-check"></i><b>4.2.3</b> Common types of visualizations</a></li>
<li class="chapter" data-level="4.2.4" data-path="using-the-tidyverse-for-data-manipulation-and-visualization.html"><a href="using-the-tidyverse-for-data-manipulation-and-visualization.html#fun-graph-references"><i class="fa fa-check"></i><b>4.2.4</b> Fun graph references:</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="using-the-tidyverse-for-data-manipulation-and-visualization.html"><a href="using-the-tidyverse-for-data-manipulation-and-visualization.html#discussion-reflection-coding-best-practices"><i class="fa fa-check"></i><b>4.3</b> Discussion &amp; Reflection — Coding Best Practices</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="using-the-tidyverse-for-data-manipulation-and-visualization.html"><a href="using-the-tidyverse-for-data-manipulation-and-visualization.html#why-these-practices"><i class="fa fa-check"></i><b>4.3.1</b> Why these practices</a></li>
<li class="chapter" data-level="4.3.2" data-path="using-the-tidyverse-for-data-manipulation-and-visualization.html"><a href="using-the-tidyverse-for-data-manipulation-and-visualization.html#readability-and-clarity"><i class="fa fa-check"></i><b>4.3.2</b> Readability and Clarity</a></li>
<li class="chapter" data-level="4.3.3" data-path="using-the-tidyverse-for-data-manipulation-and-visualization.html"><a href="using-the-tidyverse-for-data-manipulation-and-visualization.html#reproducibility"><i class="fa fa-check"></i><b>4.3.3</b> Reproducibility</a></li>
<li class="chapter" data-level="4.3.4" data-path="using-the-tidyverse-for-data-manipulation-and-visualization.html"><a href="using-the-tidyverse-for-data-manipulation-and-visualization.html#modularity-and-reuse"><i class="fa fa-check"></i><b>4.3.4</b> Modularity and Reuse</a></li>
<li class="chapter" data-level="4.3.5" data-path="using-the-tidyverse-for-data-manipulation-and-visualization.html"><a href="using-the-tidyverse-for-data-manipulation-and-visualization.html#documentation"><i class="fa fa-check"></i><b>4.3.5</b> Documentation</a></li>
<li class="chapter" data-level="4.3.6" data-path="using-the-tidyverse-for-data-manipulation-and-visualization.html"><a href="using-the-tidyverse-for-data-manipulation-and-visualization.html#testing-and-validation"><i class="fa fa-check"></i><b>4.3.6</b> Testing and Validation</a></li>
<li class="chapter" data-level="4.3.7" data-path="using-the-tidyverse-for-data-manipulation-and-visualization.html"><a href="using-the-tidyverse-for-data-manipulation-and-visualization.html#efficiency-after-correctness-and-clarity"><i class="fa fa-check"></i><b>4.3.7</b> Efficiency (after correctness and clarity)</a></li>
<li class="chapter" data-level="4.3.8" data-path="using-the-tidyverse-for-data-manipulation-and-visualization.html"><a href="using-the-tidyverse-for-data-manipulation-and-visualization.html#quick-checklist"><i class="fa fa-check"></i><b>4.3.8</b> Quick Checklist</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="using-the-tidyverse-for-data-manipulation-and-visualization.html"><a href="using-the-tidyverse-for-data-manipulation-and-visualization.html#lab-data-manipulation-and-visualization-using-the-tidyverse-student-version"><i class="fa fa-check"></i><b>4.4</b> Lab: Data manipulation and visualization using the Tidyverse (Student Version)</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="using-the-tidyverse-for-data-manipulation-and-visualization.html"><a href="using-the-tidyverse-for-data-manipulation-and-visualization.html#lesson-overview-1"><i class="fa fa-check"></i><b>4.4.1</b> Lesson Overview</a></li>
<li class="chapter" data-level="4.4.2" data-path="using-the-tidyverse-for-data-manipulation-and-visualization.html"><a href="using-the-tidyverse-for-data-manipulation-and-visualization.html#demo-evidence-for-global-climate-change"><i class="fa fa-check"></i><b>4.4.2</b> Demo: Evidence for Global Climate Change</a></li>
<li class="chapter" data-level="4.4.3" data-path="using-the-tidyverse-for-data-manipulation-and-visualization.html"><a href="using-the-tidyverse-for-data-manipulation-and-visualization.html#plotting-data-with-ggplot"><i class="fa fa-check"></i><b>4.4.3</b> Plotting Data with <code>ggplot</code></a></li>
<li class="chapter" data-level="4.4.4" data-path="using-the-tidyverse-for-data-manipulation-and-visualization.html"><a href="using-the-tidyverse-for-data-manipulation-and-visualization.html#lab-2-questions-exploring-and-visualizing-more-data-realted-to-global-climate-change."><i class="fa fa-check"></i><b>4.4.4</b> Lab 2 Questions: Exploring and visualizing more data realted to global climate change.</a></li>
<li class="chapter" data-level="4.4.5" data-path="using-the-tidyverse-for-data-manipulation-and-visualization.html"><a href="using-the-tidyverse-for-data-manipulation-and-visualization.html#demo-exploring-seasonal-oscillations"><i class="fa fa-check"></i><b>4.4.5</b> Demo: Exploring Seasonal Oscillations</a></li>
<li class="chapter" data-level="4.4.6" data-path="using-the-tidyverse-for-data-manipulation-and-visualization.html"><a href="using-the-tidyverse-for-data-manipulation-and-visualization.html#question-9-gradaute-student-or-extra-credit-summarize-the-data-of-your-choice."><i class="fa fa-check"></i><b>4.4.6</b> Question 9 (Gradaute student or Extra credit) : Summarize the data of your choice.</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="simulation-based-hypothesis-testing.html"><a href="simulation-based-hypothesis-testing.html"><i class="fa fa-check"></i><b>5</b> Simulation-based hypothesis testing</a>
<ul>
<li class="chapter" data-level="5.1" data-path="simulation-based-hypothesis-testing.html"><a href="simulation-based-hypothesis-testing.html#lecture-summary-2"><i class="fa fa-check"></i><b>5.1</b> Lecture summary:</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="simulation-based-hypothesis-testing.html"><a href="simulation-based-hypothesis-testing.html#learning-objectives-2"><i class="fa fa-check"></i><b>5.1.1</b> Learning Objectives</a></li>
<li class="chapter" data-level="5.1.2" data-path="simulation-based-hypothesis-testing.html"><a href="simulation-based-hypothesis-testing.html#hypothesis-testing"><i class="fa fa-check"></i><b>5.1.2</b> Hypothesis testing</a></li>
<li class="chapter" data-level="5.1.3" data-path="simulation-based-hypothesis-testing.html"><a href="simulation-based-hypothesis-testing.html#ab-testing"><i class="fa fa-check"></i><b>5.1.3</b> A/B testing</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="06-networks.html"><a href="#demo-ab-testing-with-mauna-loa-co%E2%82%82"><i class="fa fa-check"></i><b>5.2</b> Demo: A/B Testing with Mauna Loa CO₂</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="06-networks.html"><a href="#import-co%E2%82%82-monthly-data"><i class="fa fa-check"></i><b>5.2.1</b> Import CO₂ monthly data</a></li>
<li class="chapter" data-level="5.2.2" data-path="simulation-based-hypothesis-testing.html"><a href="simulation-based-hypothesis-testing.html#create-the-outcome-and-define-ab-groups"><i class="fa fa-check"></i><b>5.2.2</b> Create the outcome and define A/B groups</a></li>
<li class="chapter" data-level="5.2.3" data-path="simulation-based-hypothesis-testing.html"><a href="simulation-based-hypothesis-testing.html#observed-effect-difference-in-means"><i class="fa fa-check"></i><b>5.2.3</b> Observed effect (difference in means)</a></li>
<li class="chapter" data-level="5.2.4" data-path="simulation-based-hypothesis-testing.html"><a href="simulation-based-hypothesis-testing.html#permutation-test-twosided-blocked-by-month"><i class="fa fa-check"></i><b>5.2.4</b> Permutation test (two‑sided), <strong>blocked by month</strong></a></li>
<li class="chapter" data-level="5.2.5" data-path="simulation-based-hypothesis-testing.html"><a href="simulation-based-hypothesis-testing.html#challenge-problem-seasonal-amplitude-ab-test"><i class="fa fa-check"></i><b>5.2.5</b> Challenge Problem — Seasonal amplitude A/B test</a></li>
<li class="chapter" data-level="5.2.6" data-path="06-networks.html"><a href="#biodiversity-metrics-%CE%B1-%CE%B2-%CE%B3-diversity"><i class="fa fa-check"></i><b>5.2.6</b> Biodiversity metrics: α, β, γ diversity</a></li>
<li class="chapter" data-level="5.2.7" data-path="simulation-based-hypothesis-testing.html"><a href="simulation-based-hypothesis-testing.html#biotic-homgenization-and-traits"><i class="fa fa-check"></i><b>5.2.7</b> Biotic homgenization and traits</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="simulation-based-hypothesis-testing.html"><a href="simulation-based-hypothesis-testing.html#discussion-reflection-ponisio-et-al.-2016-on-farm-habitat-restoration-counters-biotic-homogenization-in-intensively-managed-agriculture"><i class="fa fa-check"></i><b>5.3</b> Discussion &amp; Reflection: Ponisio et al. (2016): On-farm habitat restoration counters biotic homogenization in intensively managed agriculture</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="simulation-based-hypothesis-testing.html"><a href="simulation-based-hypothesis-testing.html#preclass-reflection-please-submit-short-answers-via-canvas-2"><i class="fa fa-check"></i><b>5.3.1</b> Pre‑class reflection (please submit short answers via canvas)</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="simulation-based-hypothesis-testing.html"><a href="simulation-based-hypothesis-testing.html#lab-do-the-bees-at-hedgerows-and-weedy-field-margins-controls-have-the-same-distribution-of-traits"><i class="fa fa-check"></i><b>5.4</b> Lab: Do the bees at hedgerows and weedy field margins (controls) have the same distribution of traits?</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="simulation-based-hypothesis-testing.html"><a href="simulation-based-hypothesis-testing.html#question-1-practicing-the-data-subsetting-tools-from-dplyr"><i class="fa fa-check"></i><b>5.4.1</b> Question 1: Practicing the data subsetting tools from dplyr</a></li>
<li class="chapter" data-level="5.4.2" data-path="simulation-based-hypothesis-testing.html"><a href="simulation-based-hypothesis-testing.html#demo-joining-data"><i class="fa fa-check"></i><b>5.4.2</b> Demo: Joining data</a></li>
<li class="chapter" data-level="5.4.3" data-path="simulation-based-hypothesis-testing.html"><a href="simulation-based-hypothesis-testing.html#question-2-1"><i class="fa fa-check"></i><b>5.4.3</b> Question 2</a></li>
<li class="chapter" data-level="5.4.4" data-path="simulation-based-hypothesis-testing.html"><a href="simulation-based-hypothesis-testing.html#lab-question-3"><i class="fa fa-check"></i><b>5.4.4</b> Lab Question 3</a></li>
<li class="chapter" data-level="5.4.5" data-path="simulation-based-hypothesis-testing.html"><a href="simulation-based-hypothesis-testing.html#demo-do-the-bees-at-hedgerows-and-weedy-field-margins-controls-have-the-same-distribution-of-traits"><i class="fa fa-check"></i><b>5.4.5</b> Demo: Do the bees at hedgerows and weedy field margins (controls) have the same distribution of traits?</a></li>
<li class="chapter" data-level="5.4.6" data-path="simulation-based-hypothesis-testing.html"><a href="simulation-based-hypothesis-testing.html#lab-question-4"><i class="fa fa-check"></i><b>5.4.6</b> Lab Question 4</a></li>
<li class="chapter" data-level="5.4.7" data-path="simulation-based-hypothesis-testing.html"><a href="simulation-based-hypothesis-testing.html#question-5"><i class="fa fa-check"></i><b>5.4.7</b> Question 5</a></li>
<li class="chapter" data-level="5.4.8" data-path="simulation-based-hypothesis-testing.html"><a href="simulation-based-hypothesis-testing.html#demo-interpreting-the-results"><i class="fa fa-check"></i><b>5.4.8</b> Demo: Interpreting the results</a></li>
<li class="chapter" data-level="5.4.9" data-path="simulation-based-hypothesis-testing.html"><a href="simulation-based-hypothesis-testing.html#question-6"><i class="fa fa-check"></i><b>5.4.9</b> Question 6</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="version-control-and-collaboration-with-git-and-github.html"><a href="version-control-and-collaboration-with-git-and-github.html"><i class="fa fa-check"></i><b>6</b> Version control and collaboration with git and github</a>
<ul>
<li class="chapter" data-level="6.1" data-path="version-control-and-collaboration-with-git-and-github.html"><a href="version-control-and-collaboration-with-git-and-github.html#lecture-summary-3"><i class="fa fa-check"></i><b>6.1</b> Lecture summary</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="version-control-and-collaboration-with-git-and-github.html"><a href="version-control-and-collaboration-with-git-and-github.html#learning-objectives-3"><i class="fa fa-check"></i><b>6.1.1</b> Learning objectives</a></li>
<li class="chapter" data-level="6.1.2" data-path="version-control-and-collaboration-with-git-and-github.html"><a href="version-control-and-collaboration-with-git-and-github.html#hypothetical-paper-writing"><i class="fa fa-check"></i><b>6.1.2</b> Hypothetical: Paper Writing</a></li>
<li class="chapter" data-level="6.1.3" data-path="version-control-and-collaboration-with-git-and-github.html"><a href="version-control-and-collaboration-with-git-and-github.html#solution"><i class="fa fa-check"></i><b>6.1.3</b> Solution</a></li>
<li class="chapter" data-level="6.1.4" data-path="version-control-and-collaboration-with-git-and-github.html"><a href="version-control-and-collaboration-with-git-and-github.html#why-use-git-and-github"><i class="fa fa-check"></i><b>6.1.4</b> Why Use Git and GitHub?</a></li>
<li class="chapter" data-level="6.1.5" data-path="version-control-and-collaboration-with-git-and-github.html"><a href="version-control-and-collaboration-with-git-and-github.html#a-simple-two-person-workflow"><i class="fa fa-check"></i><b>6.1.5</b> A Simple Two-Person Workflow</a></li>
<li class="chapter" data-level="6.1.6" data-path="version-control-and-collaboration-with-git-and-github.html"><a href="version-control-and-collaboration-with-git-and-github.html#five-essential-git-commands"><i class="fa fa-check"></i><b>6.1.6</b> Five Essential Git Commands</a></li>
<li class="chapter" data-level="6.1.7" data-path="version-control-and-collaboration-with-git-and-github.html"><a href="version-control-and-collaboration-with-git-and-github.html#git-status"><i class="fa fa-check"></i><b>6.1.7</b> 1) <code>git status</code></a></li>
<li class="chapter" data-level="6.1.8" data-path="version-control-and-collaboration-with-git-and-github.html"><a href="version-control-and-collaboration-with-git-and-github.html#git-add"><i class="fa fa-check"></i><b>6.1.8</b> 2) <code>git add</code></a></li>
<li class="chapter" data-level="6.1.9" data-path="version-control-and-collaboration-with-git-and-github.html"><a href="version-control-and-collaboration-with-git-and-github.html#git-commit--m-message"><i class="fa fa-check"></i><b>6.1.9</b> 3) <code>git commit -m "message"</code></a></li>
<li class="chapter" data-level="6.1.10" data-path="version-control-and-collaboration-with-git-and-github.html"><a href="version-control-and-collaboration-with-git-and-github.html#git-push"><i class="fa fa-check"></i><b>6.1.10</b> 4) <code>git push</code></a></li>
<li class="chapter" data-level="6.1.11" data-path="version-control-and-collaboration-with-git-and-github.html"><a href="version-control-and-collaboration-with-git-and-github.html#git-pull"><i class="fa fa-check"></i><b>6.1.11</b> 5) <code>git pull</code></a></li>
<li class="chapter" data-level="6.1.12" data-path="version-control-and-collaboration-with-git-and-github.html"><a href="version-control-and-collaboration-with-git-and-github.html#git-command-summary"><i class="fa fa-check"></i><b>6.1.12</b> git command summary</a></li>
<li class="chapter" data-level="6.1.13" data-path="version-control-and-collaboration-with-git-and-github.html"><a href="version-control-and-collaboration-with-git-and-github.html#i-cannot-push-my-commit"><i class="fa fa-check"></i><b>6.1.13</b> I cannot push my commit!?</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="version-control-and-collaboration-with-git-and-github.html"><a href="version-control-and-collaboration-with-git-and-github.html#discussion-reflection-trisos-et-al.-2021-decoloniality-and-antioppressive-practices-for-a-more-ethical-ecology"><i class="fa fa-check"></i><b>6.2</b> Discussion &amp; Reflection: Trisos et al. (2021): Decoloniality and anti‑oppressive practices for a more ethical ecology</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="version-control-and-collaboration-with-git-and-github.html"><a href="version-control-and-collaboration-with-git-and-github.html#article-embedded"><i class="fa fa-check"></i><b>6.2.1</b> Article (embedded)</a></li>
<li class="chapter" data-level="6.2.2" data-path="version-control-and-collaboration-with-git-and-github.html"><a href="version-control-and-collaboration-with-git-and-github.html#individual-reflection-short-written-responses"><i class="fa fa-check"></i><b>6.2.2</b> Individual reflection (short written responses)</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="version-control-and-collaboration-with-git-and-github.html"><a href="version-control-and-collaboration-with-git-and-github.html#lab-git-and-github"><i class="fa fa-check"></i><b>6.3</b> Lab Git and Github</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="version-control-and-collaboration-with-git-and-github.html"><a href="version-control-and-collaboration-with-git-and-github.html#question-1-1"><i class="fa fa-check"></i><b>6.3.1</b> Question 1</a></li>
<li class="chapter" data-level="6.3.2" data-path="version-control-and-collaboration-with-git-and-github.html"><a href="version-control-and-collaboration-with-git-and-github.html#question-2-2"><i class="fa fa-check"></i><b>6.3.2</b> Question 2</a></li>
<li class="chapter" data-level="6.3.3" data-path="version-control-and-collaboration-with-git-and-github.html"><a href="version-control-and-collaboration-with-git-and-github.html#question-3-v1-partners"><i class="fa fa-check"></i><b>6.3.3</b> Question 3 v1 (partners)</a></li>
<li class="chapter" data-level="6.3.4" data-path="version-control-and-collaboration-with-git-and-github.html"><a href="version-control-and-collaboration-with-git-and-github.html#question-3-v2-solo-project"><i class="fa fa-check"></i><b>6.3.4</b> Question 3 v2 (solo project)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="ecological-networks.html"><a href="ecological-networks.html"><i class="fa fa-check"></i><b>7</b> Ecological networks</a>
<ul>
<li class="chapter" data-level="7.1" data-path="ecological-networks.html"><a href="ecological-networks.html#lecture-summary-4"><i class="fa fa-check"></i><b>7.1</b> Lecture summary</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="ecological-networks.html"><a href="ecological-networks.html#learning-objectives-4"><i class="fa fa-check"></i><b>7.1.1</b> Learning objectives</a></li>
<li class="chapter" data-level="7.1.2" data-path="ecological-networks.html"><a href="ecological-networks.html#linearalgebra-essentials-for-ecological-networks"><i class="fa fa-check"></i><b>7.1.2</b> Linear‑algebra essentials for ecological networks</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="ecological-networks.html"><a href="ecological-networks.html#in-class-challenge-matrix-vector-multiplication-with-plantpollinator-data"><i class="fa fa-check"></i><b>7.2</b> In-class challenge: Matrix &amp; vector multiplication with plant–pollinator data</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="ecological-networks.html"><a href="ecological-networks.html#in-class-challenge-matrix-vector-multiplication-with-plantpollinator-data-1"><i class="fa fa-check"></i><b>7.2.1</b> In-class challenge: Matrix &amp; vector multiplication with plant–pollinator data</a></li>
<li class="chapter" data-level="7.2.2" data-path="ecological-networks.html"><a href="ecological-networks.html#from-data-to-networks"><i class="fa fa-check"></i><b>7.2.2</b> From data to networks</a></li>
<li class="chapter" data-level="7.2.3" data-path="ecological-networks.html"><a href="ecological-networks.html#core-network-properties-formulas-intuition-tools"><i class="fa fa-check"></i><b>7.2.3</b> Core network properties (formulas, intuition, tools)</a></li>
<li class="chapter" data-level="7.2.4" data-path="ecological-networks.html"><a href="ecological-networks.html#demo-building-networks-and-characterizing-their-structure"><i class="fa fa-check"></i><b>7.2.4</b> Demo: Building networks and characterizing their structure</a></li>
<li class="chapter" data-level="7.2.5" data-path="ecological-networks.html"><a href="ecological-networks.html#null-models-for-fair-comparisons"><i class="fa fa-check"></i><b>7.2.5</b> Null models for fair comparisons</a></li>
<li class="chapter" data-level="7.2.6" data-path="ecological-networks.html"><a href="ecological-networks.html#demo-calculating-network-metrics-pollination"><i class="fa fa-check"></i><b>7.2.6</b> Demo: Calculating network metrics (pollination)</a></li>
<li class="chapter" data-level="7.2.7" data-path="ecological-networks.html"><a href="ecological-networks.html#demo-create-a-graph-from-oba-data-visualize-it"><i class="fa fa-check"></i><b>7.2.7</b> Demo: Create a graph from OBA data, visualize it</a></li>
<li class="chapter" data-level="7.2.8" data-path="ecological-networks.html"><a href="ecological-networks.html#in-class-visualization-challange-1."><i class="fa fa-check"></i><b>7.2.8</b> In class: Visualization challange 1.</a></li>
<li class="chapter" data-level="7.2.9" data-path="ecological-networks.html"><a href="ecological-networks.html#in-class-visualization-challange-2."><i class="fa fa-check"></i><b>7.2.9</b> In class: Visualization challange 2.</a></li>
<li class="chapter" data-level="7.2.10" data-path="ecological-networks.html"><a href="ecological-networks.html#further-reading-software"><i class="fa fa-check"></i><b>7.2.10</b> Further reading &amp; software</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="ecological-networks.html"><a href="ecological-networks.html#discussion-reflection-yeakel-et-al.-2014-collapse-of-an-ecological-network-in-ancient-egypt"><i class="fa fa-check"></i><b>7.3</b> Discussion &amp; Reflection: Yeakel et al. (2014): Collapse of an ecological network in Ancient Egypt</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="ecological-networks.html"><a href="ecological-networks.html#article-embedded-1"><i class="fa fa-check"></i><b>7.3.1</b> Article (embedded)</a></li>
<li class="chapter" data-level="7.3.2" data-path="ecological-networks.html"><a href="ecological-networks.html#reflection-and-in-class-discussion-questions"><i class="fa fa-check"></i><b>7.3.2</b> Reflection and in-class discussion Questions</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="ecological-networks.html"><a href="ecological-networks.html#lab-food-webs-network-measures-student-version"><i class="fa fa-check"></i><b>7.4</b> Lab: Food Webs &amp; Network Measures (Student Version)</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="ecological-networks.html"><a href="ecological-networks.html#lesson-overview-2"><i class="fa fa-check"></i><b>7.4.1</b> Lesson Overview</a></li>
<li class="chapter" data-level="7.4.2" data-path="ecological-networks.html"><a href="ecological-networks.html#lab-question-1-creating-our-foodwebs-based-on-body-sizes."><i class="fa fa-check"></i><b>7.4.2</b> Lab question 1: Creating our foodwebs based on body sizes.</a></li>
<li class="chapter" data-level="7.4.3" data-path="ecological-networks.html"><a href="ecological-networks.html#lab-question-2-breaking-the-networks-into-time-periods"><i class="fa fa-check"></i><b>7.4.3</b> Lab question 2: Breaking the networks into time periods</a></li>
<li class="chapter" data-level="7.4.4" data-path="ecological-networks.html"><a href="ecological-networks.html#lab-question-3-visualize-the-networks"><i class="fa fa-check"></i><b>7.4.4</b> Lab question 3: Visualize the networks</a></li>
<li class="chapter" data-level="7.4.5" data-path="ecological-networks.html"><a href="ecological-networks.html#references"><i class="fa fa-check"></i><b>7.4.5</b> References</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="string-processing-debugging.html"><a href="string-processing-debugging.html"><i class="fa fa-check"></i><b>8</b> String Processing &amp; Debugging</a>
<ul>
<li class="chapter" data-level="8.1" data-path="string-processing-debugging.html"><a href="string-processing-debugging.html#lecture-summary-5"><i class="fa fa-check"></i><b>8.1</b> Lecture summary</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="string-processing-debugging.html"><a href="string-processing-debugging.html#learning-objectives-5"><i class="fa fa-check"></i><b>8.1.1</b> Learning objectives</a></li>
<li class="chapter" data-level="8.1.2" data-path="string-processing-debugging.html"><a href="string-processing-debugging.html#string-manipulation-in-base-r"><i class="fa fa-check"></i><b>8.1.2</b> String manipulation in base R</a></li>
<li class="chapter" data-level="8.1.3" data-path="string-processing-debugging.html"><a href="string-processing-debugging.html#string-manipulation-using-stringr"><i class="fa fa-check"></i><b>8.1.3</b> String manipulation using <em>stringr</em></a></li>
<li class="chapter" data-level="8.1.4" data-path="string-processing-debugging.html"><a href="string-processing-debugging.html#regular-expressions-regexregexp"><i class="fa fa-check"></i><b>8.1.4</b> Regular expressions (regex/regexp)</a></li>
<li class="chapter" data-level="8.1.5" data-path="string-processing-debugging.html"><a href="string-processing-debugging.html#general-principles-for-working-with-regex"><i class="fa fa-check"></i><b>8.1.5</b> General principles for working with regex</a></li>
<li class="chapter" data-level="8.1.6" data-path="string-processing-debugging.html"><a href="string-processing-debugging.html#working-with-patterns"><i class="fa fa-check"></i><b>8.1.6</b> Working with patterns</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="string-processing-debugging.html"><a href="string-processing-debugging.html#in-class-challenge-what-will-the-regular-expression-oorgani.eb-match"><i class="fa fa-check"></i><b>8.2</b> In class challenge: What will the regular expression <code>^[Oo]rgani.e\b</code> match?</a></li>
<li class="chapter" data-level="8.3" data-path="string-processing-debugging.html"><a href="string-processing-debugging.html#in-class-challenge-2-how-would-i-extract-an-email-address-from-an-arbitrary-text-string"><i class="fa fa-check"></i><b>8.3</b> In class challenge 2: How would I extract an email address from an arbitrary text string?</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="string-processing-debugging.html"><a href="string-processing-debugging.html#groups"><i class="fa fa-check"></i><b>8.3.1</b> Groups</a></li>
<li class="chapter" data-level="8.3.2" data-path="string-processing-debugging.html"><a href="string-processing-debugging.html#other-comments"><i class="fa fa-check"></i><b>8.3.2</b> Other comments</a></li>
<li class="chapter" data-level="8.3.3" data-path="string-processing-debugging.html"><a href="string-processing-debugging.html#additional-resources"><i class="fa fa-check"></i><b>8.3.3</b> Additional resources</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="string-processing-debugging.html"><a href="string-processing-debugging.html#dicussion-reflection-debugging-in-r"><i class="fa fa-check"></i><b>8.4</b> Dicussion &amp; Reflection: Debugging in R</a>
<ul>
<li class="chapter" data-level="8.4.1" data-path="string-processing-debugging.html"><a href="string-processing-debugging.html#basic-debugging-strategies"><i class="fa fa-check"></i><b>8.4.1</b> 1) Basic debugging strategies</a></li>
<li class="chapter" data-level="8.4.2" data-path="string-processing-debugging.html"><a href="string-processing-debugging.html#rs-interactive-debugging-tools"><i class="fa fa-check"></i><b>8.4.2</b> 2) R’s interactive debugging tools</a></li>
<li class="chapter" data-level="8.4.3" data-path="string-processing-debugging.html"><a href="string-processing-debugging.html#some-common-causes-of-bugs"><i class="fa fa-check"></i><b>8.4.3</b> 3) Some common causes of bugs</a></li>
<li class="chapter" data-level="8.4.4" data-path="string-processing-debugging.html"><a href="string-processing-debugging.html#tips-for-avoiding-bugs-and-catching-errors"><i class="fa fa-check"></i><b>8.4.4</b> 4) Tips for avoiding bugs and catching errors</a></li>
<li class="chapter" data-level="8.4.5" data-path="string-processing-debugging.html"><a href="string-processing-debugging.html#how-to-get-help-online"><i class="fa fa-check"></i><b>8.4.5</b> 5) How to get help online</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="string-processing-debugging.html"><a href="string-processing-debugging.html#lab-regular-expressions-and-cleaning-oba-data-student-version"><i class="fa fa-check"></i><b>8.5</b> Lab — Regular expressions and cleaning OBA data (Student Version)</a>
<ul>
<li class="chapter" data-level="8.5.1" data-path="string-processing-debugging.html"><a href="string-processing-debugging.html#lesson-overview-3"><i class="fa fa-check"></i><b>8.5.1</b> Lesson Overview</a></li>
<li class="chapter" data-level="8.5.2" data-path="string-processing-debugging.html"><a href="string-processing-debugging.html#lab-question-1-oregon-bee-atlas-data-exploration"><i class="fa fa-check"></i><b>8.5.2</b> Lab question 1: Oregon bee atlas data exploration</a></li>
<li class="chapter" data-level="8.5.3" data-path="string-processing-debugging.html"><a href="string-processing-debugging.html#lab-question-2-making-a-column-for-plant-resolution"><i class="fa fa-check"></i><b>8.5.3</b> Lab question 2: Making a column for plant resolution</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="final-project-1.html"><a href="final-project-1.html"><i class="fa fa-check"></i><b>9</b> Final project</a>
<ul>
<li class="chapter" data-level="9.1" data-path="final-project-1.html"><a href="final-project-1.html#final-project-objective"><i class="fa fa-check"></i><b>9.1</b> Final project objective</a></li>
<li class="chapter" data-level="9.2" data-path="final-project-1.html"><a href="final-project-1.html#final-project-topic-selection-first-final-project-assignment"><i class="fa fa-check"></i><b>9.2</b> Final project topic selection (first final project assignment)</a></li>
<li class="chapter" data-level="9.3" data-path="final-project-1.html"><a href="final-project-1.html#final-project-office-hours-discussion-second-final-project-assignment"><i class="fa fa-check"></i><b>9.3</b> Final project office hours discussion (second final project assignment)</a></li>
<li class="chapter" data-level="9.4" data-path="final-project-1.html"><a href="final-project-1.html#final-project-annotated-bibliography-third-final-project-assignment"><i class="fa fa-check"></i><b>9.4</b> Final project annotated bibliography (third final project assignment)</a>
<ul>
<li class="chapter" data-level="9.4.1" data-path="final-project-1.html"><a href="final-project-1.html#overview"><i class="fa fa-check"></i><b>9.4.1</b> Overview</a></li>
<li class="chapter" data-level="9.4.2" data-path="final-project-1.html"><a href="final-project-1.html#learning-objectives-6"><i class="fa fa-check"></i><b>9.4.2</b> Learning objectives</a></li>
<li class="chapter" data-level="9.4.3" data-path="final-project-1.html"><a href="final-project-1.html#requirements"><i class="fa fa-check"></i><b>9.4.3</b> Requirements</a></li>
<li class="chapter" data-level="9.4.4" data-path="final-project-1.html"><a href="final-project-1.html#how-to-search-effectively-google-scholar-tips"><i class="fa fa-check"></i><b>9.4.4</b> How to search effectively (Google Scholar tips)</a></li>
<li class="chapter" data-level="9.4.5" data-path="final-project-1.html"><a href="final-project-1.html#recommended-workflow"><i class="fa fa-check"></i><b>9.4.5</b> Recommended workflow</a></li>
<li class="chapter" data-level="9.4.6" data-path="final-project-1.html"><a href="final-project-1.html#what-each-entry-should-include"><i class="fa fa-check"></i><b>9.4.6</b> What each entry should include</a></li>
<li class="chapter" data-level="9.4.7" data-path="final-project-1.html"><a href="final-project-1.html#template-copy-for-each-source"><i class="fa fa-check"></i><b>9.4.7</b> Template (copy for each source)</a></li>
<li class="chapter" data-level="9.4.8" data-path="final-project-1.html"><a href="final-project-1.html#author-surname-et-al.-year.-title."><i class="fa fa-check"></i><b>9.4.8</b> Author Surname et al. (Year). <em>Title</em>.</a></li>
<li class="chapter" data-level="9.4.9" data-path="final-project-1.html"><a href="final-project-1.html#example-of-intext-citation-references"><i class="fa fa-check"></i><b>9.4.9</b> Example of in‑text citation &amp; references</a></li>
<li class="chapter" data-level="9.4.10" data-path="final-project-1.html"><a href="final-project-1.html#rubric"><i class="fa fa-check"></i><b>9.4.10</b> Rubric</a></li>
<li class="chapter" data-level="9.4.11" data-path="final-project-1.html"><a href="final-project-1.html#submission-checklist"><i class="fa fa-check"></i><b>9.4.11</b> Submission checklist</a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="final-project-1.html"><a href="final-project-1.html#literature-review-and-workflow-plan-fourth-final-project-assignment"><i class="fa fa-check"></i><b>9.5</b> Literature review and workflow plan (fourth final project assignment)</a>
<ul>
<li class="chapter" data-level="9.5.1" data-path="final-project-1.html"><a href="final-project-1.html#literature-review-i.e.-the-introduction-section-of-your-final-project"><i class="fa fa-check"></i><b>9.5.1</b> Literature review (i.e., the introduction section of your final project)</a></li>
<li class="chapter" data-level="9.5.2" data-path="final-project-1.html"><a href="final-project-1.html#dataset-identification"><i class="fa fa-check"></i><b>9.5.2</b> Dataset identification</a></li>
<li class="chapter" data-level="9.5.3" data-path="final-project-1.html"><a href="final-project-1.html#workflow-plan"><i class="fa fa-check"></i><b>9.5.3</b> Workflow plan</a></li>
<li class="chapter" data-level="9.5.4" data-path="final-project-1.html"><a href="final-project-1.html#rubric-1"><i class="fa fa-check"></i><b>9.5.4</b> Rubric</a></li>
<li class="chapter" data-level="9.5.5" data-path="final-project-1.html"><a href="final-project-1.html#submission-checklist-1"><i class="fa fa-check"></i><b>9.5.5</b> Submission Checklist</a></li>
<li class="chapter" data-level="9.5.6" data-path="final-project-1.html"><a href="final-project-1.html#optional-scaffold-copy-into-your-working-doc"><i class="fa fa-check"></i><b>9.5.6</b> Optional scaffold (copy into your working doc)</a></li>
</ul></li>
<li class="chapter" data-level="9.6" data-path="final-project-1.html"><a href="final-project-1.html#final-project-rubric-10-pts-total-1-pt-extra-credit"><i class="fa fa-check"></i><b>9.6</b> Final Project Rubric (10 pts total + 1 pt extra credit)</a></li>
<li class="chapter" data-level="9.7" data-path="final-project-1.html"><a href="final-project-1.html#poster-presentation-rubric-10-pts-total"><i class="fa fa-check"></i><b>9.7</b> Poster Presentation Rubric (10 pts total)</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data Science for the Environment — Lecture Notes &amp; Labs</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="ecological-networks" class="section level1 hasAnchor" number="7">
<h1><span class="header-section-number">7</span> Ecological networks<a href="ecological-networks.html#ecological-networks" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="lecture-summary-4" class="section level2 hasAnchor" number="7.1">
<h2><span class="header-section-number">7.1</span> Lecture summary<a href="ecological-networks.html#lecture-summary-4" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="learning-objectives-4" class="section level3 hasAnchor" number="7.1.1">
<h3><span class="header-section-number">7.1.1</span> Learning objectives<a href="ecological-networks.html#learning-objectives-4" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>By the end of this chapter you will be able to:</p>
<ul>
<li>Explain how empirical interaction data become network (matrix) representations.</li>
<li>Define key linear‐algebra concepts (vectors, matrices) and compute matrix and vector–matrix products.</li>
<li>Distinguish common ecological network types (e.g., food webs, host–parasitoid, plant–pollinator; uni‑ vs. bipartite; weighted vs. binary; directed vs. undirected).</li>
<li>Describe how networks also arise from dynamic systems models (e.g., generalized Lotka–Volterra), and how Jacobians encode interaction strengths</li>
<li>Summarize important network‑level properties (size, connectance, nestedness NODF, modularity <span class="math inline">\(Q\)</span>, specialization <span class="math inline">\(H_2&#39;\)</span>, redundancy, complementarity).</li>
<li>Compare null‑model families (equiprobable/probabilistic vs. constrained marginals) and explain why they are needed for cross‑network standardization</li>
<li>Quantify species roles using centrality (degree, betweenness, closeness, eigenvector), species strength, and specialization <span class="math inline">\(d&#39;\)</span></li>
</ul>
</div>
<div id="linearalgebra-essentials-for-ecological-networks" class="section level3 hasAnchor" number="7.1.2">
<h3><span class="header-section-number">7.1.2</span> Linear‑algebra essentials for ecological networks<a href="ecological-networks.html#linearalgebra-essentials-for-ecological-networks" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><strong>Vectors</strong> are ordered lists of numbers. We write a row vector as
<span class="math inline">\(\mathbf{x} = (x_1, x_2, \dots, x_S)\)</span> and a column vector as
<span class="math inline">\(\mathbf{x} = (x_1, x_2, \dots, x_S)^\top\)</span>.</p>
<p><strong>Matrices</strong> are rectangular arrays of numbers with <span class="math inline">\(S\)</span> rows and <span class="math inline">\(T\)</span> columns, e.g., an interaction (adjacency) matrix <span class="math inline">\(\mathbf{A} = [a_{ij}]\)</span>.
Typical encodings:</p>
<ul>
<li><strong>Binary</strong>: <span class="math inline">\(a_{ij}\in\{0,1\}\)</span> indicates presence/absence of an interaction.</li>
<li><strong>Weighted</strong>: <span class="math inline">\(a_{ij}\ge 0\)</span> is an interaction frequency or strength.</li>
</ul>
<p><strong>Matrix multiplication</strong> <span class="math inline">\(\mathbf{A}_{S\times T}\mathbf{B}_{T\times U} \to \mathbf{C}_{S\times U}\)</span></p>
<p><strong>Goal:</strong> compute <span class="math inline">\(\mathbf{C} = \mathbf{A}\mathbf{B}\)</span>.<br />
<strong>Shape check:</strong> inner dimensions must match (here both are <span class="math inline">\(T\)</span>). Result has shape <span class="math inline">\(S\times U\)</span>.</p>
<p><strong>Recipe (for one entry <span class="math inline">\(c_{iu}\)</span>):</strong></p>
<ol style="list-style-type: decimal">
<li>Pick <strong>row <span class="math inline">\(i\)</span></strong> from <span class="math inline">\(\mathbf{A}\)</span>.</li>
<li>Pick <strong>column <span class="math inline">\(u\)</span></strong> from <span class="math inline">\(\mathbf{B}\)</span>.</li>
<li>Multiply entries <strong>pairwise</strong> across the <span class="math inline">\(T\)</span> positions.</li>
<li><strong>Sum</strong> those <span class="math inline">\(T\)</span> products:<br />
<span class="math display">\[
c_{iu} = \sum_{j=1}^{T} a_{ij}\, b_{ju}.
\]</span></li>
<li>Repeat for all rows <span class="math inline">\(i=1,\dots,S\)</span> and columns <span class="math inline">\(u=1,\dots,U\)</span>.</li>
</ol>
<p><strong>Interpretation:</strong></p>
<ul>
<li>Column view: each column of <span class="math inline">\(\mathbf{C}\)</span> is a <strong>linear combination of the columns of <span class="math inline">\(\mathbf{A}\)</span></strong> with weights from the corresponding column of <span class="math inline">\(\mathbf{B}\)</span>.<br />
<span class="math inline">\(\ \ \ \ \ \ \ \ \ \ \ \ \ \mathbf{C}_{\cdot u} = \mathbf{A}\, \mathbf{b}_{\cdot u}\)</span>.</li>
<li>Row view: each row of <span class="math inline">\(\mathbf{C}\)</span> is a <strong>linear combination of the rows of <span class="math inline">\(\mathbf{B}\)</span></strong> with weights from the corresponding row of <span class="math inline">\(\mathbf{A}\)</span>.<br />
<span class="math inline">\(\ \ \ \ \ \ \ \ \ \ \ \ \ \mathbf{C}_{i \cdot} = \mathbf{a}_{i \cdot}\, \mathbf{B}\)</span>.</li>
</ul>
<p><strong>Worked example (tiny):</strong></p>
<p><span class="math display">\[
\mathbf{A}=
\begin{bmatrix}
1 &amp; 2 &amp; 0\\
3 &amp; -1 &amp; 4
\end{bmatrix}_{2\times 3},\quad
\mathbf{B}=
\begin{bmatrix}
2 &amp; 1\\
0 &amp; -1\\
5 &amp; 2
\end{bmatrix}_{3\times 2}.
\]</span></p>
<p>Compute <span class="math inline">\(\mathbf{C}=\mathbf{A}\mathbf{B}\)</span> (result is <span class="math inline">\(2\times 2\)</span>):</p>
<ul>
<li><span class="math inline">\(c_{11} = 1\cdot 2 + 2\cdot 0 + 0\cdot 5 = 2\)</span><br />
</li>
<li><span class="math inline">\(c_{12} = 1\cdot 1 + 2\cdot(-1) + 0\cdot 2 = -1\)</span><br />
</li>
<li><span class="math inline">\(c_{21} = 3\cdot 2 + (-1)\cdot 0 + 4\cdot 5 = 26\)</span><br />
</li>
<li><span class="math inline">\(c_{22} = 3\cdot 1 + (-1)\cdot(-1) + 4\cdot 2 = 12\)</span></li>
</ul>
<p><span class="math display">\[
\Rightarrow\
\mathbf{C}=
\begin{bmatrix}
2 &amp; -1\\
26 &amp; 12
\end{bmatrix}.
\]</span></p>
<p><strong>Matrix multiplication in R</strong></p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="ecological-networks.html#cb1-1" tabindex="-1"></a>A <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">0</span>,</span>
<span id="cb1-2"><a href="ecological-networks.html#cb1-2" tabindex="-1"></a>              <span class="dv">3</span>,<span class="sc">-</span><span class="dv">1</span>,<span class="dv">4</span>), <span class="at">nrow =</span> <span class="dv">2</span>, <span class="at">byrow =</span> <span class="cn">TRUE</span>)</span>
<span id="cb1-3"><a href="ecological-networks.html#cb1-3" tabindex="-1"></a>B <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">1</span>,</span>
<span id="cb1-4"><a href="ecological-networks.html#cb1-4" tabindex="-1"></a>              <span class="dv">0</span>,<span class="sc">-</span><span class="dv">1</span>,</span>
<span id="cb1-5"><a href="ecological-networks.html#cb1-5" tabindex="-1"></a>              <span class="dv">5</span>,<span class="dv">2</span>), <span class="at">nrow =</span> <span class="dv">3</span>, <span class="at">byrow =</span> <span class="cn">TRUE</span>)</span>
<span id="cb1-6"><a href="ecological-networks.html#cb1-6" tabindex="-1"></a>A <span class="sc">%*%</span> B</span></code></pre></div>
<pre><code>##      [,1] [,2]
## [1,]    2   -1
## [2,]   26   12</code></pre>
<p><strong>Using <code>sweep()</code> for fast row/column operations</strong></p>
<p><code>sweep(x, MARGIN, STATS, FUN)</code> applies a vector (<code>STATS</code>) across <strong>rows</strong> (<code>MARGIN = 1</code>) or <strong>columns</strong> (<code>MARGIN = 2</code>) of a matrix/data frame using a function (<code>FUN</code>, default <code>"-"</code>).</p>
<p>We’ll use a mini <strong>site × species</strong> abundance table:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="ecological-networks.html#cb3-1" tabindex="-1"></a><span class="co"># Mini site × species abundance matrix</span></span>
<span id="cb3-2"><a href="ecological-networks.html#cb3-2" tabindex="-1"></a>X <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">c</span>(</span>
<span id="cb3-3"><a href="ecological-networks.html#cb3-3" tabindex="-1"></a>  <span class="dv">5</span>, <span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">0</span>,   <span class="co"># Site 1</span></span>
<span id="cb3-4"><a href="ecological-networks.html#cb3-4" tabindex="-1"></a>  <span class="dv">0</span>, <span class="dv">4</span>, <span class="dv">6</span>, <span class="dv">1</span>,   <span class="co"># Site 2</span></span>
<span id="cb3-5"><a href="ecological-networks.html#cb3-5" tabindex="-1"></a>  <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">7</span>, <span class="dv">3</span>    <span class="co"># Site 3</span></span>
<span id="cb3-6"><a href="ecological-networks.html#cb3-6" tabindex="-1"></a>), <span class="at">nrow =</span> <span class="dv">3</span>, <span class="at">byrow =</span> <span class="cn">TRUE</span>,</span>
<span id="cb3-7"><a href="ecological-networks.html#cb3-7" tabindex="-1"></a><span class="at">dimnames =</span> <span class="fu">list</span>(<span class="fu">paste0</span>(<span class="st">&quot;Site&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>),</span>
<span id="cb3-8"><a href="ecological-networks.html#cb3-8" tabindex="-1"></a>                <span class="fu">c</span>(<span class="st">&quot;Bee_A&quot;</span>,<span class="st">&quot;Bee_B&quot;</span>,<span class="st">&quot;Bee_C&quot;</span>,<span class="st">&quot;Bee_D&quot;</span>)))</span>
<span id="cb3-9"><a href="ecological-networks.html#cb3-9" tabindex="-1"></a>X</span></code></pre></div>
<pre><code>##       Bee_A Bee_B Bee_C Bee_D
## Site1     5     3     2     0
## Site2     0     4     6     1
## Site3     2     1     7     3</code></pre>
<p><strong>Column operations (species across sites)</strong></p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="ecological-networks.html#cb5-1" tabindex="-1"></a>col_means <span class="ot">&lt;-</span> <span class="fu">colMeans</span>(X)</span>
<span id="cb5-2"><a href="ecological-networks.html#cb5-2" tabindex="-1"></a>col_sds   <span class="ot">&lt;-</span> <span class="fu">apply</span>(X, <span class="dv">2</span>, sd)</span>
<span id="cb5-3"><a href="ecological-networks.html#cb5-3" tabindex="-1"></a></span>
<span id="cb5-4"><a href="ecological-networks.html#cb5-4" tabindex="-1"></a><span class="co"># Center columns: subtract each species’ mean across sites</span></span>
<span id="cb5-5"><a href="ecological-networks.html#cb5-5" tabindex="-1"></a>X_col_centered <span class="ot">&lt;-</span> <span class="fu">sweep</span>(X, <span class="at">MARGIN =</span> <span class="dv">2</span>, <span class="at">STATS =</span> col_means, <span class="at">FUN =</span> <span class="st">&quot;-&quot;</span>)</span>
<span id="cb5-6"><a href="ecological-networks.html#cb5-6" tabindex="-1"></a></span>
<span id="cb5-7"><a href="ecological-networks.html#cb5-7" tabindex="-1"></a><span class="co"># Z-score columns: (X - mean) / sd</span></span>
<span id="cb5-8"><a href="ecological-networks.html#cb5-8" tabindex="-1"></a>X_z <span class="ot">&lt;-</span> <span class="fu">sweep</span>(X, <span class="dv">2</span>, col_means, <span class="st">&quot;-&quot;</span>)</span>
<span id="cb5-9"><a href="ecological-networks.html#cb5-9" tabindex="-1"></a>X_z <span class="ot">&lt;-</span> <span class="fu">sweep</span>(X_z, <span class="dv">2</span>, col_sds, <span class="st">&quot;/&quot;</span>)</span>
<span id="cb5-10"><a href="ecological-networks.html#cb5-10" tabindex="-1"></a>X_z</span></code></pre></div>
<pre><code>##            Bee_A      Bee_B      Bee_C      Bee_D
## Site1  1.0596259  0.2182179 -1.1338934 -0.8728716
## Site2 -0.9271726  0.8728716  0.3779645 -0.2182179
## Site3 -0.1324532 -1.0910895  0.7559289  1.0910895</code></pre>
<p><strong>Row operations (sites across species)</strong></p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="ecological-networks.html#cb7-1" tabindex="-1"></a>row_means <span class="ot">&lt;-</span> <span class="fu">rowMeans</span>(X)</span>
<span id="cb7-2"><a href="ecological-networks.html#cb7-2" tabindex="-1"></a>row_sums  <span class="ot">&lt;-</span> <span class="fu">rowSums</span>(X)</span>
<span id="cb7-3"><a href="ecological-networks.html#cb7-3" tabindex="-1"></a></span>
<span id="cb7-4"><a href="ecological-networks.html#cb7-4" tabindex="-1"></a><span class="co"># Center rows: subtract each site’s mean abundance</span></span>
<span id="cb7-5"><a href="ecological-networks.html#cb7-5" tabindex="-1"></a>X_row_centered <span class="ot">&lt;-</span> <span class="fu">sweep</span>(X, <span class="at">MARGIN =</span> <span class="dv">1</span>, <span class="at">STATS =</span> row_means, <span class="at">FUN =</span> <span class="st">&quot;-&quot;</span>)</span>
<span id="cb7-6"><a href="ecological-networks.html#cb7-6" tabindex="-1"></a></span>
<span id="cb7-7"><a href="ecological-networks.html#cb7-7" tabindex="-1"></a><span class="co"># Row proportions: divide each row by its row sum (compositional)</span></span>
<span id="cb7-8"><a href="ecological-networks.html#cb7-8" tabindex="-1"></a><span class="co"># will only with safe if no zero-sum rows)</span></span>
<span id="cb7-9"><a href="ecological-networks.html#cb7-9" tabindex="-1"></a></span>
<span id="cb7-10"><a href="ecological-networks.html#cb7-10" tabindex="-1"></a>X_prop <span class="ot">&lt;-</span> <span class="fu">sweep</span>(X, <span class="at">MARGIN =</span> <span class="dv">1</span>, <span class="at">STATS =</span> row_sums, <span class="at">FUN =</span> <span class="st">&quot;/&quot;</span>)</span>
<span id="cb7-11"><a href="ecological-networks.html#cb7-11" tabindex="-1"></a>X_prop</span></code></pre></div>
<pre><code>##           Bee_A      Bee_B     Bee_C      Bee_D
## Site1 0.5000000 0.30000000 0.2000000 0.00000000
## Site2 0.0000000 0.36363636 0.5454545 0.09090909
## Site3 0.1538462 0.07692308 0.5384615 0.23076923</code></pre>
<p><strong>Column weights example (apply species weights to each row)</strong></p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="ecological-networks.html#cb9-1" tabindex="-1"></a>w <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="at">Bee_A =</span> <span class="fl">1.0</span>, <span class="at">Bee_B =</span> <span class="fl">0.5</span>, <span class="at">Bee_C =</span> <span class="fl">1.5</span>, <span class="at">Bee_D =</span> <span class="fl">2.0</span>)</span>
<span id="cb9-2"><a href="ecological-networks.html#cb9-2" tabindex="-1"></a>X_weighted <span class="ot">&lt;-</span> <span class="fu">sweep</span>(X, <span class="at">MARGIN =</span> <span class="dv">2</span>, <span class="at">STATS =</span> w, <span class="at">FUN =</span> <span class="st">&quot;*&quot;</span>)</span>
<span id="cb9-3"><a href="ecological-networks.html#cb9-3" tabindex="-1"></a>row_scores <span class="ot">&lt;-</span> <span class="fu">rowSums</span>(X_weighted)</span>
<span id="cb9-4"><a href="ecological-networks.html#cb9-4" tabindex="-1"></a></span>
<span id="cb9-5"><a href="ecological-networks.html#cb9-5" tabindex="-1"></a>X_weighted</span></code></pre></div>
<pre><code>##       Bee_A Bee_B Bee_C Bee_D
## Site1     5   1.5   3.0     0
## Site2     0   2.0   9.0     2
## Site3     2   0.5  10.5     6</code></pre>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="ecological-networks.html#cb11-1" tabindex="-1"></a>row_scores</span></code></pre></div>
<pre><code>## Site1 Site2 Site3 
##   9.5  13.0  19.0</code></pre>
</div>
</div>
<div id="in-class-challenge-matrix-vector-multiplication-with-plantpollinator-data" class="section level2 hasAnchor" number="7.2">
<h2><span class="header-section-number">7.2</span> In-class challenge: Matrix &amp; vector multiplication with plant–pollinator data<a href="ecological-networks.html#in-class-challenge-matrix-vector-multiplication-with-plantpollinator-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>We’ll use a <strong>plant × pollinator</strong> visitation matrix <code>V</code> (rows = plants, columns = pollinators). You’ll compute:
- a matrix–vector product (expected seeds per plant),
- row/column reweighting via diagonal matrices,
- plant–plant and pollinator–pollinator overlaps via matrix–matrix products, and
- effectiveness-weighted visits.</p>
<div id="in-class-challenge-matrix-vector-multiplication-with-plantpollinator-data-1" class="section level3 hasAnchor" number="7.2.1">
<h3><span class="header-section-number">7.2.1</span> In-class challenge: Matrix &amp; vector multiplication with plant–pollinator data<a href="ecological-networks.html#in-class-challenge-matrix-vector-multiplication-with-plantpollinator-data-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We’ll use a <strong>plant × pollinator</strong> visitation matrix <code>V</code> (rows = plants, columns = pollinators). You’ll compute:</p>
<ul>
<li>a matrix–vector product (expected seeds per plant)</li>
<li>row/column reweighting via diagonal matrices</li>
<li>plant–plant and pollinator–pollinator overlaps via matrix–matrix products</li>
<li>effectiveness-weighted visits.</li>
</ul>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="ecological-networks.html#cb13-1" tabindex="-1"></a><span class="co"># Data: counts of visits observed during a standardized survey period </span></span>
<span id="cb13-2"><a href="ecological-networks.html#cb13-2" tabindex="-1"></a>plants      <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Lupine&quot;</span>,<span class="st">&quot;Sunflower&quot;</span>,<span class="st">&quot;Sage&quot;</span>)</span>
<span id="cb13-3"><a href="ecological-networks.html#cb13-3" tabindex="-1"></a>pollinators <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Bombus&quot;</span>,<span class="st">&quot;Apis&quot;</span>,<span class="st">&quot;Halictus&quot;</span>,<span class="st">&quot;Osmia&quot;</span>)</span>
<span id="cb13-4"><a href="ecological-networks.html#cb13-4" tabindex="-1"></a></span>
<span id="cb13-5"><a href="ecological-networks.html#cb13-5" tabindex="-1"></a>V <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">c</span>(</span>
<span id="cb13-6"><a href="ecological-networks.html#cb13-6" tabindex="-1"></a>  <span class="dv">12</span>,  <span class="dv">7</span>,  <span class="dv">3</span>,  <span class="dv">4</span>,   <span class="co"># Lupine</span></span>
<span id="cb13-7"><a href="ecological-networks.html#cb13-7" tabindex="-1"></a>   <span class="dv">5</span>, <span class="dv">19</span>,  <span class="dv">8</span>,  <span class="dv">2</span>,   <span class="co"># Sunflower</span></span>
<span id="cb13-8"><a href="ecological-networks.html#cb13-8" tabindex="-1"></a>   <span class="dv">9</span>,  <span class="dv">4</span>, <span class="dv">11</span>,  <span class="dv">6</span>    <span class="co"># Sage</span></span>
<span id="cb13-9"><a href="ecological-networks.html#cb13-9" tabindex="-1"></a>), <span class="at">nrow =</span> <span class="fu">length</span>(plants), <span class="at">byrow =</span> <span class="cn">TRUE</span>,</span>
<span id="cb13-10"><a href="ecological-networks.html#cb13-10" tabindex="-1"></a><span class="at">dimnames =</span> <span class="fu">list</span>(plants, pollinators))</span>
<span id="cb13-11"><a href="ecological-networks.html#cb13-11" tabindex="-1"></a></span>
<span id="cb13-12"><a href="ecological-networks.html#cb13-12" tabindex="-1"></a><span class="co"># Per-visit pollination effectiveness (relative seeds per visit) for each pollinator</span></span>
<span id="cb13-13"><a href="ecological-networks.html#cb13-13" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="at">Bombus =</span> <span class="fl">1.8</span>, <span class="at">Apis =</span> <span class="fl">1.2</span>, <span class="at">Halictus =</span> <span class="fl">0.6</span>, <span class="at">Osmia =</span> <span class="fl">1.0</span>)</span>
<span id="cb13-14"><a href="ecological-networks.html#cb13-14" tabindex="-1"></a></span>
<span id="cb13-15"><a href="ecological-networks.html#cb13-15" tabindex="-1"></a><span class="co"># Row multipliers: change in floral display/attractiveness for each plant (next day)</span></span>
<span id="cb13-16"><a href="ecological-networks.html#cb13-16" tabindex="-1"></a>row_mult <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="at">Lupine =</span> <span class="fl">1.10</span>, <span class="at">Sunflower =</span> <span class="fl">0.90</span>, <span class="at">Sage =</span> <span class="fl">1.00</span>)</span>
<span id="cb13-17"><a href="ecological-networks.html#cb13-17" tabindex="-1"></a></span>
<span id="cb13-18"><a href="ecological-networks.html#cb13-18" tabindex="-1"></a><span class="co"># Column multipliers: change in pollinator activity (next day)</span></span>
<span id="cb13-19"><a href="ecological-networks.html#cb13-19" tabindex="-1"></a>col_mult <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="at">Bombus =</span> <span class="fl">0.80</span>, <span class="at">Apis =</span> <span class="fl">1.20</span>, <span class="at">Halictus =</span> <span class="fl">1.00</span>, <span class="at">Osmia =</span> <span class="fl">1.10</span>)</span>
<span id="cb13-20"><a href="ecological-networks.html#cb13-20" tabindex="-1"></a></span>
<span id="cb13-21"><a href="ecological-networks.html#cb13-21" tabindex="-1"></a>V</span></code></pre></div>
<pre><code>##           Bombus Apis Halictus Osmia
## Lupine        12    7        3     4
## Sunflower      5   19        8     2
## Sage           9    4       11     6</code></pre>
<p><strong>Q1. Dimensions &amp; conformability (1 min)</strong></p>
<ul>
<li>What are the dimensions of <code>V</code>?<br />
</li>
<li>What are the dimensions of <code>a</code> (treat it as a <strong>column</strong> vector)?<br />
</li>
<li>Is <code>V %*% a</code> conformable? What will be the shape of the result?</li>
</ul>
<p><em>Hint:</em> <span class="math inline">\((S\times T)(T\times 1) \to (S\times 1)\)</span>.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="ecological-networks.html#cb15-1" tabindex="-1"></a><span class="fu">dim</span>(V)</span>
<span id="cb15-2"><a href="ecological-networks.html#cb15-2" tabindex="-1"></a><span class="fu">length</span>(a)     <span class="co"># number of pollinators (T)</span></span>
<span id="cb15-3"><a href="ecological-networks.html#cb15-3" tabindex="-1"></a><span class="co"># Conformability check: ncol(V) == length(a)</span></span>
<span id="cb15-4"><a href="ecological-networks.html#cb15-4" tabindex="-1"></a><span class="fu">ncol</span>(V) <span class="sc">==</span> <span class="fu">length</span>(a)</span></code></pre></div>
<hr />
<p><strong>Q2. Expected seeds per plant (matrix–vector product) (3–4 min)</strong></p>
<p>Assume <strong>linearity</strong> of contributions by visits:
<span class="math display">\[\mathbf{s} \;=\; V \, \mathbf{a},\]</span>
where <span class="math inline">\(V\)</span> is plants×pollinators and <span class="math inline">\(\mathbf{a}\)</span> is per-visit effectiveness (pollinators×1).</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="ecological-networks.html#cb16-1" tabindex="-1"></a><span class="co"># Ensure &#39;a&#39; is aligned to V&#39;s columns by name</span></span>
<span id="cb16-2"><a href="ecological-networks.html#cb16-2" tabindex="-1"></a>a <span class="ot">&lt;-</span> a[<span class="fu">colnames</span>(V)]</span>
<span id="cb16-3"><a href="ecological-networks.html#cb16-3" tabindex="-1"></a>s <span class="ot">&lt;-</span> V <span class="sc">%*%</span> a  <span class="co"># plants × 1</span></span>
<span id="cb16-4"><a href="ecological-networks.html#cb16-4" tabindex="-1"></a>s</span>
<span id="cb16-5"><a href="ecological-networks.html#cb16-5" tabindex="-1"></a></span>
<span id="cb16-6"><a href="ecological-networks.html#cb16-6" tabindex="-1"></a><span class="co"># Which pollinator contributes most to Sunflower’s expected seeds?</span></span>
<span id="cb16-7"><a href="ecological-networks.html#cb16-7" tabindex="-1"></a>(V[<span class="st">&quot;Sunflower&quot;</span>, ] <span class="sc">*</span> a)</span></code></pre></div>
<p><strong>Q3. Plant co-visitation overlap (matrix–matrix product) (4 min)</strong></p>
<p>Compute <strong>plant × plant</strong> overlap:
<span class="math display">\[\,
\mathbf{C}_{\text{plants}} \;=\; V\,V^\top.
\]</span>
Entry <span class="math inline">\(c_{ij}\)</span> is the total number of visits that plants <span class="math inline">\(i\)</span> and <span class="math inline">\(j\)</span> share across pollinators (diagonal = total visits per plant).</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="ecological-networks.html#cb17-1" tabindex="-1"></a>C_plants <span class="ot">&lt;-</span> V <span class="sc">%*%</span> <span class="fu">t</span>(V)</span>
<span id="cb17-2"><a href="ecological-networks.html#cb17-2" tabindex="-1"></a>C_plants</span>
<span id="cb17-3"><a href="ecological-networks.html#cb17-3" tabindex="-1"></a><span class="co"># Which plant pair shares the most pollinator effort (largest off-diagonal)?</span></span></code></pre></div>
<hr />
<p><strong>Other examples in networks:</strong></p>
<ul>
<li>Multiplying an <strong>adjacency matrix</strong> <span class="math inline">\(\mathbf{A}\)</span> by a vector of <strong>species abundances</strong> <span class="math inline">\(\mathbf{N}\)</span> yields linear combinations of partner contributions.</li>
<li><span class="math inline">\(\mathbf{A}\mathbf{1}\)</span> (where <span class="math inline">\(\mathbf{1}\)</span> is a vector of ones) gives <strong>row sums</strong> (e.g., consumer breadth “generality”), and <span class="math inline">\(\mathbf{1}^\top\mathbf{A}\)</span> gives <strong>column sums</strong> (resource breadth “vulnerability”) in bipartite mutualisms <span class="citation">(<a href="#ref-dormann2009">Dormann, Gruber, and Fründ 2009</a>)</span>.</li>
<li>The <strong>two‑step reach</strong> between nodes is encoded by <span class="math inline">\(\mathbf{A}^2\)</span> (paths of length 2).</li>
<li>In our lab we will multiple occurrence body sizes and occurrence matrices to build foodwebs for different time periods.</li>
</ul>
<hr />
</div>
<div id="from-data-to-networks" class="section level3 hasAnchor" number="7.2.2">
<h3><span class="header-section-number">7.2.2</span> From data to networks<a href="ecological-networks.html#from-data-to-networks" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><strong>Empirical construction</strong></p>
<ol style="list-style-type: decimal">
<li><strong>Define nodes and edges</strong>: species (or morphospecies) are nodes; an edge represents a recorded interaction (e.g., visit, predation event, parasitism).<br />
</li>
<li><strong>Sampling design</strong>: standardized time/area, repeated censuses to reduce detection bias; record identity and (ideally) frequency/weight of interactions <span class="citation">(<a href="#ref-delmas2019">Delmas et al. 2019</a>)</span>.<br />
</li>
<li><strong>Matrix assembly</strong>: unipartite (e.g., predator–prey, directed) or bipartite (e.g., plant–pollinator). Binary vs. quantitative matrices.<br />
</li>
<li><strong>Data sources</strong>: curated repositories (e.g., <strong>Web of Life</strong>, <strong>Mangal</strong>) provide matrices + metadata and programmatic access <span class="citation">(<a href="#ref-weboflife">Bascompte Lab 2017</a>; <a href="#ref-rmangal2019">Poisot et al. 2019</a>)</span>.</li>
</ol>
<p><strong>Common network types</strong></p>
<ul>
<li><strong>Food webs (trophic)</strong>: unipartite, directed edges from resource <span class="math inline">\(\to\)</span> consumer <span class="citation">(<a href="#ref-pascualdunne2006">Pascual and Dunne 2006</a>; <a href="#ref-may1972">May 1972</a>)</span>.</li>
<li><strong>Mutualisms</strong> (pollination, seed dispersal): bipartite, typically undirected and weighted <span class="citation">(<a href="#ref-bascompte2003">J. Bascompte et al. 2003</a>; <a href="#ref-delmas2019">Delmas et al. 2019</a>)</span>.</li>
<li><strong>Antagonistic bipartite</strong>: host–parasitoid, plant–herbivore.<br />
</li>
<li><strong>Parasite–host, disease</strong>: may be multilayer (hosts–vectors–pathogens).</li>
<li><strong>Multilayer/temporal</strong>: replicate layers across sites/seasons.</li>
</ul>
<p><strong>Networks from dynamic systems models</strong></p>
<p>Many community models define <strong>interaction strengths</strong> explicitly. In <strong>generalized Lotka–Volterra (GLV)</strong> models,
<span class="math display">\[\frac{dN_i}{dt} = r_i N_i + \sum_{j} \alpha_{ij} N_i N_j,\]</span>
where <span class="math inline">\(\alpha_{ij}\)</span> is the per‑capita effect of species <span class="math inline">\(j\)</span> on <span class="math inline">\(i\)</span>. The <strong>Jacobian</strong> at equilibrium,
<span class="math inline">\(\mathbf{J} = [\partial f_i / \partial N_j]\)</span>, encodes local stability and can be interpreted as a <strong>weighted, signed network</strong> <span class="citation">(<a href="#ref-may1972">May 1972</a>; <a href="#ref-allesina2012">Allesina and Tang 2012</a>)</span>.</p>
<ul>
<li><strong>Food webs</strong>: <span class="math inline">\(\alpha_{ij}&lt;0\)</span> if <span class="math inline">\(j\)</span> consumes <span class="math inline">\(i\)</span>; <span class="math inline">\(\alpha_{ji}&gt;0\)</span> for the consumer’s gain.<br />
</li>
<li><strong>Mutualisms</strong>: <span class="math inline">\(\alpha_{ij},\alpha_{ji}&gt;0\)</span> (can be saturating).<br />
</li>
<li><strong>Competition</strong>: <span class="math inline">\(\alpha_{ij},\alpha_{ji}&lt;0\)</span>.</li>
</ul>
<p>Stability depends on <strong>size</strong>, <strong>connectance</strong>, <strong>mean/variance</strong> of <span class="math inline">\(\alpha_{ij}\)</span>, and the <strong>sign structure</strong> (e.g., predator–prey increases stability relative to random interactions) <span class="citation">(<a href="#ref-may1972">May 1972</a>; <a href="#ref-allesina2012">Allesina and Tang 2012</a>)</span>.</p>
<hr />
</div>
<div id="core-network-properties-formulas-intuition-tools" class="section level3 hasAnchor" number="7.2.3">
<h3><span class="header-section-number">7.2.3</span> Core network properties (formulas, intuition, tools)<a href="ecological-networks.html#core-network-properties-formulas-intuition-tools" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Let <span class="math inline">\(S\)</span> be number of species (nodes) and <span class="math inline">\(L\)</span> number of realized links.</p>
<ul>
<li><strong>Size &amp; density</strong>: In bipartite networks with <span class="math inline">\(S_\mathrm{plants}\times S_\mathrm{animals}\)</span> possible links, <strong>connectance</strong>
<span class="math inline">\(C = L/(S_\mathrm{plants}\,S_\mathrm{animals})\)</span>. In directed unipartite graphs, <span class="math inline">\(C = L/[S(S-1)]\)</span> <span class="citation">(<a href="#ref-may1972">May 1972</a>)</span>.</li>
<li><strong>Degree distributions</strong>: number of partners per species; in bipartite networks these are “generality” (rows) and “vulnerability” (cols) <span class="citation">(<a href="#ref-dormann2009">Dormann, Gruber, and Fründ 2009</a>)</span>.</li>
<li><strong>Weighted counterparts</strong>: <strong>species strength</strong> is the sum of a species’ dependence across partners; a meaningful complexity measure in mutualistic webs <span class="citation">(<a href="#ref-bascompte2006science">J. Bascompte, Jordano, and Olesen 2006</a>)</span>.</li>
<li><strong>Nestedness (NODF)</strong>: specialists interact with subsets of generalists’ partners; computed via NODF (based on overlap and decreasing fill) <span class="citation">(<a href="#ref-almeidaneto2008">Almeida-Neto et al. 2008</a>; <a href="#ref-ulrich2009">Ulrich, Almeida-Neto, and Gotelli 2009</a>)</span>.</li>
<li><strong>Modularity (<span class="math inline">\(Q\)</span>)</strong>: extent to which species form groups (modules) with dense internal links and sparse external links <span class="citation">(<a href="#ref-newman2006">Newman 2006</a>; <a href="#ref-olesen2007">Olesen et al. 2007</a>)</span>.</li>
<li><strong>Specialization <span class="math inline">\(H_2&#39;\)</span></strong> (network‑level): standardized interaction diversity; robust to unequal sampling <span class="citation">(<a href="#ref-bluthgen2006">Blüthgen, Menzel, and Blüthgen 2006</a>)</span>.</li>
<li><strong>Redundancy &amp; complementarity</strong>: complementary pollinators visit <strong>different</strong> plants (functional complementarity), while redundancy captures <strong>overlap</strong> among species’ functions; both relate to stability of ecosystem functions <span class="citation">(<a href="#ref-devoto2012">Devoto et al. 2012</a>; <a href="#ref-magrach2021">Magrách, Antón, et al. 2021</a>; <a href="#ref-ponisio2020">Ponisio et al. 2020</a>)</span>.</li>
</ul>
<p><strong>Nestedness (NODF)</strong></p>
<p>NODF combines <strong>paired overlap</strong> and <strong>decreasing fill</strong> across ordered rows/columns <span class="citation">(<a href="#ref-almeidaneto2008">Almeida-Neto et al. 2008</a>)</span>. Values range 0–100. Implementations: <code>bipartite::nested(web, method = "NODF"),</code>vegan::nestedtemp`.</p>
<p><strong>Modularity <span class="math inline">\(Q\)</span></strong></p>
<p>For a given partition of nodes into modules, modularity compares within‑module weight to a randomized expectation <span class="citation">(<a href="#ref-newman2006">Newman 2006</a>)</span>:
<span class="math display">\[ Q = \frac{1}{2m}\sum_{ij} \left(A_{ij} - \frac{k_i k_j}{2m}\right)\delta(g_i,g_j),\]</span>
with <span class="math inline">\(m=\)</span> total weight, <span class="math inline">\(k_i=\)</span> node strength, and <span class="math inline">\(\delta\)</span> equal to 1 if <span class="math inline">\(i\)</span> and <span class="math inline">\(j\)</span> share a module.
Pollination networks are often modular <span class="citation">(<a href="#ref-olesen2007">Olesen et al. 2007</a>)</span>. Tools: <code>bipartite::computeModules</code>, <code>igraph::cluster_*</code>.</p>
<p><strong>Specialization <span class="math inline">\(H_2&#39;\)</span> (network) and <span class="math inline">\(d&#39;\)</span> (species)</strong></p>
<p>Information‑theoretic indices that standardize interaction diversity against marginals <span class="citation">(<a href="#ref-bluthgen2006">Blüthgen, Menzel, and Blüthgen 2006</a>)</span>. In <code>bipartite</code>: <code>H2fun</code></p>
<p><strong>Connectance</strong></p>
<p><span class="math inline">\(C = L/M\)</span> where <span class="math inline">\(M\)</span> is the maximum possible links (see above). High <span class="math inline">\(C\)</span> indicates dense interaction structure <span class="citation">(<a href="#ref-may1972">May 1972</a>)</span>. Scales with network size (number of species) so can be easily misinterpreted when comparing the connectance of networks of different sizes.</p>
<p><strong>Species roles</strong></p>
<ul>
<li><strong>Degree centrality</strong>: number of unique partners</li>
<li><strong>Betweenness centrality</strong>: fraction of shortest paths that pass through a species (potential “bridges”) <span class="citation">(<a href="#ref-freeman1979">Freeman 1979</a>)</span>.</li>
<li><strong>Closeness centrality</strong>: inverse of distances to all others (fast access) <span class="citation">(<a href="#ref-freeman1979">Freeman 1979</a>)</span>.</li>
<li><strong>Eigenvector centrality</strong>: high if connected to other central species.</li>
<li><strong>Species strength</strong> (weighted degree by dependence) gauges importance as a mutualistic provider/consumer <span class="citation">(<a href="#ref-bascompte2006science">J. Bascompte, Jordano, and Olesen 2006</a>)</span>.
<strong>d’</strong> recipocal specialization, similar to H2 but for a species <span class="citation">(<a href="#ref-bluthgen2006">Blüthgen, Menzel, and Blüthgen 2006</a>)</span>.</li>
</ul>
<p><code>bipartite::specieslevel</code> can calculate about every metric you can imagine, see <code>?bipartite::specieslevel</code>.</p>
</div>
<div id="demo-building-networks-and-characterizing-their-structure" class="section level3 hasAnchor" number="7.2.4">
<h3><span class="header-section-number">7.2.4</span> Demo: Building networks and characterizing their structure<a href="ecological-networks.html#demo-building-networks-and-characterizing-their-structure" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="ecological-networks.html#cb18-1" tabindex="-1"></a><span class="do">## Example: load a Web-of-Life matrix shipped with bipartite, &quot;Safariland&quot; is pollination web was published by Vázquez and Simberloff (2003).</span></span>
<span id="cb18-2"><a href="ecological-networks.html#cb18-2" tabindex="-1"></a><span class="fu">data</span>(Safariland)</span>
<span id="cb18-3"><a href="ecological-networks.html#cb18-3" tabindex="-1"></a>net <span class="ot">&lt;-</span> Safariland <span class="co"># too hard to spell... </span></span>
<span id="cb18-4"><a href="ecological-networks.html#cb18-4" tabindex="-1"></a>net</span></code></pre></div>
<pre><code>##                          Policana albopilosa Bombus dahlbomii
## Aristotelia chilensis                    673                0
## Alstroemeria aurea                         0              154
## Schinus patagonicus                        0                0
## Berberis darwinii                          0               67
## Rosa eglanteria                            0                0
## Cynanchum diemii                           0                0
## Ribes magellanicum                         0                0
## Mutisia decurrens                          0                0
## Calceolaria crenatiflora                   0                0
##                          Ruizantheda mutabilis Trichophthalma amoena
## Aristotelia chilensis                      110                     0
## Alstroemeria aurea                           0                     0
## Schinus patagonicus                          0                     0
## Berberis darwinii                            0                     0
## Rosa eglanteria                              6                     0
## Cynanchum diemii                             0                     0
## Ribes magellanicum                           0                     2
## Mutisia decurrens                            0                     0
## Calceolaria crenatiflora                     0                     0
##                          Syrphus octomaculatus Manuelia gayi
## Aristotelia chilensis                        0             0
## Alstroemeria aurea                           5             7
## Schinus patagonicus                          0             0
## Berberis darwinii                            5             0
## Rosa eglanteria                              4             0
## Cynanchum diemii                             0             0
## Ribes magellanicum                           0             0
## Mutisia decurrens                            0             0
## Calceolaria crenatiflora                     0             0
##                          Allograpta.Toxomerus Trichophthalma jaffueli Phthiria
## Aristotelia chilensis                       0                       0        0
## Alstroemeria aurea                          1                       3        8
## Schinus patagonicus                         0                       0        0
## Berberis darwinii                           0                       0        0
## Rosa eglanteria                             2                       0        0
## Cynanchum diemii                            0                       0        0
## Ribes magellanicum                          3                       0        0
## Mutisia decurrens                           0                       0        1
## Calceolaria crenatiflora                    1                       0        0
##                          Platycheirus1 Sapromyza.Minettia Formicidae3
## Aristotelia chilensis                4                  0           0
## Alstroemeria aurea                   1                  1           0
## Schinus patagonicus                  0                  0           0
## Berberis darwinii                    0                  0           0
## Rosa eglanteria                      0                  0           0
## Cynanchum diemii                     0                  0           8
## Ribes magellanicum                   0                  0           0
## Mutisia decurrens                    0                  0           0
## Calceolaria crenatiflora             0                  0           0
##                          Nitidulidae Staphilinidae Ichneumonidae4 Braconidae3
## Aristotelia chilensis              0             0              1           0
## Alstroemeria aurea                 0             4              0           0
## Schinus patagonicus                0             0             15           0
## Berberis darwinii                  0             0              0           0
## Rosa eglanteria                    0             3              0           0
## Cynanchum diemii                   1             0              0           2
## Ribes magellanicum                 0             0              0           0
## Mutisia decurrens                  0             0              0           0
## Calceolaria crenatiflora           0             0              0           0
##                          Chalepogenus caeruleus Vespula germanica Torymidae2
## Aristotelia chilensis                         0                 0          0
## Alstroemeria aurea                            0                 4          0
## Schinus patagonicus                           0                 0          0
## Berberis darwinii                             0                 0          0
## Rosa eglanteria                               0                 0          0
## Cynanchum diemii                              0                 0          9
## Ribes magellanicum                            0                 0          0
## Mutisia decurrens                             0                 0          0
## Calceolaria crenatiflora                      3                 0          0
##                          Phthiria1 Svastrides melanura Sphecidae Thomisidae
## Aristotelia chilensis            0                   0         0          0
## Alstroemeria aurea               1                   6         1          1
## Schinus patagonicus              0                   0         0          0
## Berberis darwinii                0                   0         0          0
## Rosa eglanteria                  0                   0         0          0
## Cynanchum diemii                 0                   0         0          0
## Ribes magellanicum               0                   0         0          0
## Mutisia decurrens                0                   0         0          0
## Calceolaria crenatiflora         0                   0         0          0
##                          Corynura prothysteres Ichneumonidae2
## Aristotelia chilensis                        1              0
## Alstroemeria aurea                           3              4
## Schinus patagonicus                          0              0
## Berberis darwinii                            0              0
## Rosa eglanteria                              0              0
## Cynanchum diemii                             0              0
## Ribes magellanicum                           0              0
## Mutisia decurrens                            0              0
## Calceolaria crenatiflora                     0              0
##                          Ruizantheda proxima Braconidae2
## Aristotelia chilensis                      0           1
## Alstroemeria aurea                         4           0
## Schinus patagonicus                        0           0
## Berberis darwinii                          0           0
## Rosa eglanteria                            0           0
## Cynanchum diemii                           0           0
## Ribes magellanicum                         0           0
## Mutisia decurrens                          0           0
## Calceolaria crenatiflora                   0           0</code></pre>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="ecological-networks.html#cb20-1" tabindex="-1"></a><span class="co"># Basic size and connectance</span></span>
<span id="cb20-2"><a href="ecological-networks.html#cb20-2" tabindex="-1"></a>S_row <span class="ot">&lt;-</span> <span class="fu">nrow</span>(net); S_col <span class="ot">&lt;-</span> <span class="fu">ncol</span>(net); L <span class="ot">&lt;-</span> <span class="fu">sum</span>(net <span class="sc">&gt;</span> <span class="dv">0</span>)</span>
<span id="cb20-3"><a href="ecological-networks.html#cb20-3" tabindex="-1"></a>connectance <span class="ot">&lt;-</span> L<span class="sc">/</span>(S_row<span class="sc">*</span>S_col)</span>
<span id="cb20-4"><a href="ecological-networks.html#cb20-4" tabindex="-1"></a></span>
<span id="cb20-5"><a href="ecological-networks.html#cb20-5" tabindex="-1"></a><span class="co"># A few descriptors </span></span>
<span id="cb20-6"><a href="ecological-networks.html#cb20-6" tabindex="-1"></a><span class="fu">networklevel</span>(net, <span class="at">index=</span><span class="fu">c</span>(<span class="st">&quot;connectance&quot;</span>,<span class="st">&quot;H2&quot;</span>,<span class="st">&quot;nestedness&quot;</span>,<span class="st">&quot;modularity&quot;</span>))</span></code></pre></div>
<pre><code>##  connectance modularity Q   nestedness           H2 
##    0.1604938    0.4304096   19.8021997    0.8537307</code></pre>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="ecological-networks.html#cb22-1" tabindex="-1"></a><span class="do">## Some species level metrics, notice the output is a list with the higher and lower levels as elements.</span></span>
<span id="cb22-2"><a href="ecological-networks.html#cb22-2" tabindex="-1"></a></span>
<span id="cb22-3"><a href="ecological-networks.html#cb22-3" tabindex="-1"></a><span class="fu">specieslevel</span>(net, <span class="at">index=</span><span class="fu">c</span>(<span class="st">&quot;species strength&quot;</span>,<span class="st">&quot;d&quot;</span>, <span class="st">&quot;degree&quot;</span>, <span class="st">&quot;betweenness&quot;</span>, <span class="st">&quot;closeness&quot;</span>))</span></code></pre></div>
<pre><code>## $`higher level`
##                         degree species.strength betweenness
## Policana albopilosa          1      0.851898734  0.00000000
## Bombus dahlbomii             2      1.670940171  0.00000000
## Ruizantheda mutabilis        2      0.539240506  0.04807692
## Trichophthalma amoena        1      0.400000000  0.00000000
## Syrphus octomaculatus        3      0.360149573  0.02307692
## Manuelia gayi                1      0.033653846  0.00000000
## Allograpta.Toxomerus         4      0.988141026  0.41730769
## Trichophthalma jaffueli      1      0.014423077  0.00000000
## Phthiria                     2      1.038461538  0.00000000
## Platycheirus1                2      0.009870983  0.24423077
## Sapromyza.Minettia           1      0.004807692  0.00000000
## Formicidae3                  1      0.400000000  0.00000000
## Nitidulidae                  1      0.050000000  0.00000000
## Staphilinidae                2      0.219230769  0.02307692
## Ichneumonidae4               2      1.001265823  0.00000000
## Braconidae3                  1      0.100000000  0.00000000
## Chalepogenus caeruleus       1      0.750000000  0.00000000
## Vespula germanica            1      0.019230769  0.00000000
## Torymidae2                   1      0.450000000  0.00000000
## Phthiria1                    1      0.004807692  0.00000000
## Svastrides melanura          1      0.028846154  0.00000000
## Sphecidae                    1      0.004807692  0.00000000
## Thomisidae                   1      0.004807692  0.00000000
## Corynura prothysteres        2      0.015688900  0.24423077
## Ichneumonidae2               1      0.019230769  0.00000000
## Ruizantheda proxima          1      0.019230769  0.00000000
## Braconidae2                  1      0.001265823  0.00000000
##                         weighted.betweenness   closeness weighted.closeness
## Policana albopilosa               0.00000000 0.031499203        0.007653246
## Bombus dahlbomii                  0.27133479 0.045454545        0.016935668
## Ruizantheda mutabilis             0.18161926 0.035885167        0.007635430
## Trichophthalma amoena             0.00000000 0.026315789        0.002008598
## Syrphus octomaculatus             0.26805252 0.046650718        0.009803161
## Manuelia gayi                     0.00000000 0.045454545        0.007645691
## Allograpta.Toxomerus              0.17943107 0.049043062        0.004113559
## Trichophthalma jaffueli           0.00000000 0.045454545        0.004331303
## Phthiria                          0.00000000 0.045454545        0.008236576
## Platycheirus1                     0.09956236 0.050239234        0.003845416
## Sapromyza.Minettia                0.00000000 0.045454545        0.001720655
## Formicidae3                       0.00000000 0.007177033        0.000000000
## Nitidulidae                       0.00000000 0.007177033        0.000000000
## Staphilinidae                     0.00000000 0.046650718        0.006203052
## Ichneumonidae4                    0.00000000 0.031499203        0.001525954
## Braconidae3                       0.00000000 0.007177033        0.000000000
## Chalepogenus caeruleus            0.00000000 0.026315789        0.002535735
## Vespula germanica                 0.00000000 0.045454545        0.005345012
## Torymidae2                        0.00000000 0.007177033        0.000000000
## Phthiria1                         0.00000000 0.045454545        0.001720655
## Svastrides melanura               0.00000000 0.045454545        0.006978210
## Sphecidae                         0.00000000 0.045454545        0.001720655
## Thomisidae                        0.00000000 0.045454545        0.001720655
## Corynura prothysteres             0.00000000 0.050239234        0.004526406
## Ichneumonidae2                    0.00000000 0.045454545        0.005345012
## Ruizantheda proxima               0.00000000 0.045454545        0.005345012
## Braconidae2                       0.00000000 0.031499203        0.001525954
##                                 d
## Policana albopilosa     0.6905693
## Bombus dahlbomii        0.8581794
## Ruizantheda mutabilis   0.1554289
## Trichophthalma amoena   0.8474066
## Syrphus octomaculatus   0.3859789
## Manuelia gayi           0.3202602
## Allograpta.Toxomerus    0.6482363
## Trichophthalma jaffueli 0.2647268
## Phthiria                0.3916793
## Platycheirus1           0.0000000
## Sapromyza.Minettia      0.2000132
## Formicidae3             0.8115396
## Nitidulidae             0.5510016
## Staphilinidae           0.4092484
## Ichneumonidae4          0.9007713
## Braconidae3             0.6165417
## Chalepogenus caeruleus  0.9500994
## Vespula germanica       0.2834746
## Torymidae2              0.8322740
## Phthiria1               0.2000132
## Svastrides melanura     0.3083018
## Sphecidae               0.2000132
## Thomisidae              0.2000132
## Corynura prothysteres   0.1209998
## Ichneumonidae2          0.2834746
## Ruizantheda proxima     0.2834746
## Braconidae2             0.0000000
## 
## $`lower level`
##                          degree species.strength betweenness
## Aristotelia chilensis         6        4.0607759         0.3
## Alstroemeria aurea           17       13.6071500         0.5
## Schinus patagonicus           1        0.9375000         0.0
## Berberis darwinii             2        0.6603103         0.0
## Rosa eglanteria               4        1.0517241         0.2
## Cynanchum diemii              4        4.0000000         0.0
## Ribes magellanicum            2        1.4285714         0.0
## Mutisia decurrens             1        0.1111111         0.0
## Calceolaria crenatiflora      2        1.1428571         0.0
##                          weighted.betweenness  closeness weighted.closeness
## Aristotelia chilensis               0.2222222 0.12931034        0.022311369
## Alstroemeria aurea                  0.4074074 0.16810345        0.019174528
## Schinus patagonicus                 0.0000000 0.08620690        0.028303507
## Berberis darwinii                   0.0000000 0.11206897        0.018597603
## Rosa eglanteria                     0.3703704 0.15517241        0.020088268
## Cynanchum diemii                    0.0000000 0.00000000        0.000000000
## Ribes magellanicum                  0.0000000 0.12500000        0.014799036
## Mutisia decurrens                   0.0000000 0.09913793        0.005731637
## Calceolaria crenatiflora            0.0000000 0.12500000        0.006640118
##                                  d
## Aristotelia chilensis    0.9613968
## Alstroemeria aurea       0.8043229
## Schinus patagonicus      0.9846607
## Berberis darwinii        0.5619798
## Rosa eglanteria          0.5590405
## Cynanchum diemii         1.0000000
## Ribes magellanicum       0.9036839
## Mutisia decurrens        0.6625752
## Calceolaria crenatiflora 0.9106928</code></pre>
</div>
<div id="null-models-for-fair-comparisons" class="section level3 hasAnchor" number="7.2.5">
<h3><span class="header-section-number">7.2.5</span> Null models for fair comparisons<a href="ecological-networks.html#null-models-for-fair-comparisons" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Because many metrics scale with <strong>network size</strong>, <strong>fill</strong>, and <strong>sampling</strong>, compare observed metrics to <strong>null expectations</strong> generated by randomization <span class="citation">(<a href="#ref-dormann2009">Dormann, Gruber, and Fründ 2009</a>; <a href="#ref-ulrich2009">Ulrich, Almeida-Neto, and Gotelli 2009</a>)</span>.</p>
<div id="families-of-null-models" class="section level4 hasAnchor" number="7.2.5.1">
<h4><span class="header-section-number">7.2.5.1</span> Families of null models<a href="ecological-networks.html#families-of-null-models" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ol style="list-style-type: decimal">
<li><strong>Equiprobable / probabilistic</strong>: each cell has the same probability of being 1 (binary) or a probability proportional to row/column totals. Good for testing strong structure but can inflate Type I error (probability of false positives) with heterogeneous marginals <span class="citation">(<a href="#ref-gotelli2000">Gotelli 2000</a>)</span>.</li>
<li><strong>Constrained marginals</strong>: preserve row and/or column totals to mimic sampling and abundance effects.
<ul>
<li><strong>Fixed–Fixed (FF)</strong>: preserve both row and column sums via <strong>swap</strong>, <strong>trial‑swap</strong>, <strong>curveball</strong> algorithms <span class="citation">(<a href="#ref-miklos2004">Miklós and Podani 2004</a>; <a href="#ref-strona2014">Strona et al. 2014</a>)</span>.<br />
</li>
<li><strong>Fixed–Equiprobable (FE)</strong> / <strong>Equiprobable–Fixed (EF)</strong>: preserve one margin, randomize the other <span class="citation">(<a href="#ref-ulrich2007">Ulrich and Gotelli 2007</a>)</span>.</li>
</ul></li>
</ol>
</div>
<div id="demo-null-models" class="section level4 hasAnchor" number="7.2.5.2">
<h4><span class="header-section-number">7.2.5.2</span> Demo: Null models<a href="ecological-networks.html#demo-null-models" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="ecological-networks.html#cb24-1" tabindex="-1"></a><span class="co"># NODF standardized with constrained nulls</span></span>
<span id="cb24-2"><a href="ecological-networks.html#cb24-2" tabindex="-1"></a>obs <span class="ot">&lt;-</span> <span class="fu">networklevel</span>(net, <span class="at">index=</span><span class="st">&quot;nestedness&quot;</span>)</span>
<span id="cb24-3"><a href="ecological-networks.html#cb24-3" tabindex="-1"></a></span>
<span id="cb24-4"><a href="ecological-networks.html#cb24-4" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1</span>)</span>
<span id="cb24-5"><a href="ecological-networks.html#cb24-5" tabindex="-1"></a><span class="co"># vegan&#39;s oecosimu framework with quasiswap (fixed row &amp; column sums)</span></span>
<span id="cb24-6"><a href="ecological-networks.html#cb24-6" tabindex="-1"></a>null_fun <span class="ot">&lt;-</span> <span class="cf">function</span>(x) vegan<span class="sc">::</span><span class="fu">nestedtemp</span>(x, <span class="st">&quot;NODF&quot;</span>)<span class="sc">$</span>statistic</span>
<span id="cb24-7"><a href="ecological-networks.html#cb24-7" tabindex="-1"></a><span class="fu">oecosimu</span>(net<span class="sc">&gt;</span><span class="dv">0</span>, null_fun,</span>
<span id="cb24-8"><a href="ecological-networks.html#cb24-8" tabindex="-1"></a>         <span class="at">method =</span> <span class="st">&quot;quasiswap&quot;</span>, <span class="at">nsimul =</span> <span class="dv">1000</span>)  <span class="co"># Miklós &amp; Podani 2004</span></span></code></pre></div>
<pre><code>## oecosimu object
## 
## Call: oecosimu(comm = net &gt; 0, nestfun = null_fun, method =
## &quot;quasiswap&quot;, nsimul = 1000)
## 
## nullmodel method &#39;quasiswap&#39; with 1000 simulations
## 
## alternative hypothesis: statistic is less or greater than simulated values
## 
##             statistic     SES   mean   2.5%    50%  97.5% Pr(sim.)
## temperature    19.908 0.43557 19.189 16.503 19.205 22.275   0.7802</code></pre>
<p>Report <strong>z‑scores</strong> or <strong>p‑values</strong> based on the null distribution; when comparing many networks, use the same null model family for consistency <span class="citation">(<a href="#ref-dormann2009">Dormann, Gruber, and Fründ 2009</a>)</span>.</p>
</div>
</div>
<div id="demo-calculating-network-metrics-pollination" class="section level3 hasAnchor" number="7.2.6">
<h3><span class="header-section-number">7.2.6</span> Demo: Calculating network metrics (pollination)<a href="ecological-networks.html#demo-calculating-network-metrics-pollination" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="ecological-networks.html#cb26-1" tabindex="-1"></a><span class="fu">data</span>(Safariland)</span>
<span id="cb26-2"><a href="ecological-networks.html#cb26-2" tabindex="-1"></a>net <span class="ot">&lt;-</span> Safariland</span>
<span id="cb26-3"><a href="ecological-networks.html#cb26-3" tabindex="-1"></a></span>
<span id="cb26-4"><a href="ecological-networks.html#cb26-4" tabindex="-1"></a><span class="co"># Selected metrics</span></span>
<span id="cb26-5"><a href="ecological-networks.html#cb26-5" tabindex="-1"></a><span class="fu">networklevel</span>(net, <span class="at">index=</span><span class="fu">c</span>(<span class="st">&quot;connectance&quot;</span>,<span class="st">&quot;H2&quot;</span>,<span class="st">&quot;nestedness&quot;</span>,<span class="st">&quot;modularity&quot;</span>))</span></code></pre></div>
<pre><code>##  connectance modularity Q   nestedness           H2 
##    0.1604938    0.4301558   19.8923563    0.8537307</code></pre>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="ecological-networks.html#cb28-1" tabindex="-1"></a><span class="co"># Species roles</span></span>
<span id="cb28-2"><a href="ecological-networks.html#cb28-2" tabindex="-1"></a><span class="fu">specieslevel</span>(net, <span class="at">index=</span><span class="fu">c</span>(<span class="st">&quot;degree&quot;</span>,<span class="st">&quot;d&quot;</span>))</span></code></pre></div>
<pre><code>## $`higher level`
##                         degree         d
## Policana albopilosa          1 0.6905693
## Bombus dahlbomii             2 0.8581794
## Ruizantheda mutabilis        2 0.1554289
## Trichophthalma amoena        1 0.8474066
## Syrphus octomaculatus        3 0.3859789
## Manuelia gayi                1 0.3202602
## Allograpta.Toxomerus         4 0.6482363
## Trichophthalma jaffueli      1 0.2647268
## Phthiria                     2 0.3916793
## Platycheirus1                2 0.0000000
## Sapromyza.Minettia           1 0.2000132
## Formicidae3                  1 0.8115396
## Nitidulidae                  1 0.5510016
## Staphilinidae                2 0.4092484
## Ichneumonidae4               2 0.9007713
## Braconidae3                  1 0.6165417
## Chalepogenus caeruleus       1 0.9500994
## Vespula germanica            1 0.2834746
## Torymidae2                   1 0.8322740
## Phthiria1                    1 0.2000132
## Svastrides melanura          1 0.3083018
## Sphecidae                    1 0.2000132
## Thomisidae                   1 0.2000132
## Corynura prothysteres        2 0.1209998
## Ichneumonidae2               1 0.2834746
## Ruizantheda proxima          1 0.2834746
## Braconidae2                  1 0.0000000
## 
## $`lower level`
##                          degree         d
## Aristotelia chilensis         6 0.9613968
## Alstroemeria aurea           17 0.8043229
## Schinus patagonicus           1 0.9846607
## Berberis darwinii             2 0.5619798
## Rosa eglanteria               4 0.5590405
## Cynanchum diemii              4 1.0000000
## Ribes magellanicum            2 0.9036839
## Mutisia decurrens             1 0.6625752
## Calceolaria crenatiflora      2 0.9106928</code></pre>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="ecological-networks.html#cb30-1" tabindex="-1"></a><span class="co"># Null-model standardized nestedness</span></span>
<span id="cb30-2"><a href="ecological-networks.html#cb30-2" tabindex="-1"></a></span>
<span id="cb30-3"><a href="ecological-networks.html#cb30-3" tabindex="-1"></a><span class="fu">oecosimu</span>(net, <span class="cf">function</span>(x) <span class="fu">nestedtemp</span>(x,<span class="st">&quot;NODF&quot;</span>)<span class="sc">$</span>statistic,</span>
<span id="cb30-4"><a href="ecological-networks.html#cb30-4" tabindex="-1"></a>         <span class="at">method=</span><span class="st">&quot;quasiswap&quot;</span>, <span class="at">nsimul=</span><span class="dv">999</span>)</span></code></pre></div>
<pre><code>## Warning in oecosimu(net, function(x) nestedtemp(x, &quot;NODF&quot;)$statistic, method =
## &quot;quasiswap&quot;, : nullmodel transformed &#39;comm&#39; to binary data</code></pre>
<pre><code>## oecosimu object
## 
## Call: oecosimu(comm = net, nestfun = function(x) nestedtemp(x,
## &quot;NODF&quot;)$statistic, method = &quot;quasiswap&quot;, nsimul = 999)
## 
## nullmodel method &#39;quasiswap&#39; with 999 simulations
## 
## alternative hypothesis: statistic is less or greater than simulated values
## 
##             statistic     SES   mean   2.5%    50%  97.5% Pr(sim.)
## temperature    19.749 0.38594 19.103 16.422 19.173 22.271    0.799</code></pre>
<p>Interpretation tips: high <span class="math inline">\(H_2&#39;\)</span> means <strong>specialized</strong> interactions; high NODF indicates <strong>nested</strong> structure; high <span class="math inline">\(Q\)</span> implies <strong>modules</strong> (compartments).</p>
</div>
<div id="demo-create-a-graph-from-oba-data-visualize-it" class="section level3 hasAnchor" number="7.2.7">
<h3><span class="header-section-number">7.2.7</span> Demo: Create a graph from OBA data, visualize it<a href="ecological-networks.html#demo-create-a-graph-from-oba-data-visualize-it" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Let’s load in our OBA data and make a network for all the bumble bees in Oregon. We will need to subset the data, then keep only the bee and plant species columns.</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="ecological-networks.html#cb33-1" tabindex="-1"></a>oba <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;data/OBA_2018-2023.csv&quot;</span>)</span>
<span id="cb33-2"><a href="ecological-networks.html#cb33-2" tabindex="-1"></a><span class="fu">str</span>(oba)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    195788 obs. of  67 variables:
##  $ Observation.No.                    : chr  &quot;Andony_Melathopoulos:18.001.001&quot; &quot;Andony_Melathopoulos:18.002.001&quot; &quot;Andony_Melathopoulos:18.002.002&quot; &quot;Andony_Melathopoulos:18.002.003&quot; ...
##  $ Voucher.No.                        : chr  &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; ...
##  $ user_id                            : int  429964 429964 429964 429964 429964 429964 429964 429964 429964 429964 ...
##  $ user_login                         : chr  &quot;amelathopoulos&quot; &quot;amelathopoulos&quot; &quot;amelathopoulos&quot; &quot;amelathopoulos&quot; ...
##  $ Collector...First.Name             : chr  &quot;Andony&quot; &quot;Andony&quot; &quot;Andony&quot; &quot;Andony&quot; ...
##  $ Collector...First.Initial          : chr  &quot;A.&quot; &quot;A.&quot; &quot;A.&quot; &quot;A.&quot; ...
##  $ Collector...Last.Name              : chr  &quot;Melathopoulos&quot; &quot;Melathopoulos&quot; &quot;Melathopoulos&quot; &quot;Melathopoulos&quot; ...
##  $ Collectors                         : chr  &quot;A.Melathopoulos&quot; &quot;A.Melathopoulos&quot; &quot;A.Melathopoulos&quot; &quot;A.Melathopoulos&quot; ...
##  $ taxon_kingdom_name                 : chr  &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; ...
##  $ Associated.plant...genus..species  : chr  &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; ...
##  $ url                                : chr  &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; ...
##  $ Sample.ID                          : chr  &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; ...
##  $ Specimen.ID                        : int  NA NA NA NA NA NA NA NA NA NA ...
##  $ Collection.Day.1                   : chr  &quot;18&quot; &quot;20&quot; &quot;20&quot; &quot;20&quot; ...
##  $ Month.1                            : chr  &quot;iii&quot; &quot;iii&quot; &quot;iii&quot; &quot;iii&quot; ...
##  $ MonthJul                           : chr  &quot;March&quot; &quot;March&quot; &quot;March&quot; &quot;March&quot; ...
##  $ MonthAb                            : int  3 3 3 3 9 9 9 9 3 3 ...
##  $ Year.1                             : int  2018 2018 2018 2018 2018 2018 2018 2018 2018 2018 ...
##  $ Collection.Date                    : chr  &quot;3/18/2018&quot; &quot;3/20/2018&quot; &quot;3/20/2018&quot; &quot;3/20/2018&quot; ...
##  $ Time.1                             : chr  &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; ...
##  $ Collection.Day.2                   : chr  &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; ...
##  $ Month.2                            : chr  &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; ...
##  $ Year.2                             : chr  &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; ...
##  $ Collection.Day.2.Merge             : chr  &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; ...
##  $ Time.2                             : chr  &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; ...
##  $ Collection.ID                      : chr  &quot;A Melathopoulos &quot; &quot;A Melathopoulos&quot; &quot;A Melathopoulos&quot; &quot;A Melathopoulos&quot; ...
##  $ Position.of.1st.digit              : chr  &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; ...
##  $ Collection.No.                     : chr  &quot;1&quot; &quot;2&quot; &quot;2&quot; &quot;2&quot; ...
##  $ Sample.No.                         : int  1 1 2 3 4 5 6 7 1 1 ...
##  $ Country                            : chr  &quot;USA&quot; &quot;USA&quot; &quot;USA&quot; &quot;USA&quot; ...
##  $ State                              : chr  &quot;Oregon&quot; &quot;Oregon&quot; &quot;Oregon&quot; &quot;Oregon&quot; ...
##  $ County                             : chr  &quot;Benton&quot; &quot;Benton&quot; &quot;Benton&quot; &quot;Benton&quot; ...
##  $ Location                           : chr  &quot;Corvallis, NW Orchard Ave&quot; &quot;Corvallis, NW Orchard Ave&quot; &quot;Corvallis, NW Orchard Ave&quot; &quot;Corvallis, NW Orchard Ave&quot; ...
##  $ Abbreviated.Location               : chr  &quot;Astoria Maggie Johnson Rd&quot; &quot;Big Crk. Mainline Knob Pt Rd&quot; &quot;Big Crk. Mainline Knob Pt Rd&quot; &quot;Big Crk. Mainline Knob Pt Rd&quot; ...
##  $ Collection.Site.Description        : chr  &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; ...
##  $ Team                               : chr  &quot;Melathopoulos&quot; &quot;Melathopoulos&quot; &quot;Melathopoulos&quot; &quot;Melathopoulos&quot; ...
##  $ Habitat                            : chr  &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; ...
##  $ Elevation..m.                      : chr  &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; ...
##  $ Dec..Lat.                          : num  44.6 44.6 44.6 44.6 46.1 ...
##  $ Dec..Long.                         : num  -123 -123 -123 -123 -124 ...
##  $ X                                  : int  NA NA NA NA NA NA NA NA NA NA ...
##  $ Collectionmethod                   : chr  &quot;Net&quot; &quot;Net&quot; &quot;Net&quot; &quot;Net&quot; ...
##  $ Collection.method.merge.field      : chr  &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; ...
##  $ Associated.plant...family          : chr  &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; ...
##  $ Associated.plant...genus..species.1: chr  &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; ...
##  $ Associated.plant...Inaturalist.URL : chr  &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; ...
##  $ Associated.plant                   : chr  &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; ...
##  $ Assoc.plant.merge.field            : chr  &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; ...
##  $ Collectors.1                       : chr  &quot;Andony Melathopoulos&quot; &quot;Andony Melathopoulos&quot; &quot;Andony Melathopoulos&quot; &quot;Andony Melathopoulos&quot; ...
##  $ Collector.1.abreviation            : chr  &quot;A Melathopoulos &quot; &quot;A Melathopoulos&quot; &quot;A Melathopoulos&quot; &quot;A Melathopoulos&quot; ...
##  $ Collector.2                        : logi  NA NA NA NA NA NA ...
##  $ Collector.3                        : logi  NA NA NA NA NA NA ...
##  $ Genus                              : chr  &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; ...
##  $ Species                            : chr  &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; ...
##  $ sex                                : chr  &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; ...
##  $ caste                              : chr  &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; ...
##  $ vol.det.Genus                      : chr  &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; ...
##  $ vol.det.Species                    : chr  &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; ...
##  $ vol.det.sex.caste                  : chr  &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; ...
##  $ Determined.By                      : chr  &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; ...
##  $ Date.Determined                    : logi  NA NA NA NA NA NA ...
##  $ Verified.By                        : logi  NA NA NA NA NA NA ...
##  $ Other.Determiner.s.                : chr  &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; ...
##  $ Other.Dets.Sci..Name.s.            : logi  NA NA NA NA NA NA ...
##  $ Other.Dets..Date.s.                : logi  NA NA NA NA NA NA ...
##  $ Additional.Notes                   : chr  &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; ...
##  $ X.1                                : logi  NA NA NA NA NA NA ...</code></pre>
<p>The entire network would be difficult to visualize, so let’s subset the data to just bumble bees. We need to extract only the columns that are relevant for the bee-plant interactions. The column “Associated.plant” has the floral species a bee was caught visiting, if it was caught on a flower.</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="ecological-networks.html#cb35-1" tabindex="-1"></a>bumbles <span class="ot">&lt;-</span> oba[oba<span class="sc">$</span>Genus <span class="sc">==</span> <span class="st">&quot;Bombus&quot;</span>, ]</span>
<span id="cb35-2"><a href="ecological-networks.html#cb35-2" tabindex="-1"></a>bumbles<span class="sc">$</span>GenusSpecies <span class="ot">&lt;-</span>  <span class="fu">paste</span>(bumbles<span class="sc">$</span>Genus, bumbles<span class="sc">$</span>Species)</span>
<span id="cb35-3"><a href="ecological-networks.html#cb35-3" tabindex="-1"></a>bumbles <span class="ot">&lt;-</span> bumbles[, <span class="fu">c</span>(<span class="st">&quot;GenusSpecies&quot;</span>, <span class="st">&quot;Associated.plant&quot;</span>)]</span>
<span id="cb35-4"><a href="ecological-networks.html#cb35-4" tabindex="-1"></a><span class="fu">colnames</span>(bumbles) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;GenusSpecies&quot;</span>, <span class="st">&quot;PlantGenusSpecies&quot;</span>)</span>
<span id="cb35-5"><a href="ecological-networks.html#cb35-5" tabindex="-1"></a><span class="fu">head</span>(bumbles)</span></code></pre></div>
<pre><code>##           GenusSpecies PlantGenusSpecies
## 30   Bombus flavifrons     Ceanothus sp.
## 33  Bombus rufocinctus     Ceanothus sp.
## 34       Bombus mixtus     Ceanothus sp.
## 35       Bombus mixtus     Ceanothus sp.
## 88     Bombus fervidus  Camassia quamash
## 102    Bombus fervidus         Vicia sp.</code></pre>
<p>There are a lot of blank rows from associated taxa for individuals not caught on a flower. We cannot do anything with those so we will just drop them.</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="ecological-networks.html#cb37-1" tabindex="-1"></a>bumbles <span class="ot">&lt;-</span> bumbles[bumbles<span class="sc">$</span>PlantGenusSpecies <span class="sc">!=</span> <span class="st">&quot;&quot;</span>,]</span>
<span id="cb37-2"><a href="ecological-networks.html#cb37-2" tabindex="-1"></a><span class="fu">sort</span>(<span class="fu">unique</span>(bumbles<span class="sc">$</span>PlantGenusSpecies))</span></code></pre></div>
<pre><code>##   [1] &quot;Acer circinatum&quot;                                                                                                                                                                         
##   [2] &quot;Acer macrophyllum&quot;                                                                                                                                                                       
##   [3] &quot;Achillea millefolium&quot;                                                                                                                                                                    
##   [4] &quot;Achillea sp.&quot;                                                                                                                                                                            
##   [5] &quot;Aesculus hippocastanum&quot;                                                                                                                                                                  
##   [6] &quot;Agastache sp.&quot;                                                                                                                                                                           
##   [7] &quot;Agastache urticifolia&quot;                                                                                                                                                                   
##   [8] &quot;Alcea biennis&quot;                                                                                                                                                                           
##   [9] &quot;Alcea rosea&quot;                                                                                                                                                                             
##  [10] &quot;Allium amplectens&quot;                                                                                                                                                                       
##  [11] &quot;Amelanchier alnifolia&quot;                                                                                                                                                                   
##  [12] &quot;Amsinckia menziesii&quot;                                                                                                                                                                     
##  [13] &quot;Angelica arguta&quot;                                                                                                                                                                         
##  [14] &quot;Apocynum sp.&quot;                                                                                                                                                                            
##  [15] &quot;Aquilegia formosa&quot;                                                                                                                                                                       
##  [16] &quot;Aquilegia sp.&quot;                                                                                                                                                                           
##  [17] &quot;Arctostaphylos densiflora&quot;                                                                                                                                                               
##  [18] &quot;Arnica cordifolia&quot;                                                                                                                                                                       
##  [19] &quot;Artemisia tridentata (tall sagebrush)&quot;                                                                                                                                                   
##  [20] &quot;Asclepias or Euphorbia spp.&quot;                                                                                                                                                             
##  [21] &quot;Asclepias speciosa&quot;                                                                                                                                                                      
##  [22] &quot;Asparagus officinalis&quot;                                                                                                                                                                   
##  [23] &quot;Aster foliaceus&quot;                                                                                                                                                                         
##  [24] &quot;Asteraceae&quot;                                                                                                                                                                              
##  [25] &quot;Astragalus filipes&quot;                                                                                                                                                                      
##  [26] &quot;Balsamorhiza sp.&quot;                                                                                                                                                                        
##  [27] &quot;Bellardia viscosa&quot;                                                                                                                                                                       
##  [28] &quot;Bellis perennis&quot;                                                                                                                                                                         
##  [29] &quot;Bellis sp.&quot;                                                                                                                                                                              
##  [30] &quot;Berberis aquifolium&quot;                                                                                                                                                                     
##  [31] &quot;Betula sp.&quot;                                                                                                                                                                              
##  [32] &quot;Boraginales&quot;                                                                                                                                                                             
##  [33] &quot;Borago officinalis&quot;                                                                                                                                                                      
##  [34] &quot;Brassica oleracea italica&quot;                                                                                                                                                               
##  [35] &quot;Brassica rapa&quot;                                                                                                                                                                           
##  [36] &quot;Brassica sp.&quot;                                                                                                                                                                            
##  [37] &quot;Calochortus mariposa&quot;                                                                                                                                                                    
##  [38] &quot;Calystegia soldanella&quot;                                                                                                                                                                   
##  [39] &quot;Camassia quamash&quot;                                                                                                                                                                        
##  [40] &quot;Camassia sp.&quot;                                                                                                                                                                            
##  [41] &quot;Castanea sp.&quot;                                                                                                                                                                            
##  [42] &quot;Catalpa sp.&quot;                                                                                                                                                                             
##  [43] &quot;Ceanothus cuneatus&quot;                                                                                                                                                                      
##  [44] &quot;Ceanothus sp.&quot;                                                                                                                                                                           
##  [45] &quot;Ceanothus thyrsiflorus&quot;                                                                                                                                                                  
##  [46] &quot;Ceanothus velutinus&quot;                                                                                                                                                                     
##  [47] &quot;Centaurea cyanus&quot;                                                                                                                                                                        
##  [48] &quot;Centaurea maculosa&quot;                                                                                                                                                                      
##  [49] &quot;Centaurea sp.&quot;                                                                                                                                                                           
##  [50] &quot;Chamaenerion angustifolium&quot;                                                                                                                                                              
##  [51] &quot;Chrysolepis chrysophylla&quot;                                                                                                                                                                
##  [52] &quot;Chrysothamnus nauseosus&quot;                                                                                                                                                                 
##  [53] &quot;Cirsium (thistle), Tanacetum vulgare (common tansy)&quot;                                                                                                                                     
##  [54] &quot;Cirsium arvense&quot;                                                                                                                                                                         
##  [55] &quot;Cirsium sp.&quot;                                                                                                                                                                             
##  [56] &quot;Cirsium vulgare&quot;                                                                                                                                                                         
##  [57] &quot;Clarkia amoena&quot;                                                                                                                                                                          
##  [58] &quot;Cleome serrulata&quot;                                                                                                                                                                        
##  [59] &quot;Coreopsis sp.&quot;                                                                                                                                                                           
##  [60] &quot;Crataegus&quot;                                                                                                                                                                               
##  [61] &quot;Cucurbita sp.&quot;                                                                                                                                                                           
##  [62] &quot;Cynoglossum officinale&quot;                                                                                                                                                                  
##  [63] &quot;Dahlia sp.&quot;                                                                                                                                                                              
##  [64] &quot;Daucus carota (Queen Anne\x92s lace), chicory, field bindweed, field pea and dandelion&quot;                                                                                                  
##  [65] &quot;Delphinium leucophaeum&quot;                                                                                                                                                                  
##  [66] &quot;Delphinium sp.&quot;                                                                                                                                                                          
##  [67] &quot;Delphinium trolliifolium&quot;                                                                                                                                                                
##  [68] &quot;Descurainia sophia (Flixweed)&quot;                                                                                                                                                           
##  [69] &quot;Dicentra formosa&quot;                                                                                                                                                                        
##  [70] &quot;Digitalis purpurea&quot;                                                                                                                                                                      
##  [71] &quot;Dipsacus fullonum&quot;                                                                                                                                                                       
##  [72] &quot;Dipsacus fullonum (common teasel), Cirsium&quot;                                                                                                                                              
##  [73] &quot;Echinacea sp.&quot;                                                                                                                                                                           
##  [74] &quot;Echinops sp.&quot;                                                                                                                                                                            
##  [75] &quot;Epilobium angustifolium&quot;                                                                                                                                                                 
##  [76] &quot;Epilobium sp.&quot;                                                                                                                                                                           
##  [77] &quot;Ericaceae&quot;                                                                                                                                                                               
##  [78] &quot;Ericameria linearifolia&quot;                                                                                                                                                                 
##  [79] &quot;Ericameria nauseosa&quot;                                                                                                                                                                     
##  [80] &quot;Ericameria sp.&quot;                                                                                                                                                                          
##  [81] &quot;Eriogonum glaucus&quot;                                                                                                                                                                       
##  [82] &quot;Eriogonum sp.&quot;                                                                                                                                                                           
##  [83] &quot;Eriophyllum confertiflorum&quot;                                                                                                                                                              
##  [84] &quot;Eriophyllum lanatum&quot;                                                                                                                                                                     
##  [85] &quot;Eriophyllum sp.&quot;                                                                                                                                                                         
##  [86] &quot;Eschscholzia californica&quot;                                                                                                                                                                
##  [87] &quot;Euonymus occidentalis&quot;                                                                                                                                                                   
##  [88] &quot;Euphorbia esula&quot;                                                                                                                                                                         
##  [89] &quot;Fagopyrum sp.&quot;                                                                                                                                                                           
##  [90] &quot;Fragaria chiloensis&quot;                                                                                                                                                                     
##  [91] &quot;Gaillardia sp.&quot;                                                                                                                                                                          
##  [92] &quot;Geranium oreganum&quot;                                                                                                                                                                       
##  [93] &quot;Geranium sp.&quot;                                                                                                                                                                            
##  [94] &quot;Gilia capitata&quot;                                                                                                                                                                          
##  [95] &quot;Grindelia stricta stricta&quot;                                                                                                                                                               
##  [96] &quot;Hackelia micrantha&quot;                                                                                                                                                                      
##  [97] &quot;Helenium autumnale&quot;                                                                                                                                                                      
##  [98] &quot;Helianthus annuus&quot;                                                                                                                                                                       
##  [99] &quot;Helianthus sp.&quot;                                                                                                                                                                          
## [100] &quot;Heliopsis helianthoides&quot;                                                                                                                                                                 
## [101] &quot;Heracleum maximum&quot;                                                                                                                                                                       
## [102] &quot;Heracleum sphondylium&quot;                                                                                                                                                                   
## [103] &quot;Heuchera sp.&quot;                                                                                                                                                                            
## [104] &quot;Holodiscus dumosus&quot;                                                                                                                                                                      
## [105] &quot;Horkelia fusca&quot;                                                                                                                                                                          
## [106] &quot;Hydrophyllum sp.&quot;                                                                                                                                                                        
## [107] &quot;Hypericum sp.&quot;                                                                                                                                                                           
## [108] &quot;Iliamna rivularis&quot;                                                                                                                                                                       
## [109] &quot;Kalmia polifolia&quot;                                                                                                                                                                        
## [110] &quot;Lathyrus hirsutus&quot;                                                                                                                                                                       
## [111] &quot;Lathyrus japonicus var. maritimus&quot;                                                                                                                                                       
## [112] &quot;Lavandula angustifolia&quot;                                                                                                                                                                  
## [113] &quot;Leucanthemum vulgare&quot;                                                                                                                                                                    
## [114] &quot;Leucanthemum vulgare, Iris tenax, Prunella vulgaris, Digitalis purpurea&quot;                                                                                                                 
## [115] &quot;Lithospermum ruderale&quot;                                                                                                                                                                   
## [116] &quot;Lonicera caerulea&quot;                                                                                                                                                                       
## [117] &quot;Lonicera involucrata&quot;                                                                                                                                                                    
## [118] &quot;Lupinus argenteus argenteus&quot;                                                                                                                                                             
## [119] &quot;Lupinus lepidus&quot;                                                                                                                                                                         
## [120] &quot;Lupinus littoralis&quot;                                                                                                                                                                      
## [121] &quot;Lupinus rivularis&quot;                                                                                                                                                                       
## [122] &quot;Lupinus sericeus (silky lupine)&quot;                                                                                                                                                         
## [123] &quot;Lupinus sp.&quot;                                                                                                                                                                             
## [124] &quot;Mahonia aquifolium&quot;                                                                                                                                                                      
## [125] &quot;Malus pumila &quot;                                                                                                                                                                           
## [126] &quot;Medicago sativa&quot;                                                                                                                                                                         
## [127] &quot;Melilotus alba (sweet clover) and thistle&quot;                                                                                                                                               
## [128] &quot;Melilotus albus&quot;                                                                                                                                                                         
## [129] &quot;Microseris nutans&quot;                                                                                                                                                                       
## [130] &quot;Mimulus guttatus&quot;                                                                                                                                                                        
## [131] &quot;Mimulus lewisii&quot;                                                                                                                                                                         
## [132] &quot;Mimulus sp.&quot;                                                                                                                                                                             
## [133] &quot;Monardella odoratissima&quot;                                                                                                                                                                 
## [134] &quot;Nepeta cataria&quot;                                                                                                                                                                          
## [135] &quot;Nepeta grandiflora&quot;                                                                                                                                                                      
## [136] &quot;Nepeta sp.&quot;                                                                                                                                                                              
## [137] &quot;Net&quot;                                                                                                                                                                                     
## [138] &quot;Oenanthe sarmentosa&quot;                                                                                                                                                                     
## [139] &quot;Oenothera biennis&quot;                                                                                                                                                                       
## [140] &quot;Origanum vulgare&quot;                                                                                                                                                                        
## [141] &quot;Penstemon deustus&quot;                                                                                                                                                                       
## [142] &quot;Penstemon ovatus&quot;                                                                                                                                                                        
## [143] &quot;Penstemon procerus&quot;                                                                                                                                                                      
## [144] &quot;Penstemon sp.&quot;                                                                                                                                                                           
## [145] &quot;Penstemon spectabilis&quot;                                                                                                                                                                   
## [146] &quot;Perovskia atriplicifolia&quot;                                                                                                                                                                
## [147] &quot;Phacelia hastata&quot;                                                                                                                                                                        
## [148] &quot;Phacelia heterophylla&quot;                                                                                                                                                                   
## [149] &quot;Phacelia sp.&quot;                                                                                                                                                                            
## [150] &quot;Phacelia tanacetifolia&quot;                                                                                                                                                                  
## [151] &quot;Physocarpus capitatus&quot;                                                                                                                                                                   
## [152] &quot;Physocarpus capitatus (pacific ninebark)&quot;                                                                                                                                                
## [153] &quot;Physocarpus sp.&quot;                                                                                                                                                                         
## [154] &quot;Plagiobothrys figuratus&quot;                                                                                                                                                                 
## [155] &quot;Poison hemlock and Steens Mtn thistle&quot;                                                                                                                                                   
## [156] &quot;Potentilla gracilis&quot;                                                                                                                                                                     
## [157] &quot;Prunella vulgaris&quot;                                                                                                                                                                       
## [158] &quot;Prunella vulgaris (self-heal)&quot;                                                                                                                                                           
## [159] &quot;Prunus avium&quot;                                                                                                                                                                            
## [160] &quot;Prunus laurocerasus&quot;                                                                                                                                                                     
## [161] &quot;Purple monkey flower, wyethia, yarrow, epilobium&quot;                                                                                                                                        
## [162] &quot;Ranunculus occidentalis&quot;                                                                                                                                                                 
## [163] &quot;Raphanus sativus&quot;                                                                                                                                                                        
## [164] &quot;Raphanus sp.&quot;                                                                                                                                                                            
## [165] &quot;Rhododendron macrophyllum&quot;                                                                                                                                                               
## [166] &quot;Rhododendron maximum&quot;                                                                                                                                                                    
## [167] &quot;Rhododendron sp.&quot;                                                                                                                                                                        
## [168] &quot;Rhododendron x&quot;                                                                                                                                                                          
## [169] &quot;Ribes aureum&quot;                                                                                                                                                                            
## [170] &quot;Ribes cereum&quot;                                                                                                                                                                            
## [171] &quot;Ribes cereum (wax currant)&quot;                                                                                                                                                              
## [172] &quot;Ribes rubrum&quot;                                                                                                                                                                            
## [173] &quot;Ribes sanguineum&quot;                                                                                                                                                                        
## [174] &quot;Robinia pseudoacacia&quot;                                                                                                                                                                    
## [175] &quot;Rosa gymnocarpa&quot;                                                                                                                                                                         
## [176] &quot;Rosa nutkana&quot;                                                                                                                                                                            
## [177] &quot;Rosa nutkana (Nootka rose)&quot;                                                                                                                                                              
## [178] &quot;Rosa sp.&quot;                                                                                                                                                                                
## [179] &quot;Rosa woodsii&quot;                                                                                                                                                                            
## [180] &quot;Rosaceae&quot;                                                                                                                                                                                
## [181] &quot;Rosmarinus officinalis&quot;                                                                                                                                                                  
## [182] &quot;Rubus armeniacus&quot;                                                                                                                                                                        
## [183] &quot;Rubus bifrons&quot;                                                                                                                                                                           
## [184] &quot;Rubus discolor (Himalayan blackberry)&quot;                                                                                                                                                   
## [185] &quot;Rubus fruticosus&quot;                                                                                                                                                                        
## [186] &quot;Rubus idaeus&quot;                                                                                                                                                                            
## [187] &quot;Rubus parviflorus&quot;                                                                                                                                                                       
## [188] &quot;Rubus parviflorus (Thimbleberry)&quot;                                                                                                                                                        
## [189] &quot;Rubus sp.&quot;                                                                                                                                                                               
## [190] &quot;Rubus ursinus&quot;                                                                                                                                                                           
## [191] &quot;Salix lasiandra&quot;                                                                                                                                                                         
## [192] &quot;Salvia officinalis&quot;                                                                                                                                                                      
## [193] &quot;Salvia pratensis&quot;                                                                                                                                                                        
## [194] &quot;Scutellaria integrifolia&quot;                                                                                                                                                                
## [195] &quot;Senecio hydrophilus&quot;                                                                                                                                                                     
## [196] &quot;Senecio sp.&quot;                                                                                                                                                                             
## [197] &quot;Sidalacea campestris (field checker mallow), Eschscholzia californica (California poppy), Clarkia amoena (farewell to spring), tarweed&quot;                                                  
## [198] &quot;Sidalcea campestris&quot;                                                                                                                                                                     
## [199] &quot;Sidalcea nelsoniana&quot;                                                                                                                                                                     
## [200] &quot;Sidalcea oregana&quot;                                                                                                                                                                        
## [201] &quot;Sidalcea sp.&quot;                                                                                                                                                                            
## [202] &quot;Solanum sp.&quot;                                                                                                                                                                             
## [203] &quot;Solidago canadensis&quot;                                                                                                                                                                     
## [204] &quot;Solidago elongata&quot;                                                                                                                                                                       
## [205] &quot;Solidago sp.&quot;                                                                                                                                                                            
## [206] &quot;Sorbus aucuparia&quot;                                                                                                                                                                        
## [207] &quot;Sphenosciadium capitellatum (swamp white heads), Aster occidentalis, Ca hellebore&quot;                                                                                                       
## [208] &quot;Spiraea douglasii&quot;                                                                                                                                                                       
## [209] &quot;Spiraea japonica&quot;                                                                                                                                                                        
## [210] &quot;Spiraea sp.&quot;                                                                                                                                                                             
## [211] &quot;Stachys byzantina&quot;                                                                                                                                                                       
## [212] &quot;Stachys chamissonis&quot;                                                                                                                                                                     
## [213] &quot;Styrax japonicus&quot;                                                                                                                                                                        
## [214] &quot;Symphoricarpos alba (snowberry)&quot;                                                                                                                                                         
## [215] &quot;Symphoricarpos albus&quot;                                                                                                                                                                    
## [216] &quot;Symphoricarpos rotundifolius&quot;                                                                                                                                                            
## [217] &quot;Symphoricarpos sp.&quot;                                                                                                                                                                      
## [218] &quot;Symphytum sp.&quot;                                                                                                                                                                           
## [219] &quot;Syringa sp.&quot;                                                                                                                                                                             
## [220] &quot;Tanacetum vulgare (common tansy), Epilobium densiflorum (dense-flowered willowherb), Epilobium brachycarpum (tall annual willowherb), Grindelia integrifolia (Willamette valley gumweed)&quot;
## [221] &quot;Taraxacum officinale&quot;                                                                                                                                                                    
## [222] &quot;Tellima grandiflora&quot;                                                                                                                                                                     
## [223] &quot;Thelypodium sp.&quot;                                                                                                                                                                         
## [224] &quot;Thermopsis rhombifolia&quot;                                                                                                                                                                  
## [225] &quot;Tithonia sp.&quot;                                                                                                                                                                            
## [226] &quot;Tonella floribunda&quot;                                                                                                                                                                      
## [227] &quot;Tradescantia sp.&quot;                                                                                                                                                                        
## [228] &quot;Trifolium incarnatum&quot;                                                                                                                                                                    
## [229] &quot;Trifolium sp.&quot;                                                                                                                                                                           
## [230] &quot;Vaccinium ovatum&quot;                                                                                                                                                                        
## [231] &quot;Vaccinium sp.&quot;                                                                                                                                                                           
## [232] &quot;Verbascum thapsus&quot;                                                                                                                                                                       
## [233] &quot;Veronica scutellata&quot;                                                                                                                                                                     
## [234] &quot;Viburnum davidii&quot;                                                                                                                                                                        
## [235] &quot;Vicia americana&quot;                                                                                                                                                                         
## [236] &quot;Vicia cracca&quot;                                                                                                                                                                            
## [237] &quot;Vicia cracca (tufted vetch)&quot;                                                                                                                                                             
## [238] &quot;Vicia sativa&quot;                                                                                                                                                                            
## [239] &quot;Vicia sp.&quot;                                                                                                                                                                               
## [240] &quot;Vicia villosa&quot;                                                                                                                                                                           
## [241] &quot;Whipplea modesta&quot;                                                                                                                                                                        
## [242] &quot;Wisteria sp.&quot;                                                                                                                                                                            
## [243] &quot;Wyethia amplexicaulis&quot;                                                                                                                                                                   
## [244] &quot;Wyethia angustifolia&quot;                                                                                                                                                                    
## [245] &quot;Wyethia mollis&quot;                                                                                                                                                                          
## [246] &quot;Wyethia sp.&quot;</code></pre>
<p>Ugg, there are a lot of weird name add ones that will cause inconsistencies when we make the network because any unique name will be considered a unique node. Next week we will learn how to clean these out using regular expressions. For these week we will just drop them…</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="ecological-networks.html#cb39-1" tabindex="-1"></a>really.bad.plant.name <span class="ot">&lt;-</span> <span class="st">&quot;Daucus carota (Queen Anne</span><span class="sc">\x92</span><span class="st">s lace), chicory, field bindweed, field pea and dandelion&quot;</span></span>
<span id="cb39-2"><a href="ecological-networks.html#cb39-2" tabindex="-1"></a>bumbles <span class="ot">&lt;-</span> bumbles[bumbles<span class="sc">$</span>PlantGenusSpecies <span class="sc">!=</span> really.bad.plant.name,]</span>
<span id="cb39-3"><a href="ecological-networks.html#cb39-3" tabindex="-1"></a>bad.plant.names <span class="ot">&lt;-</span> <span class="fu">grepl</span>(<span class="st">&quot;</span><span class="sc">\\</span><span class="st">(|,&quot;</span>, bumbles<span class="sc">$</span>PlantGenusSpecies)</span>
<span id="cb39-4"><a href="ecological-networks.html#cb39-4" tabindex="-1"></a></span>
<span id="cb39-5"><a href="ecological-networks.html#cb39-5" tabindex="-1"></a>bumbles <span class="ot">&lt;-</span> bumbles[<span class="sc">!</span>bad.plant.names,]</span></code></pre></div>
<p>We can explore the species in our network. These will be the vertices.</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="ecological-networks.html#cb40-1" tabindex="-1"></a><span class="fu">table</span>(bumbles<span class="sc">$</span>GenusSpecies)</span></code></pre></div>
<pre><code>## 
##               Bombus       Bombus appositus       Bombus bifarius 
##                     1                     6                    93 
##    Bombus caliginosus      Bombus centralis       Bombus fervidus 
##                    44                    80                    78 
##       Bombus flavidus     Bombus flavifrons   Bombus griseocollis 
##                     2                    47                    29 
##         Bombus huntii      Bombus insularis    Bombus melanopygus 
##                    56                     5                    47 
##         Bombus mixtus      Bombus morrisoni     Bombus nevadensis 
##                   119                    16                    15 
##   Bombus occidentalis    Bombus rufocinctus      Bombus sitkensis 
##                     4                    15                     3 
##      Bombus sylvicola         Bombus vagans Bombus vancouverensis 
##                     1                     1                     5 
##       Bombus vandykei   Bombus vosnesenskii 
##                    40                   264</code></pre>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="ecological-networks.html#cb42-1" tabindex="-1"></a><span class="fu">table</span>(bumbles<span class="sc">$</span>PlantGenusSpecies)</span></code></pre></div>
<pre><code>## 
##                       Acer circinatum                     Acer macrophyllum 
##                                     1                                     1 
##                  Achillea millefolium                          Achillea sp. 
##                                     6                                     2 
##                Aesculus hippocastanum                         Agastache sp. 
##                                     2                                     5 
##                 Agastache urticifolia                         Alcea biennis 
##                                     1                                     1 
##                           Alcea rosea                     Allium amplectens 
##                                     3                                     1 
##                 Amelanchier alnifolia                   Amsinckia menziesii 
##                                     1                                     2 
##                       Angelica arguta                          Apocynum sp. 
##                                     1                                     1 
##                     Aquilegia formosa                         Aquilegia sp. 
##                                     2                                     2 
##             Arctostaphylos densiflora                     Arnica cordifolia 
##                                     2                                     1 
##           Asclepias or Euphorbia spp.                    Asclepias speciosa 
##                                     1                                     6 
##                 Asparagus officinalis                       Aster foliaceus 
##                                     2                                     1 
##                            Asteraceae                    Astragalus filipes 
##                                     3                                     1 
##                      Balsamorhiza sp.                     Bellardia viscosa 
##                                     1                                     2 
##                       Bellis perennis                            Bellis sp. 
##                                     1                                     3 
##                   Berberis aquifolium                            Betula sp. 
##                                     5                                     1 
##                           Boraginales                    Borago officinalis 
##                                     1                                     1 
##             Brassica oleracea italica                         Brassica rapa 
##                                     1                                     4 
##                          Brassica sp.                  Calochortus mariposa 
##                                     2                                     1 
##                 Calystegia soldanella                      Camassia quamash 
##                                     3                                     1 
##                          Camassia sp.                          Castanea sp. 
##                                     5                                     1 
##                           Catalpa sp.                    Ceanothus cuneatus 
##                                     1                                     1 
##                         Ceanothus sp.                Ceanothus thyrsiflorus 
##                                    16                                    28 
##                   Ceanothus velutinus                      Centaurea cyanus 
##                                    10                                     2 
##                    Centaurea maculosa                         Centaurea sp. 
##                                     2                                     2 
##            Chamaenerion angustifolium              Chrysolepis chrysophylla 
##                                    15                                     2 
##               Chrysothamnus nauseosus                       Cirsium arvense 
##                                     8                                     7 
##                           Cirsium sp.                       Cirsium vulgare 
##                                     3                                     5 
##                        Clarkia amoena                      Cleome serrulata 
##                                     2                                     5 
##                         Coreopsis sp.                             Crataegus 
##                                     1                                     1 
##                         Cucurbita sp.                Cynoglossum officinale 
##                                     1                                     2 
##                            Dahlia sp.                Delphinium leucophaeum 
##                                     1                                     2 
##                        Delphinium sp.              Delphinium trolliifolium 
##                                     6                                     3 
##                      Dicentra formosa                    Digitalis purpurea 
##                                     1                                     4 
##                     Dipsacus fullonum                         Echinacea sp. 
##                                     8                                     1 
##                          Echinops sp.               Epilobium angustifolium 
##                                     3                                     3 
##                         Epilobium sp.                             Ericaceae 
##                                     1                                     1 
##               Ericameria linearifolia                   Ericameria nauseosa 
##                                    30                                    12 
##                        Ericameria sp.                     Eriogonum glaucus 
##                                     7                                     1 
##                         Eriogonum sp.            Eriophyllum confertiflorum 
##                                     1                                     1 
##                   Eriophyllum lanatum                       Eriophyllum sp. 
##                                     1                                     1 
##              Eschscholzia californica                 Euonymus occidentalis 
##                                    22                                     5 
##                       Euphorbia esula                         Fagopyrum sp. 
##                                     1                                     1 
##                   Fragaria chiloensis                        Gaillardia sp. 
##                                     3                                     7 
##                     Geranium oreganum                          Geranium sp. 
##                                     3                                     8 
##                        Gilia capitata             Grindelia stricta stricta 
##                                     1                                    17 
##                    Hackelia micrantha                    Helenium autumnale 
##                                     4                                     1 
##                     Helianthus annuus                        Helianthus sp. 
##                                     5                                     1 
##               Heliopsis helianthoides                     Heracleum maximum 
##                                     1                                     3 
##                 Heracleum sphondylium                          Heuchera sp. 
##                                     1                                     4 
##                    Holodiscus dumosus                        Horkelia fusca 
##                                     2                                     1 
##                      Hydrophyllum sp.                         Hypericum sp. 
##                                     1                                     1 
##                     Iliamna rivularis                      Kalmia polifolia 
##                                     1                                     1 
##                     Lathyrus hirsutus     Lathyrus japonicus var. maritimus 
##                                     1                                     2 
##                Lavandula angustifolia                  Leucanthemum vulgare 
##                                     6                                     1 
##                 Lithospermum ruderale                     Lonicera caerulea 
##                                     5                                     3 
##                  Lonicera involucrata           Lupinus argenteus argenteus 
##                                     3                                     1 
##                       Lupinus lepidus                    Lupinus littoralis 
##                                     9                                     6 
##                     Lupinus rivularis                           Lupinus sp. 
##                                     4                                    13 
##                    Mahonia aquifolium                         Malus pumila  
##                                     2                                     4 
##                       Medicago sativa                       Melilotus albus 
##                                     1                                     2 
##                     Microseris nutans                      Mimulus guttatus 
##                                     1                                     1 
##                       Mimulus lewisii                           Mimulus sp. 
##                                     4                                     6 
##               Monardella odoratissima                        Nepeta cataria 
##                                     4                                     9 
##                    Nepeta grandiflora                            Nepeta sp. 
##                                     6                                    12 
##                                   Net                   Oenanthe sarmentosa 
##                                     1                                     1 
##                     Oenothera biennis                      Origanum vulgare 
##                                     1                                     1 
##                     Penstemon deustus                      Penstemon ovatus 
##                                    15                                     1 
##                    Penstemon procerus                         Penstemon sp. 
##                                     9                                     3 
##                 Penstemon spectabilis              Perovskia atriplicifolia 
##                                     3                                     9 
##                      Phacelia hastata                 Phacelia heterophylla 
##                                    17                                     3 
##                          Phacelia sp.                Phacelia tanacetifolia 
##                                    20                                    15 
##                 Physocarpus capitatus                       Physocarpus sp. 
##                                     1                                     4 
##               Plagiobothrys figuratus Poison hemlock and Steens Mtn thistle 
##                                     2                                     2 
##                   Potentilla gracilis                     Prunella vulgaris 
##                                     1                                     3 
##                          Prunus avium                   Prunus laurocerasus 
##                                     1                                     1 
##               Ranunculus occidentalis                      Raphanus sativus 
##                                     2                                     1 
##                          Raphanus sp.             Rhododendron macrophyllum 
##                                    11                                     9 
##                  Rhododendron maximum                      Rhododendron sp. 
##                                     5                                     1 
##                        Rhododendron x                          Ribes aureum 
##                                     6                                     1 
##                          Ribes cereum                          Ribes rubrum 
##                                     8                                     1 
##                      Ribes sanguineum                  Robinia pseudoacacia 
##                                     1                                     9 
##                       Rosa gymnocarpa                          Rosa nutkana 
##                                     1                                     2 
##                              Rosa sp.                          Rosa woodsii 
##                                    13                                    17 
##                              Rosaceae                Rosmarinus officinalis 
##                                     2                                     1 
##                      Rubus armeniacus                         Rubus bifrons 
##                                     9                                    13 
##                      Rubus fruticosus                          Rubus idaeus 
##                                     2                                     9 
##                     Rubus parviflorus                             Rubus sp. 
##                                     7                                     5 
##                         Rubus ursinus                       Salix lasiandra 
##                                     4                                     1 
##                    Salvia officinalis                      Salvia pratensis 
##                                     1                                     2 
##              Scutellaria integrifolia                   Senecio hydrophilus 
##                                     2                                     2 
##                           Senecio sp.                   Sidalcea campestris 
##                                     4                                     3 
##                   Sidalcea nelsoniana                      Sidalcea oregana 
##                                     3                                     7 
##                          Sidalcea sp.                           Solanum sp. 
##                                     3                                     1 
##                   Solidago canadensis                     Solidago elongata 
##                                    10                                     2 
##                          Solidago sp.                      Sorbus aucuparia 
##                                     2                                     1 
##                     Spiraea douglasii                      Spiraea japonica 
##                                    15                                     2 
##                           Spiraea sp.                     Stachys byzantina 
##                                    22                                     3 
##                   Stachys chamissonis                      Styrax japonicus 
##                                     2                                    10 
##                  Symphoricarpos albus          Symphoricarpos rotundifolius 
##                                    26                                     5 
##                    Symphoricarpos sp.                         Symphytum sp. 
##                                     6                                     1 
##                           Syringa sp.                  Taraxacum officinale 
##                                     2                                     2 
##                   Tellima grandiflora                       Thelypodium sp. 
##                                     6                                     6 
##                Thermopsis rhombifolia                          Tithonia sp. 
##                                     7                                     2 
##                    Tonella floribunda                      Tradescantia sp. 
##                                     4                                     1 
##                  Trifolium incarnatum                         Trifolium sp. 
##                                     3                                     3 
##                      Vaccinium ovatum                         Vaccinium sp. 
##                                     5                                     3 
##                     Verbascum thapsus                   Veronica scutellata 
##                                     1                                     1 
##                      Viburnum davidii                       Vicia americana 
##                                     1                                     4 
##                          Vicia cracca                          Vicia sativa 
##                                     3                                     4 
##                             Vicia sp.                         Vicia villosa 
##                                    20                                     2 
##                      Whipplea modesta                          Wisteria sp. 
##                                     2                                     2 
##                 Wyethia amplexicaulis                  Wyethia angustifolia 
##                                     2                                     1 
##                        Wyethia mollis                           Wyethia sp. 
##                                     1                                     8</code></pre>
<p>We have a variety of options for converting of data (which is basically an edge list) into a graph. One is to sum up our interactions but bee-plant combinations to make an bipartite adjacency matrix. Then convert that matrix to a igraph object.</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="ecological-networks.html#cb44-1" tabindex="-1"></a><span class="do">### 1. sum up interactions and take a look</span></span>
<span id="cb44-2"><a href="ecological-networks.html#cb44-2" tabindex="-1"></a>bumbles_adj <span class="ot">&lt;-</span> <span class="fu">table</span>(bumbles)</span>
<span id="cb44-3"><a href="ecological-networks.html#cb44-3" tabindex="-1"></a><span class="do">### write to a file</span></span>
<span id="cb44-4"><a href="ecological-networks.html#cb44-4" tabindex="-1"></a><span class="fu">save</span>(bumbles_adj, <span class="at">file=</span><span class="st">&quot;bumbles_adj_mat.Rdata&quot;</span>)</span>
<span id="cb44-5"><a href="ecological-networks.html#cb44-5" tabindex="-1"></a><span class="fu">dim</span>(bumbles_adj)</span></code></pre></div>
<pre><code>## [1]  23 226</code></pre>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="ecological-networks.html#cb46-1" tabindex="-1"></a>bumbles_adj[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>] </span></code></pre></div>
<pre><code>##                     PlantGenusSpecies
## GenusSpecies         Acer circinatum Acer macrophyllum Achillea millefolium
##   Bombus                           0                 0                    0
##   Bombus appositus                 0                 0                    0
##   Bombus bifarius                  0                 0                    1
##   Bombus caliginosus               0                 0                    0
##   Bombus centralis                 0                 0                    0
##                     PlantGenusSpecies
## GenusSpecies         Achillea sp. Aesculus hippocastanum
##   Bombus                        0                      0
##   Bombus appositus              0                      0
##   Bombus bifarius               0                      0
##   Bombus caliginosus            0                      2
##   Bombus centralis              0                      0</code></pre>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="ecological-networks.html#cb48-1" tabindex="-1"></a><span class="do">### 2. convert to igraph bipartite adjacency matrix </span></span>
<span id="cb48-2"><a href="ecological-networks.html#cb48-2" tabindex="-1"></a>g_bumbles <span class="ot">&lt;-</span> <span class="fu">graph_from_biadjacency_matrix</span>(bumbles_adj, </span>
<span id="cb48-3"><a href="ecological-networks.html#cb48-3" tabindex="-1"></a>                                           <span class="at">weighted =</span><span class="cn">TRUE</span>) </span>
<span id="cb48-4"><a href="ecological-networks.html#cb48-4" tabindex="-1"></a>g_bumbles</span></code></pre></div>
<pre><code>## IGRAPH 63f05d6 UNWB 249 481 -- 
## + attr: type (v/l), name (v/c), weight (e/n)
## + edges from 63f05d6 (vertex names):
##  [1] Bombus          --Styrax japonicus     
##  [2] Bombus appositus--Bellardia viscosa    
##  [3] Bombus appositus--Rubus armeniacus     
##  [4] Bombus appositus--Rubus parviflorus    
##  [5] Bombus appositus--Symphoricarpos albus 
##  [6] Bombus appositus--Wyethia angustifolia 
##  [7] Bombus bifarius --Achillea millefolium 
##  [8] Bombus bifarius --Agastache urticifolia
## + ... omitted several edges</code></pre>
<p>To use the ‘forceNetwork’ function we did for Le Mis, we need to convert our graph into a dataframe. Luckily there is a function ‘igraph_to_networkD3’ to convert from graph objects to what the network3d package wants. That function also wants a each vertex assigned to a group. We have a variety of options on how to assign groups, one is to look for modules or compartments in the network.</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="ecological-networks.html#cb50-1" tabindex="-1"></a><span class="do">### find modules</span></span>
<span id="cb50-2"><a href="ecological-networks.html#cb50-2" tabindex="-1"></a>mod_bumbles <span class="ot">&lt;-</span> <span class="fu">cluster_walktrap</span>(g_bumbles)</span>
<span id="cb50-3"><a href="ecological-networks.html#cb50-3" tabindex="-1"></a><span class="do">### assign vertices to modules</span></span>
<span id="cb50-4"><a href="ecological-networks.html#cb50-4" tabindex="-1"></a>groups <span class="ot">&lt;-</span> <span class="fu">membership</span>(mod_bumbles)</span>
<span id="cb50-5"><a href="ecological-networks.html#cb50-5" tabindex="-1"></a></span>
<span id="cb50-6"><a href="ecological-networks.html#cb50-6" tabindex="-1"></a><span class="do">### convert to a network 3d object</span></span>
<span id="cb50-7"><a href="ecological-networks.html#cb50-7" tabindex="-1"></a>g_bumbles_net3d <span class="ot">&lt;-</span> <span class="fu">igraph_to_networkD3</span>(g_bumbles, <span class="at">group=</span>groups, </span>
<span id="cb50-8"><a href="ecological-networks.html#cb50-8" tabindex="-1"></a>                                       <span class="at">what =</span> <span class="st">&quot;both&quot;</span>)</span>
<span id="cb50-9"><a href="ecological-networks.html#cb50-9" tabindex="-1"></a><span class="do">### plot the bumble-plant network</span></span>
<span id="cb50-10"><a href="ecological-networks.html#cb50-10" tabindex="-1"></a><span class="fu">forceNetwork</span>(<span class="at">Links =</span> g_bumbles_net3d<span class="sc">$</span>links,</span>
<span id="cb50-11"><a href="ecological-networks.html#cb50-11" tabindex="-1"></a>             <span class="at">Nodes =</span> g_bumbles_net3d<span class="sc">$</span>nodes,</span>
<span id="cb50-12"><a href="ecological-networks.html#cb50-12" tabindex="-1"></a>            <span class="at">Source =</span> <span class="st">&quot;source&quot;</span>, <span class="at">Target =</span> <span class="st">&quot;target&quot;</span>,</span>
<span id="cb50-13"><a href="ecological-networks.html#cb50-13" tabindex="-1"></a>            <span class="at">Value =</span> <span class="st">&quot;value&quot;</span>,  <span class="at">NodeID =</span> <span class="st">&quot;name&quot;</span>,</span>
<span id="cb50-14"><a href="ecological-networks.html#cb50-14" tabindex="-1"></a>             <span class="at">Group =</span> <span class="st">&quot;group&quot;</span>, </span>
<span id="cb50-15"><a href="ecological-networks.html#cb50-15" tabindex="-1"></a>            <span class="at">opacity =</span> <span class="fl">0.8</span>, <span class="at">zoom=</span><span class="cn">TRUE</span>, <span class="at">opacityNoHover =</span> <span class="fl">0.9</span>)</span></code></pre></div>
<div class="forceNetwork html-widget html-fill-item" id="htmlwidget-636dd6300104ca33ae03" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-636dd6300104ca33ae03">{"x":{"links":{"source":[12,22,22,2,12,3,5,22,2,21,4,22,22,22,3,2,8,12,22,8,5,22,2,22,8,5,3,22,2,2,4,21,1,5,22,22,12,4,15,9,22,12,22,12,9,12,22,12,3,2,5,11,5,11,4,12,12,9,12,16,3,12,22,7,11,17,11,12,3,22,22,9,2,4,22,21,13,4,20,22,2,4,12,3,22,2,22,4,22,2,5,9,5,5,14,9,13,22,8,13,8,22,9,4,22,5,7,14,21,5,5,22,5,12,22,12,5,7,22,21,22,9,4,3,22,22,15,2,22,9,9,22,13,9,22,20,12,7,22,22,12,11,22,12,22,2,10,22,12,22,4,11,12,22,2,21,4,16,3,22,11,5,12,12,4,2,11,8,22,9,22,22,7,17,7,11,22,3,13,22,2,4,3,4,11,5,5,22,7,21,22,5,21,4,4,5,22,12,2,2,22,22,12,5,12,22,3,12,4,2,9,22,21,12,22,11,9,22,21,10,12,2,9,2,4,16,2,18,13,22,8,11,9,5,22,7,12,11,22,16,7,5,12,3,22,16,7,14,4,19,5,7,12,2,7,22,2,9,2,12,21,22,9,22,2,21,4,12,2,3,7,22,21,9,4,13,8,12,22,3,12,12,8,3,22,2,5,2,3,5,7,22,16,17,11,22,8,5,22,3,3,22,8,11,7,12,12,11,22,7,3,12,11,22,22,21,9,3,3,7,4,14,12,11,5,21,12,22,13,3,12,22,9,14,4,16,5,22,22,11,3,1,12,22,22,11,12,12,12,2,6,1,22,12,15,7,16,11,12,3,6,7,12,22,13,5,5,2,10,4,2,22,7,22,5,2,4,10,5,12,2,12,22,4,8,10,20,20,11,22,11,8,9,13,2,12,9,12,22,14,22,16,12,0,12,22,7,16,1,7,22,5,12,11,4,5,2,14,4,7,2,16,11,22,13,11,22,5,13,9,22,5,13,9,22,2,12,4,22,14,9,2,22,5,11,22,3,22,12,5,22,5,14,21,5,22,3,9,21,3,21,5,9,8,14,3,9,22,22,16,11,8,4,2,1,4,22,5,7,4,11],"target":[23,24,25,25,26,27,28,28,29,30,31,32,33,34,34,35,36,37,37,38,38,39,40,41,42,42,43,43,44,45,46,47,48,48,49,50,50,51,51,51,51,51,52,53,54,55,56,56,57,58,59,59,60,61,61,61,62,63,64,65,65,65,65,65,65,66,66,66,66,66,67,67,67,68,68,69,69,70,71,71,71,71,71,71,72,72,73,74,74,74,75,76,76,77,77,78,78,78,78,79,80,81,82,82,83,84,84,85,85,85,86,87,88,88,89,89,89,89,90,91,91,91,92,92,93,94,95,95,95,95,96,96,96,97,97,98,99,100,101,102,103,103,103,104,104,105,106,107,107,108,108,109,109,110,110,110,110,111,112,112,112,112,112,113,113,113,114,115,115,115,116,117,118,118,119,120,120,120,121,121,122,123,124,125,126,127,128,128,129,129,129,130,131,131,132,132,132,133,134,135,135,136,136,137,137,137,138,138,138,138,138,139,139,140,140,140,141,142,142,143,144,145,145,146,146,147,147,147,148,148,148,148,148,148,149,149,150,150,150,150,150,151,152,153,154,155,155,155,155,155,155,156,157,157,157,158,158,158,159,159,160,160,161,161,161,161,161,161,162,162,163,163,163,163,163,164,164,164,164,164,165,166,166,166,167,168,168,169,170,170,170,171,172,173,173,174,175,175,175,175,176,176,176,176,176,176,177,177,178,179,179,179,179,180,181,181,181,182,183,184,184,184,185,186,186,187,187,187,187,187,188,188,188,188,188,188,189,189,190,191,191,191,191,191,192,192,192,193,194,194,194,195,195,195,195,196,196,196,196,196,197,197,197,198,199,200,201,202,202,203,203,204,205,205,206,206,206,206,207,207,208,209,209,209,209,210,210,211,212,213,213,213,213,213,213,214,215,215,215,216,216,216,217,218,218,218,218,218,219,219,219,219,219,219,220,220,220,220,221,221,221,222,223,224,224,225,225,225,226,226,226,227,227,227,228,229,229,229,230,231,231,232,232,232,233,233,233,234,234,235,236,237,238,238,238,239,239,240,240,240,241,241,241,241,241,241,242,242,243,243,244,244,245,245,246,247,248,248,248,248,248],"value":[1,1,5,1,2,2,2,3,1,1,3,1,1,1,1,1,1,1,1,1,1,2,1,1,5,1,1,1,1,3,1,1,1,1,1,2,1,1,1,1,1,1,1,1,1,1,2,2,2,1,2,1,1,1,1,3,1,1,1,1,2,3,5,1,4,1,5,8,4,10,8,1,1,1,1,1,1,2,1,1,3,6,3,1,1,1,8,2,1,4,3,3,2,1,1,1,1,1,2,1,1,1,1,1,1,1,1,2,1,3,3,1,2,2,2,1,1,4,1,1,1,1,2,1,1,1,2,24,3,1,7,3,2,4,3,1,1,1,1,1,1,1,20,1,4,1,1,1,2,5,2,2,1,1,2,1,4,1,1,2,1,4,9,1,1,2,1,1,3,1,1,1,2,1,1,1,1,2,1,1,1,1,1,1,1,1,1,1,1,3,2,1,1,4,1,1,1,3,1,5,4,5,1,1,2,1,4,2,3,3,1,1,1,2,1,1,1,1,1,1,1,3,1,2,4,2,1,1,2,1,1,1,2,2,1,5,2,1,4,1,4,1,1,1,1,1,5,2,2,1,4,1,3,5,1,1,1,1,2,1,6,3,1,1,1,11,1,2,1,2,1,2,4,1,12,2,9,1,2,1,1,2,1,1,2,1,1,1,1,1,1,1,1,1,1,1,1,6,3,1,1,3,1,2,1,1,2,3,1,3,1,1,1,1,4,1,3,1,1,4,2,3,1,1,1,1,1,9,1,1,1,1,3,1,8,3,1,1,1,3,1,1,3,1,6,4,3,2,6,2,1,1,1,4,1,1,1,1,1,1,1,1,2,1,1,2,2,1,1,1,3,3,1,2,1,3,2,1,1,2,1,1,7,1,1,1,1,2,1,7,1,2,3,1,1,2,2,3,17,1,1,1,2,1,2,2,4,1,2,1,16,1,4,2,1,1,2,1,3,1,2,1,2,1,1,1,4,1,1,3,2,4,1,2,2,1,1,2,1,2,1,1,1,1,1,1,3,1,2,1,1,1,1,1,2,1,2,2,1,1,3,8,5,1,1,2,1,1,1,1,1,1,1,1,1,1,2,2,1,2,1],"colour":["#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666"]},"nodes":{"name":["Bombus ","Bombus appositus","Bombus bifarius","Bombus caliginosus","Bombus centralis","Bombus fervidus","Bombus flavidus","Bombus flavifrons","Bombus griseocollis","Bombus huntii","Bombus insularis","Bombus melanopygus","Bombus mixtus","Bombus morrisoni","Bombus nevadensis","Bombus occidentalis","Bombus rufocinctus","Bombus sitkensis","Bombus sylvicola","Bombus vagans","Bombus vancouverensis","Bombus vandykei","Bombus vosnesenskii","Acer circinatum","Acer macrophyllum","Achillea millefolium","Achillea sp.","Aesculus hippocastanum","Agastache sp.","Agastache urticifolia","Alcea biennis","Alcea rosea","Allium amplectens","Amelanchier alnifolia","Amsinckia menziesii","Angelica arguta","Apocynum sp.","Aquilegia formosa","Aquilegia sp.","Arctostaphylos densiflora","Arnica cordifolia","Asclepias or Euphorbia spp.","Asclepias speciosa","Asparagus officinalis","Aster foliaceus","Asteraceae","Astragalus filipes","Balsamorhiza sp.","Bellardia viscosa","Bellis perennis","Bellis sp.","Berberis aquifolium","Betula sp.","Boraginales","Borago officinalis","Brassica oleracea italica","Brassica rapa","Brassica sp.","Calochortus mariposa","Calystegia soldanella","Camassia quamash","Camassia sp.","Castanea sp.","Catalpa sp.","Ceanothus cuneatus","Ceanothus sp.","Ceanothus thyrsiflorus","Ceanothus velutinus","Centaurea cyanus","Centaurea maculosa","Centaurea sp.","Chamaenerion angustifolium","Chrysolepis chrysophylla","Chrysothamnus nauseosus","Cirsium arvense","Cirsium sp.","Cirsium vulgare","Clarkia amoena","Cleome serrulata","Coreopsis sp.","Crataegus","Cucurbita sp.","Cynoglossum officinale","Dahlia sp.","Delphinium leucophaeum","Delphinium sp.","Delphinium trolliifolium","Dicentra formosa","Digitalis purpurea","Dipsacus fullonum","Echinacea sp.","Echinops sp.","Epilobium angustifolium","Epilobium sp.","Ericaceae","Ericameria linearifolia","Ericameria nauseosa","Ericameria sp.","Eriogonum glaucus","Eriogonum sp.","Eriophyllum confertiflorum","Eriophyllum lanatum","Eriophyllum sp.","Eschscholzia californica","Euonymus occidentalis","Euphorbia esula","Fagopyrum sp.","Fragaria chiloensis","Gaillardia sp.","Geranium oreganum","Geranium sp.","Gilia capitata","Grindelia stricta stricta","Hackelia micrantha","Helenium autumnale","Helianthus annuus","Helianthus sp.","Heliopsis helianthoides","Heracleum maximum","Heracleum sphondylium","Heuchera sp.","Holodiscus dumosus","Horkelia fusca","Hydrophyllum sp.","Hypericum sp.","Iliamna rivularis","Kalmia polifolia","Lathyrus hirsutus","Lathyrus japonicus var. maritimus","Lavandula angustifolia","Leucanthemum vulgare","Lithospermum ruderale","Lonicera caerulea","Lonicera involucrata","Lupinus argenteus argenteus","Lupinus lepidus","Lupinus littoralis","Lupinus rivularis","Lupinus sp.","Mahonia aquifolium","Malus pumila ","Medicago sativa","Melilotus albus","Microseris nutans","Mimulus guttatus","Mimulus lewisii","Mimulus sp.","Monardella odoratissima","Nepeta cataria","Nepeta grandiflora","Nepeta sp.","Net","Oenanthe sarmentosa","Oenothera biennis","Origanum vulgare","Penstemon deustus","Penstemon ovatus","Penstemon procerus","Penstemon sp.","Penstemon spectabilis","Perovskia atriplicifolia","Phacelia hastata","Phacelia heterophylla","Phacelia sp.","Phacelia tanacetifolia","Physocarpus capitatus","Physocarpus sp.","Plagiobothrys figuratus","Poison hemlock and Steens Mtn thistle","Potentilla gracilis","Prunella vulgaris","Prunus avium","Prunus laurocerasus","Ranunculus occidentalis","Raphanus sativus","Raphanus sp.","Rhododendron macrophyllum","Rhododendron maximum","Rhododendron sp.","Rhododendron x","Ribes aureum","Ribes cereum","Ribes rubrum","Ribes sanguineum","Robinia pseudoacacia","Rosa gymnocarpa","Rosa nutkana","Rosa sp.","Rosa woodsii","Rosaceae","Rosmarinus officinalis","Rubus armeniacus","Rubus bifrons","Rubus fruticosus","Rubus idaeus","Rubus parviflorus","Rubus sp.","Rubus ursinus","Salix lasiandra","Salvia officinalis","Salvia pratensis","Scutellaria integrifolia","Senecio hydrophilus","Senecio sp.","Sidalcea campestris","Sidalcea nelsoniana","Sidalcea oregana","Sidalcea sp.","Solanum sp.","Solidago canadensis","Solidago elongata","Solidago sp.","Sorbus aucuparia","Spiraea douglasii","Spiraea japonica","Spiraea sp.","Stachys byzantina","Stachys chamissonis","Styrax japonicus","Symphoricarpos albus","Symphoricarpos rotundifolius","Symphoricarpos sp.","Symphytum sp.","Syringa sp.","Taraxacum officinale","Tellima grandiflora","Thelypodium sp.","Thermopsis rhombifolia","Tithonia sp.","Tonella floribunda","Tradescantia sp.","Trifolium incarnatum","Trifolium sp.","Vaccinium ovatum","Vaccinium sp.","Verbascum thapsus","Veronica scutellata","Viburnum davidii","Vicia americana","Vicia cracca","Vicia sativa","Vicia sp.","Vicia villosa","Whipplea modesta","Wisteria sp.","Wyethia amplexicaulis","Wyethia angustifolia","Wyethia mollis","Wyethia sp."],"group":[1,4,10,11,9,7,5,1,8,3,2,5,5,3,7,10,6,1,14,1,13,3,12,5,12,12,5,11,7,10,3,9,12,12,11,10,8,5,8,12,10,12,8,11,10,10,9,3,4,12,12,10,12,5,3,5,5,11,10,7,7,5,5,3,5,5,5,12,9,3,9,9,10,12,10,7,3,7,8,3,8,12,9,12,1,7,7,12,7,1,12,3,9,12,12,10,3,3,13,5,1,12,12,12,12,10,2,5,12,5,9,6,5,10,5,12,12,12,1,1,11,3,10,9,11,9,5,7,7,3,7,9,7,5,10,10,12,5,9,3,5,3,3,2,5,10,9,6,3,1,1,7,5,11,12,1,1,10,3,10,3,3,11,9,8,5,5,12,7,10,1,12,6,1,12,7,12,5,12,1,12,3,11,11,1,5,7,12,9,7,12,5,5,5,5,5,1,5,12,3,7,7,2,10,12,1,10,5,10,12,2,13,5,12,5,12,6,5,1,12,9,9,6,5,3,12,3,7,12,9,12,7,7,11,5,7,12,7,7,11,3,7,3,6,8,9,4,9,7]},"options":{"NodeID":"name","Group":"group","colourScale":"d3.scaleOrdinal(d3.schemeCategory20);","fontSize":7,"fontFamily":"serif","clickTextSize":17.5,"linkDistance":50,"linkWidth":"function(d) { return Math.sqrt(d.value); }","charge":-30,"opacity":0.8,"zoom":true,"legend":false,"arrows":false,"nodesize":false,"radiusCalculation":" Math.sqrt(d.nodesize)+6","bounded":false,"opacityNoHover":0.9,"clickAction":null}},"evals":[],"jsHooks":[]}</script>
<p>We can also use a flow-like visualization plot.</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="ecological-networks.html#cb51-1" tabindex="-1"></a><span class="fu">sankeyNetwork</span>(<span class="at">Links =</span> g_bumbles_net3d<span class="sc">$</span>links,</span>
<span id="cb51-2"><a href="ecological-networks.html#cb51-2" tabindex="-1"></a>             <span class="at">Nodes =</span> g_bumbles_net3d<span class="sc">$</span>nodes,</span>
<span id="cb51-3"><a href="ecological-networks.html#cb51-3" tabindex="-1"></a>            <span class="at">Source =</span> <span class="st">&quot;source&quot;</span>, <span class="at">Target =</span> <span class="st">&quot;target&quot;</span>,</span>
<span id="cb51-4"><a href="ecological-networks.html#cb51-4" tabindex="-1"></a>            <span class="at">Value =</span> <span class="st">&quot;value&quot;</span>,  <span class="at">NodeID =</span> <span class="st">&quot;name&quot;</span>, </span>
<span id="cb51-5"><a href="ecological-networks.html#cb51-5" tabindex="-1"></a>            <span class="at">nodePadding =</span> <span class="dv">0</span>, <span class="at">height =</span> <span class="dv">5000</span>)</span></code></pre></div>
<div id="htmlwidget-d0364567f96453a52652" style="width:672px;height:5000px;" class="sankeyNetwork html-widget"></div>
<script type="application/json" data-for="htmlwidget-d0364567f96453a52652">{"x":{"links":{"source":[12,22,22,2,12,3,5,22,2,21,4,22,22,22,3,2,8,12,22,8,5,22,2,22,8,5,3,22,2,2,4,21,1,5,22,22,12,4,15,9,22,12,22,12,9,12,22,12,3,2,5,11,5,11,4,12,12,9,12,16,3,12,22,7,11,17,11,12,3,22,22,9,2,4,22,21,13,4,20,22,2,4,12,3,22,2,22,4,22,2,5,9,5,5,14,9,13,22,8,13,8,22,9,4,22,5,7,14,21,5,5,22,5,12,22,12,5,7,22,21,22,9,4,3,22,22,15,2,22,9,9,22,13,9,22,20,12,7,22,22,12,11,22,12,22,2,10,22,12,22,4,11,12,22,2,21,4,16,3,22,11,5,12,12,4,2,11,8,22,9,22,22,7,17,7,11,22,3,13,22,2,4,3,4,11,5,5,22,7,21,22,5,21,4,4,5,22,12,2,2,22,22,12,5,12,22,3,12,4,2,9,22,21,12,22,11,9,22,21,10,12,2,9,2,4,16,2,18,13,22,8,11,9,5,22,7,12,11,22,16,7,5,12,3,22,16,7,14,4,19,5,7,12,2,7,22,2,9,2,12,21,22,9,22,2,21,4,12,2,3,7,22,21,9,4,13,8,12,22,3,12,12,8,3,22,2,5,2,3,5,7,22,16,17,11,22,8,5,22,3,3,22,8,11,7,12,12,11,22,7,3,12,11,22,22,21,9,3,3,7,4,14,12,11,5,21,12,22,13,3,12,22,9,14,4,16,5,22,22,11,3,1,12,22,22,11,12,12,12,2,6,1,22,12,15,7,16,11,12,3,6,7,12,22,13,5,5,2,10,4,2,22,7,22,5,2,4,10,5,12,2,12,22,4,8,10,20,20,11,22,11,8,9,13,2,12,9,12,22,14,22,16,12,0,12,22,7,16,1,7,22,5,12,11,4,5,2,14,4,7,2,16,11,22,13,11,22,5,13,9,22,5,13,9,22,2,12,4,22,14,9,2,22,5,11,22,3,22,12,5,22,5,14,21,5,22,3,9,21,3,21,5,9,8,14,3,9,22,22,16,11,8,4,2,1,4,22,5,7,4,11],"target":[23,24,25,25,26,27,28,28,29,30,31,32,33,34,34,35,36,37,37,38,38,39,40,41,42,42,43,43,44,45,46,47,48,48,49,50,50,51,51,51,51,51,52,53,54,55,56,56,57,58,59,59,60,61,61,61,62,63,64,65,65,65,65,65,65,66,66,66,66,66,67,67,67,68,68,69,69,70,71,71,71,71,71,71,72,72,73,74,74,74,75,76,76,77,77,78,78,78,78,79,80,81,82,82,83,84,84,85,85,85,86,87,88,88,89,89,89,89,90,91,91,91,92,92,93,94,95,95,95,95,96,96,96,97,97,98,99,100,101,102,103,103,103,104,104,105,106,107,107,108,108,109,109,110,110,110,110,111,112,112,112,112,112,113,113,113,114,115,115,115,116,117,118,118,119,120,120,120,121,121,122,123,124,125,126,127,128,128,129,129,129,130,131,131,132,132,132,133,134,135,135,136,136,137,137,137,138,138,138,138,138,139,139,140,140,140,141,142,142,143,144,145,145,146,146,147,147,147,148,148,148,148,148,148,149,149,150,150,150,150,150,151,152,153,154,155,155,155,155,155,155,156,157,157,157,158,158,158,159,159,160,160,161,161,161,161,161,161,162,162,163,163,163,163,163,164,164,164,164,164,165,166,166,166,167,168,168,169,170,170,170,171,172,173,173,174,175,175,175,175,176,176,176,176,176,176,177,177,178,179,179,179,179,180,181,181,181,182,183,184,184,184,185,186,186,187,187,187,187,187,188,188,188,188,188,188,189,189,190,191,191,191,191,191,192,192,192,193,194,194,194,195,195,195,195,196,196,196,196,196,197,197,197,198,199,200,201,202,202,203,203,204,205,205,206,206,206,206,207,207,208,209,209,209,209,210,210,211,212,213,213,213,213,213,213,214,215,215,215,216,216,216,217,218,218,218,218,218,219,219,219,219,219,219,220,220,220,220,221,221,221,222,223,224,224,225,225,225,226,226,226,227,227,227,228,229,229,229,230,231,231,232,232,232,233,233,233,234,234,235,236,237,238,238,238,239,239,240,240,240,241,241,241,241,241,241,242,242,243,243,244,244,245,245,246,247,248,248,248,248,248],"value":[1,1,5,1,2,2,2,3,1,1,3,1,1,1,1,1,1,1,1,1,1,2,1,1,5,1,1,1,1,3,1,1,1,1,1,2,1,1,1,1,1,1,1,1,1,1,2,2,2,1,2,1,1,1,1,3,1,1,1,1,2,3,5,1,4,1,5,8,4,10,8,1,1,1,1,1,1,2,1,1,3,6,3,1,1,1,8,2,1,4,3,3,2,1,1,1,1,1,2,1,1,1,1,1,1,1,1,2,1,3,3,1,2,2,2,1,1,4,1,1,1,1,2,1,1,1,2,24,3,1,7,3,2,4,3,1,1,1,1,1,1,1,20,1,4,1,1,1,2,5,2,2,1,1,2,1,4,1,1,2,1,4,9,1,1,2,1,1,3,1,1,1,2,1,1,1,1,2,1,1,1,1,1,1,1,1,1,1,1,3,2,1,1,4,1,1,1,3,1,5,4,5,1,1,2,1,4,2,3,3,1,1,1,2,1,1,1,1,1,1,1,3,1,2,4,2,1,1,2,1,1,1,2,2,1,5,2,1,4,1,4,1,1,1,1,1,5,2,2,1,4,1,3,5,1,1,1,1,2,1,6,3,1,1,1,11,1,2,1,2,1,2,4,1,12,2,9,1,2,1,1,2,1,1,2,1,1,1,1,1,1,1,1,1,1,1,1,6,3,1,1,3,1,2,1,1,2,3,1,3,1,1,1,1,4,1,3,1,1,4,2,3,1,1,1,1,1,9,1,1,1,1,3,1,8,3,1,1,1,3,1,1,3,1,6,4,3,2,6,2,1,1,1,4,1,1,1,1,1,1,1,1,2,1,1,2,2,1,1,1,3,3,1,2,1,3,2,1,1,2,1,1,7,1,1,1,1,2,1,7,1,2,3,1,1,2,2,3,17,1,1,1,2,1,2,2,4,1,2,1,16,1,4,2,1,1,2,1,3,1,2,1,2,1,1,1,4,1,1,3,2,4,1,2,2,1,1,2,1,2,1,1,1,1,1,1,3,1,2,1,1,1,1,1,2,1,2,2,1,1,3,8,5,1,1,2,1,1,1,1,1,1,1,1,1,1,2,2,1,2,1]},"nodes":{"name":["Bombus ","Bombus appositus","Bombus bifarius","Bombus caliginosus","Bombus centralis","Bombus fervidus","Bombus flavidus","Bombus flavifrons","Bombus griseocollis","Bombus huntii","Bombus insularis","Bombus melanopygus","Bombus mixtus","Bombus morrisoni","Bombus nevadensis","Bombus occidentalis","Bombus rufocinctus","Bombus sitkensis","Bombus sylvicola","Bombus vagans","Bombus vancouverensis","Bombus vandykei","Bombus vosnesenskii","Acer circinatum","Acer macrophyllum","Achillea millefolium","Achillea sp.","Aesculus hippocastanum","Agastache sp.","Agastache urticifolia","Alcea biennis","Alcea rosea","Allium amplectens","Amelanchier alnifolia","Amsinckia menziesii","Angelica arguta","Apocynum sp.","Aquilegia formosa","Aquilegia sp.","Arctostaphylos densiflora","Arnica cordifolia","Asclepias or Euphorbia spp.","Asclepias speciosa","Asparagus officinalis","Aster foliaceus","Asteraceae","Astragalus filipes","Balsamorhiza sp.","Bellardia viscosa","Bellis perennis","Bellis sp.","Berberis aquifolium","Betula sp.","Boraginales","Borago officinalis","Brassica oleracea italica","Brassica rapa","Brassica sp.","Calochortus mariposa","Calystegia soldanella","Camassia quamash","Camassia sp.","Castanea sp.","Catalpa sp.","Ceanothus cuneatus","Ceanothus sp.","Ceanothus thyrsiflorus","Ceanothus velutinus","Centaurea cyanus","Centaurea maculosa","Centaurea sp.","Chamaenerion angustifolium","Chrysolepis chrysophylla","Chrysothamnus nauseosus","Cirsium arvense","Cirsium sp.","Cirsium vulgare","Clarkia amoena","Cleome serrulata","Coreopsis sp.","Crataegus","Cucurbita sp.","Cynoglossum officinale","Dahlia sp.","Delphinium leucophaeum","Delphinium sp.","Delphinium trolliifolium","Dicentra formosa","Digitalis purpurea","Dipsacus fullonum","Echinacea sp.","Echinops sp.","Epilobium angustifolium","Epilobium sp.","Ericaceae","Ericameria linearifolia","Ericameria nauseosa","Ericameria sp.","Eriogonum glaucus","Eriogonum sp.","Eriophyllum confertiflorum","Eriophyllum lanatum","Eriophyllum sp.","Eschscholzia californica","Euonymus occidentalis","Euphorbia esula","Fagopyrum sp.","Fragaria chiloensis","Gaillardia sp.","Geranium oreganum","Geranium sp.","Gilia capitata","Grindelia stricta stricta","Hackelia micrantha","Helenium autumnale","Helianthus annuus","Helianthus sp.","Heliopsis helianthoides","Heracleum maximum","Heracleum sphondylium","Heuchera sp.","Holodiscus dumosus","Horkelia fusca","Hydrophyllum sp.","Hypericum sp.","Iliamna rivularis","Kalmia polifolia","Lathyrus hirsutus","Lathyrus japonicus var. maritimus","Lavandula angustifolia","Leucanthemum vulgare","Lithospermum ruderale","Lonicera caerulea","Lonicera involucrata","Lupinus argenteus argenteus","Lupinus lepidus","Lupinus littoralis","Lupinus rivularis","Lupinus sp.","Mahonia aquifolium","Malus pumila ","Medicago sativa","Melilotus albus","Microseris nutans","Mimulus guttatus","Mimulus lewisii","Mimulus sp.","Monardella odoratissima","Nepeta cataria","Nepeta grandiflora","Nepeta sp.","Net","Oenanthe sarmentosa","Oenothera biennis","Origanum vulgare","Penstemon deustus","Penstemon ovatus","Penstemon procerus","Penstemon sp.","Penstemon spectabilis","Perovskia atriplicifolia","Phacelia hastata","Phacelia heterophylla","Phacelia sp.","Phacelia tanacetifolia","Physocarpus capitatus","Physocarpus sp.","Plagiobothrys figuratus","Poison hemlock and Steens Mtn thistle","Potentilla gracilis","Prunella vulgaris","Prunus avium","Prunus laurocerasus","Ranunculus occidentalis","Raphanus sativus","Raphanus sp.","Rhododendron macrophyllum","Rhododendron maximum","Rhododendron sp.","Rhododendron x","Ribes aureum","Ribes cereum","Ribes rubrum","Ribes sanguineum","Robinia pseudoacacia","Rosa gymnocarpa","Rosa nutkana","Rosa sp.","Rosa woodsii","Rosaceae","Rosmarinus officinalis","Rubus armeniacus","Rubus bifrons","Rubus fruticosus","Rubus idaeus","Rubus parviflorus","Rubus sp.","Rubus ursinus","Salix lasiandra","Salvia officinalis","Salvia pratensis","Scutellaria integrifolia","Senecio hydrophilus","Senecio sp.","Sidalcea campestris","Sidalcea nelsoniana","Sidalcea oregana","Sidalcea sp.","Solanum sp.","Solidago canadensis","Solidago elongata","Solidago sp.","Sorbus aucuparia","Spiraea douglasii","Spiraea japonica","Spiraea sp.","Stachys byzantina","Stachys chamissonis","Styrax japonicus","Symphoricarpos albus","Symphoricarpos rotundifolius","Symphoricarpos sp.","Symphytum sp.","Syringa sp.","Taraxacum officinale","Tellima grandiflora","Thelypodium sp.","Thermopsis rhombifolia","Tithonia sp.","Tonella floribunda","Tradescantia sp.","Trifolium incarnatum","Trifolium sp.","Vaccinium ovatum","Vaccinium sp.","Verbascum thapsus","Veronica scutellata","Viburnum davidii","Vicia americana","Vicia cracca","Vicia sativa","Vicia sp.","Vicia villosa","Whipplea modesta","Wisteria sp.","Wyethia amplexicaulis","Wyethia angustifolia","Wyethia mollis","Wyethia sp."],"group":["Bombus ","Bombus appositus","Bombus bifarius","Bombus caliginosus","Bombus centralis","Bombus fervidus","Bombus flavidus","Bombus flavifrons","Bombus griseocollis","Bombus huntii","Bombus insularis","Bombus melanopygus","Bombus mixtus","Bombus morrisoni","Bombus nevadensis","Bombus occidentalis","Bombus rufocinctus","Bombus sitkensis","Bombus sylvicola","Bombus vagans","Bombus vancouverensis","Bombus vandykei","Bombus vosnesenskii","Acer circinatum","Acer macrophyllum","Achillea millefolium","Achillea sp.","Aesculus hippocastanum","Agastache sp.","Agastache urticifolia","Alcea biennis","Alcea rosea","Allium amplectens","Amelanchier alnifolia","Amsinckia menziesii","Angelica arguta","Apocynum sp.","Aquilegia formosa","Aquilegia sp.","Arctostaphylos densiflora","Arnica cordifolia","Asclepias or Euphorbia spp.","Asclepias speciosa","Asparagus officinalis","Aster foliaceus","Asteraceae","Astragalus filipes","Balsamorhiza sp.","Bellardia viscosa","Bellis perennis","Bellis sp.","Berberis aquifolium","Betula sp.","Boraginales","Borago officinalis","Brassica oleracea italica","Brassica rapa","Brassica sp.","Calochortus mariposa","Calystegia soldanella","Camassia quamash","Camassia sp.","Castanea sp.","Catalpa sp.","Ceanothus cuneatus","Ceanothus sp.","Ceanothus thyrsiflorus","Ceanothus velutinus","Centaurea cyanus","Centaurea maculosa","Centaurea sp.","Chamaenerion angustifolium","Chrysolepis chrysophylla","Chrysothamnus nauseosus","Cirsium arvense","Cirsium sp.","Cirsium vulgare","Clarkia amoena","Cleome serrulata","Coreopsis sp.","Crataegus","Cucurbita sp.","Cynoglossum officinale","Dahlia sp.","Delphinium leucophaeum","Delphinium sp.","Delphinium trolliifolium","Dicentra formosa","Digitalis purpurea","Dipsacus fullonum","Echinacea sp.","Echinops sp.","Epilobium angustifolium","Epilobium sp.","Ericaceae","Ericameria linearifolia","Ericameria nauseosa","Ericameria sp.","Eriogonum glaucus","Eriogonum sp.","Eriophyllum confertiflorum","Eriophyllum lanatum","Eriophyllum sp.","Eschscholzia californica","Euonymus occidentalis","Euphorbia esula","Fagopyrum sp.","Fragaria chiloensis","Gaillardia sp.","Geranium oreganum","Geranium sp.","Gilia capitata","Grindelia stricta stricta","Hackelia micrantha","Helenium autumnale","Helianthus annuus","Helianthus sp.","Heliopsis helianthoides","Heracleum maximum","Heracleum sphondylium","Heuchera sp.","Holodiscus dumosus","Horkelia fusca","Hydrophyllum sp.","Hypericum sp.","Iliamna rivularis","Kalmia polifolia","Lathyrus hirsutus","Lathyrus japonicus var. maritimus","Lavandula angustifolia","Leucanthemum vulgare","Lithospermum ruderale","Lonicera caerulea","Lonicera involucrata","Lupinus argenteus argenteus","Lupinus lepidus","Lupinus littoralis","Lupinus rivularis","Lupinus sp.","Mahonia aquifolium","Malus pumila ","Medicago sativa","Melilotus albus","Microseris nutans","Mimulus guttatus","Mimulus lewisii","Mimulus sp.","Monardella odoratissima","Nepeta cataria","Nepeta grandiflora","Nepeta sp.","Net","Oenanthe sarmentosa","Oenothera biennis","Origanum vulgare","Penstemon deustus","Penstemon ovatus","Penstemon procerus","Penstemon sp.","Penstemon spectabilis","Perovskia atriplicifolia","Phacelia hastata","Phacelia heterophylla","Phacelia sp.","Phacelia tanacetifolia","Physocarpus capitatus","Physocarpus sp.","Plagiobothrys figuratus","Poison hemlock and Steens Mtn thistle","Potentilla gracilis","Prunella vulgaris","Prunus avium","Prunus laurocerasus","Ranunculus occidentalis","Raphanus sativus","Raphanus sp.","Rhododendron macrophyllum","Rhododendron maximum","Rhododendron sp.","Rhododendron x","Ribes aureum","Ribes cereum","Ribes rubrum","Ribes sanguineum","Robinia pseudoacacia","Rosa gymnocarpa","Rosa nutkana","Rosa sp.","Rosa woodsii","Rosaceae","Rosmarinus officinalis","Rubus armeniacus","Rubus bifrons","Rubus fruticosus","Rubus idaeus","Rubus parviflorus","Rubus sp.","Rubus ursinus","Salix lasiandra","Salvia officinalis","Salvia pratensis","Scutellaria integrifolia","Senecio hydrophilus","Senecio sp.","Sidalcea campestris","Sidalcea nelsoniana","Sidalcea oregana","Sidalcea sp.","Solanum sp.","Solidago canadensis","Solidago elongata","Solidago sp.","Sorbus aucuparia","Spiraea douglasii","Spiraea japonica","Spiraea sp.","Stachys byzantina","Stachys chamissonis","Styrax japonicus","Symphoricarpos albus","Symphoricarpos rotundifolius","Symphoricarpos sp.","Symphytum sp.","Syringa sp.","Taraxacum officinale","Tellima grandiflora","Thelypodium sp.","Thermopsis rhombifolia","Tithonia sp.","Tonella floribunda","Tradescantia sp.","Trifolium incarnatum","Trifolium sp.","Vaccinium ovatum","Vaccinium sp.","Verbascum thapsus","Veronica scutellata","Viburnum davidii","Vicia americana","Vicia cracca","Vicia sativa","Vicia sp.","Vicia villosa","Whipplea modesta","Wisteria sp.","Wyethia amplexicaulis","Wyethia angustifolia","Wyethia mollis","Wyethia sp."]},"options":{"NodeID":"name","NodeGroup":"name","LinkGroup":null,"colourScale":"d3.scaleOrdinal(d3.schemeCategory20);","fontSize":7,"fontFamily":null,"nodeWidth":15,"nodePadding":0,"units":"","margin":{"top":null,"right":null,"bottom":null,"left":null},"iterations":32,"sinksRight":true}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="in-class-visualization-challange-1." class="section level3 hasAnchor" number="7.2.8">
<h3><span class="header-section-number">7.2.8</span> In class: Visualization challange 1.<a href="ecological-networks.html#in-class-visualization-challange-1." class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Choose a different genus of bees and repeat the steps above to make a network.</p>
</div>
<div id="in-class-visualization-challange-2." class="section level3 hasAnchor" number="7.2.9">
<h3><span class="header-section-number">7.2.9</span> In class: Visualization challange 2.<a href="ecological-networks.html#in-class-visualization-challange-2." class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>How could we use graph attributes to create informative network visualizations? Set some attributes and use them to plot your network.
Consider using static network plots instead of network3D, see this <a href="https://yunranchen.github.io/intro-net-r/advanced-network-visualization.html#visualization-for-static-network">turorial</a> for examples.</p>
</div>
<div id="further-reading-software" class="section level3 hasAnchor" number="7.2.10">
<h3><span class="header-section-number">7.2.10</span> Further reading &amp; software<a href="ecological-networks.html#further-reading-software" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><strong>Reviews/guides</strong>: <span class="citation">Delmas et al. (<a href="#ref-delmas2019">2019</a>)</span>; <span class="citation">Jordi Bascompte and Jordano (<a href="#ref-bascompte2007">2007</a>)</span>; <span class="citation">Landi et al. (<a href="#ref-landi2018">2018</a>)</span>.<br />
</li>
<li><strong>R packages</strong>: <em>bipartite</em> <span class="citation">(<a href="#ref-dormann2009">Dormann, Gruber, and Fründ 2009</a>; <a href="#ref-bipartite2025">Dormann et al. 2025</a>)</span>, <em>igraph</em> <span class="citation">(<a href="#ref-igraph2025">Csardi, Nepusz, et al. 2025</a>)</span>, <em>vegan</em> for null models <span class="citation">(<a href="#ref-vegan2025">Oksanen et al. 2025</a>)</span>.<br />
</li>
<li><strong>Data portals</strong>: Web of Life <span class="citation">(<a href="#ref-weboflife">Bascompte Lab 2017</a>)</span>, Mangal <span class="citation">(<a href="#ref-rmangal2019">Poisot et al. 2019</a>)</span>.</li>
</ul>
</div>
</div>
<div id="discussion-reflection-yeakel-et-al.-2014-collapse-of-an-ecological-network-in-ancient-egypt" class="section level2 hasAnchor" number="7.3">
<h2><span class="header-section-number">7.3</span> Discussion &amp; Reflection: Yeakel et al. (2014): Collapse of an ecological network in Ancient Egypt<a href="ecological-networks.html#discussion-reflection-yeakel-et-al.-2014-collapse-of-an-ecological-network-in-ancient-egypt" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<blockquote>
<p><strong>How to use this section:</strong> Read the article below (embedded) and prepare your answers to the discussion prompts. Bring notes to class.</p>
</blockquote>
<div id="article-embedded-1" class="section level3 hasAnchor" number="7.3.1">
<h3><span class="header-section-number">7.3.1</span> Article (embedded)<a href="ecological-networks.html#article-embedded-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div style="margin: 1rem 0;">
<embed src="readings/reading-Yeakel2014.pdf" type="application/pdf" width="100%" height="800px" />
</div>
</div>
<div id="reflection-and-in-class-discussion-questions" class="section level3 hasAnchor" number="7.3.2">
<h3><span class="header-section-number">7.3.2</span> Reflection and in-class discussion Questions<a href="ecological-networks.html#reflection-and-in-class-discussion-questions" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ol style="list-style-type: decimal">
<li><p>Climate and Political Change
The paper links pulses of aridification to social and political upheaval (collapse of Old Kingdom, First Intermediate Period, fall of the New Kingdom). Do you think ecological collapse drove political instability, or was it the other way around? Defend your view by drawing connections between ecology and human history.</p></li>
<li><p>Modern Parallels
Identify one modern ecosystem facing similar pressures (climate change, habitat loss, overexploitation). Compare it with Ancient Egypt: what lessons can be drawn about stability, redundancy, and persistence? What might the Yeakel framework suggest about its trajectory?</p></li>
</ol>
</div>
</div>
<div id="lab-food-webs-network-measures-student-version" class="section level2 hasAnchor" number="7.4">
<h2><span class="header-section-number">7.4</span> Lab: Food Webs &amp; Network Measures (Student Version)<a href="ecological-networks.html#lab-food-webs-network-measures-student-version" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="lesson-overview-2" class="section level3 hasAnchor" number="7.4.1">
<h3><span class="header-section-number">7.4.1</span> Lesson Overview<a href="ecological-networks.html#lesson-overview-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><strong>Computational Topics</strong>
- Build and visualize food webs
- Write functions to implement mathematical equations</p>
<p><strong>Conservation topics</strong>
- Paleofood webs
- Species extinction</p>
<p>In this lab we will practice our network visualization and manipulation skills using the paleo food web data from <a href="https://doi.org/10.1073/pnas.1408471111">Yeakel et al. 2014</a>.</p>
<div class="float">
<img src="labs/figures/paleoweb.jpg" alt="Paleoweb" />
<div class="figcaption">Paleoweb</div>
</div>
<p>See the beautiful, animated version of the graphic above <a href="https://infograficos.estadao.com.br/public/cidades/extincoes-egito/">here</a></p>
<p>With some interaction networks we can observe the interactions, for example plant-pollinator networks, seed-disperal networks, human social networks. In food webs sometimes feeding interactions are observed directly, through camera traps, people doing timed observations, and now molecular analysis of gut contents/scat. However, often with food webs people build probabilistic models of who interacts with who based on body size (as in the Yeakel et al. 2014), especially with paleowebs. Thus the data from Yeakel et al. is 1) an occurrence matrix (Figure 2 from the publication) and a matrix of body sizes (two columns, females then males). We will use these data to build the foodwebs for each time period. This lab is pretty challenging because it will use many of our core programming skills (for loops, writing functions, subsetting data) and our network skills.</p>
<p>First we will read in the data. The matrix we are reading in has no row or column names, we will have to set them.</p>
<pre><code>## &#39;data.frame&#39;:    39 obs. of  23 variables:
##  $ V1 : int  1 1 1 1 1 1 1 1 0 1 ...
##  $ V2 : int  1 1 1 1 1 1 1 1 0 1 ...
##  $ V3 : int  1 1 1 1 0 1 1 1 0 1 ...
##  $ V4 : int  1 1 1 1 0 1 1 1 0 1 ...
##  $ V5 : int  1 1 1 1 0 1 1 1 0 1 ...
##  $ V6 : int  1 1 1 1 0 1 1 1 0 1 ...
##  $ V7 : int  1 1 1 1 0 1 1 1 0 1 ...
##  $ V8 : int  1 1 1 1 0 0 1 1 0 1 ...
##  $ V9 : int  1 1 1 1 0 0 1 1 0 0 ...
##  $ V10: int  1 1 1 1 0 0 1 1 0 0 ...
##  $ V11: int  1 1 1 1 0 0 1 1 0 0 ...
##  $ V12: int  1 1 1 1 0 0 1 1 1 0 ...
##  $ V13: int  1 1 1 1 0 0 1 1 1 0 ...
##  $ V14: int  1 1 0 1 0 0 1 1 1 0 ...
##  $ V15: int  1 1 0 1 0 0 1 1 1 0 ...
##  $ V16: int  1 1 0 1 0 0 1 1 1 0 ...
##  $ V17: int  1 1 0 1 0 0 1 1 1 0 ...
##  $ V18: int  1 1 0 1 0 0 0 1 1 0 ...
##  $ V19: int  1 1 0 1 0 0 0 1 1 0 ...
##  $ V20: int  1 1 0 1 0 0 0 1 1 0 ...
##  $ V21: int  1 1 0 1 0 0 0 1 0 0 ...
##  $ V22: int  1 1 0 1 0 0 0 1 0 0 ...
##  $ V23: int  1 1 0 1 0 0 0 0 0 0 ...</code></pre>
<pre><code>## &#39;data.frame&#39;:    39 obs. of  2 variables:
##  $ V1: int  6 4 18 25 40 122 122 50 35 2200 ...
##  $ V2: int  15 8 36 55 90 260 260 60 65 6300 ...</code></pre>
<div class="float">
<img src="labs/figures/figure2.jpg" alt="Figure 2" />
<div class="figcaption">Figure 2</div>
</div>
<p>The rows are arranged in the order of Figure 2 of the manuscript. To set the rownames we can make a vector of the names then use the function <code>rownames</code>. We also have to note which species are predators (all those in the species in the Carnivora clade in figure 2). Otherwise we will create a web where giraffes are voracious predators consuming all of the other species (I made this mistake when constructing the networks originally). I have transcribed the data from figure 2 for you:</p>
</div>
<div id="lab-question-1-creating-our-foodwebs-based-on-body-sizes." class="section level3 hasAnchor" number="7.4.2">
<h3><span class="header-section-number">7.4.2</span> Lab question 1: Creating our foodwebs based on body sizes.<a href="ecological-networks.html#lab-question-1-creating-our-foodwebs-based-on-body-sizes." class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>1a. Use the above vector of species names to label the row names of the species occurrence and the body size matrices. The columns of the species occurrence matrix are time points, so we can leave those as V1 etc., but we should set the column names of the mass matrix as “f”, “m” (female and male). Use <code>head</code> to check each matrix to see if the names are displayed properly.</li>
</ul>
<p>Yeakel recommended an updated equation to estimate the probability a predator consumed a prey based on their relative body masses from <a href="https://doi.org/10.1086/653667">Rohr et al. 2010.</a>. The probability of existence of a trophic link between a predator of body-size <span class="math inline">\(m_i\)</span> and a prey of body-size <span class="math inline">\(m_j\)</span> is given by:</p>
<p><img src="labs/figures/feeding_equ.png" alt="Probabilitic feeding equation" />
(P(<span class="math inline">\(A_{1j}\)</span> = 1) is the probability predator i eats prey j).</p>
<ul>
<li>1b. Write a function and call it <code>probEat</code> to implement the equation above. Round the probability to two decimal places.</li>
</ul>
<p>Below are the values of alpha, beta, and gamma for the Serengeti. In addition, you will need a function to compute the inverse logit function because this equation is for the logit of the probability, so to calculate the 0-1 probability you will need to take the inverse logit of the other side of the equation. Also note, <span class="math inline">\(log^2\)</span> is equivalent to (log(<span class="math inline">\(m_i\)</span>/<span class="math inline">\(m_j\)</span>))^2</p>
<pre><code>## function (x) 
## exp(x)/(1 + exp(x))</code></pre>
<ul>
<li>1c. Now create networks of who eats whom. We will start with adjacency matrices. We will assume all of our species are the size of females. For this step, don`t worry about predators vs. prey yet, just calculate all of the feeding probabilities based on body sizes.</li>
</ul>
<p>Hint: if you start with a square matrix of all zeros (one row and one column for each species), you can use a for loop to fill in that matrix with probabilities calculated from your function above.</p>
<ul>
<li>1d. Now that you have your matrix of potential feeding interactions based on body size, use the <code>carnivores</code> vector created above to set all of the feeding interactions of herbivores (0s in that vector) to zero. In foodwebs the columns are the higher trophic level and the rows are the lower.
HINT: the function <code>sweep</code> may be useful, though there are many approaches to do the needed matrix multiplication. Print the row and column sums.</li>
</ul>
</div>
<div id="lab-question-2-breaking-the-networks-into-time-periods" class="section level3 hasAnchor" number="7.4.3">
<h3><span class="header-section-number">7.4.3</span> Lab question 2: Breaking the networks into time periods<a href="ecological-networks.html#lab-question-2-breaking-the-networks-into-time-periods" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>2a. With our matrix of feeding interaction we can create a web for each time period, including only the species that were not extinct in the period. Try first just using the second time period (the second column of <code>sp_occ</code>).</li>
</ul>
<p>Use the function <code>empty</code> from the bipartite package to empty the matrix of rows and columns with no interactions. The number of species in the second time period is 36 <code>sum(sp_occ[,2])</code>. Check to see that the number of rows in your network with probabilities &gt; 0 is 36.</p>
<p>HINT: You will need to zero out the rows where a species in not present in that time period and the columns. The function <code>sweep</code> may be useful again.</p>
<ul>
<li>2b. Now create a network for all of the time points by creating a list where each element is a network. You will need to use a for loop, or an <code>lapply</code> if you feel like experimenting with apply functions. Print the first 5 columns and rows of the 5th time period.</li>
</ul>
<p>HINT: If choosing the for loop route, remember to create an empty list of a specific length use the function <code>vector</code>. To access a specific element of a list, use [[]], for example cool_list[[1]] accesses the first element of the list.</p>
</div>
<div id="lab-question-3-visualize-the-networks" class="section level3 hasAnchor" number="7.4.4">
<h3><span class="header-section-number">7.4.4</span> Lab question 3: Visualize the networks<a href="ecological-networks.html#lab-question-3-visualize-the-networks" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><p>3a. Convert the adjacency matrices to igraph class objects using the function <code>graph_from_adjacency_matrix</code>. You can use a for loop or an lapply. Because these are food webs, set the argument mode to “directed” and the argument diag to FALSE (this means a species cannot consumer members of its own species, i.e., no canabalism/self-loops). Also remember that these interactions are weighted.</p></li>
<li><p>3b. Plot three networks of your choice, using different colors for the predators and prey.</p></li>
</ul>
</div>
<div id="references" class="section level3 hasAnchor" number="7.4.5">
<h3><span class="header-section-number">7.4.5</span> References<a href="ecological-networks.html#references" class="anchor-section" aria-label="Anchor link to header"></a></h3>

</div>
</div>
</div>
<h3>References</h3>
<div id="refs" class="references csl-bib-body hanging-indent" entry-spacing="0">
<div id="ref-allesina2012" class="csl-entry">
Allesina, Stefano, and Si Tang. 2012. <span>“Stability Criteria for Complex Ecosystems.”</span> <em>Nature</em> 483: 205–8. <a href="https://doi.org/10.1038/nature10832">https://doi.org/10.1038/nature10832</a>.
</div>
<div id="ref-almeidaneto2008" class="csl-entry">
Almeida-Neto, Mário, Paulo Guimarães, Paulo R Guimarães Jr, Ricardo D Loyola, and Werner Ulrich. 2008. <span>“A Consistent Metric for Nestedness Analysis in Ecological Systems: Reconciling Concept and Measurement.”</span> <em>Oikos</em> 117 (8): 1227–39. <a href="https://doi.org/10.1111/j.0030-1299.2008.16644.x">https://doi.org/10.1111/j.0030-1299.2008.16644.x</a>.
</div>
<div id="ref-bascompte2003" class="csl-entry">
Bascompte, J., P. Jordano, C. J. Melián, and J. M. Olesen. 2003. <span>“The Nested Assembly of Plant–Animal Mutualistic Networks.”</span> <em>PNAS</em> 100 (16): 9383–87. <a href="https://doi.org/10.1073/pnas.1633576100">https://doi.org/10.1073/pnas.1633576100</a>.
</div>
<div id="ref-bascompte2006science" class="csl-entry">
Bascompte, J., P. Jordano, and J. M. Olesen. 2006. <span>“Asymmetric Coevolutionary Networks Facilitate Biodiversity Maintenance.”</span> <em>Science</em> 312 (5772): 431–33. <a href="https://doi.org/10.1126/science.1123412">https://doi.org/10.1126/science.1123412</a>.
</div>
<div id="ref-bascompte2007" class="csl-entry">
Bascompte, Jordi, and Pedro Jordano. 2007. <span>“Plant-Animal Mutualistic Networks: The Architecture of Biodiversity.”</span> <em>Annual Review of Ecology, Evolution, and Systematics</em> 38: 567–93. <a href="https://doi.org/10.1146/annurev.ecolsys.38.091206.095818">https://doi.org/10.1146/annurev.ecolsys.38.091206.095818</a>.
</div>
<div id="ref-weboflife" class="csl-entry">
Bascompte Lab. 2017. <span>“Web of Life: Ecological Networks Database.”</span> <a href="https://www.web-of-life.es/">https://www.web-of-life.es/</a>.
</div>
<div id="ref-bluthgen2006" class="csl-entry">
Blüthgen, Nico, Florian Menzel, and Nico Blüthgen. 2006. <span>“Measuring Specialization in Species Interaction Networks.”</span> <em>BMC Ecology</em> 6 (9): 1–12. <a href="https://doi.org/10.1186/1472-6785-6-9">https://doi.org/10.1186/1472-6785-6-9</a>.
</div>
<div id="ref-igraph2025" class="csl-entry">
Csardi, Gabor, Tamas Nepusz, et al. 2025. <em>Igraph: Network Analysis and Visualization</em>. <a href="https://igraph.org/">https://igraph.org/</a>.
</div>
<div id="ref-delmas2019" class="csl-entry">
Delmas, Eva, Mathilde Besson, Marie-Hélène Brice, Laura A. Burkle, et al. 2019. <span>“Analysing Ecological Networks of Species Interactions.”</span> <em>Biological Reviews</em> 94 (1): 16–36. <a href="https://doi.org/10.1111/brv.12433">https://doi.org/10.1111/brv.12433</a>.
</div>
<div id="ref-devoto2012" class="csl-entry">
Devoto, Mariano, Shari Bailey, Paul G. Craze, and Jane Memmott. 2012. <span>“Understanding and Planning Ecological Restoration of Plant–Pollinator Networks.”</span> <em>Ecology Letters</em> 15 (4): 319–28. <a href="https://doi.org/10.1111/j.1461-0248.2012.01740.x">https://doi.org/10.1111/j.1461-0248.2012.01740.x</a>.
</div>
<div id="ref-bipartite2025" class="csl-entry">
Dormann, Carsten F., Jochen Fründ, Bernd Gruber, et al. 2025. <em>The Bipartite Package: Visualising Bipartite Networks and Calculating Some (Ecological) Indices</em>. <a href="https://CRAN.R-project.org/package=bipartite">https://CRAN.R-project.org/package=bipartite</a>.
</div>
<div id="ref-dormann2009" class="csl-entry">
Dormann, Carsten F., Bernd Gruber, and Jochen Fründ. 2009. <span>“Indices, Graphs and Null Models: Analyzing Bipartite Ecological Networks.”</span> <em>The Open Ecology Journal</em> 2: 7–24.
</div>
<div id="ref-freeman1979" class="csl-entry">
Freeman, Linton C. 1979. <span>“Centrality in Social Networks: Conceptual Clarification.”</span> <em>Social Networks</em> 1 (3): 215–39. <a href="https://doi.org/10.1016/0378-8733(78)90021-7">https://doi.org/10.1016/0378-8733(78)90021-7</a>.
</div>
<div id="ref-gotelli2000" class="csl-entry">
Gotelli, Nicholas J. 2000. <span>“Null Model Analysis of Species Co‐occurrence Patterns.”</span> <em>Ecology</em> 81 (9): 2606–21. <a href="https://doi.org/10.1890/0012-9658(2000)081%5B2606:NMAOSC%5D2.0.CO;2">https://doi.org/10.1890/0012-9658(2000)081[2606:NMAOSC]2.0.CO;2</a>.
</div>
<div id="ref-landi2018" class="csl-entry">
Landi, Pietro, Henintsoa O. Minoarivelo, Åke Brännström, Cang Hui, and Ulf Dieckmann. 2018. <span>“Complexity and Stability of Ecological Networks: A Review of the Theory.”</span> <em>Population Ecology</em> 60 (4): 319–45. <a href="https://doi.org/10.1007/s10144-018-0628-3">https://doi.org/10.1007/s10144-018-0628-3</a>.
</div>
<div id="ref-magrach2021" class="csl-entry">
Magrách, A., S. Antón, et al. 2021. <span>“Niche Complementarity Among Pollinators Increases Plant Reproductive Success.”</span> <em>Peer Community Journal</em> 1: e27. <a href="https://doi.org/10.24072/pcjournal.1">https://doi.org/10.24072/pcjournal.1</a>.
</div>
<div id="ref-may1972" class="csl-entry">
May, Robert M. 1972. <span>“Will a Large Complex System Be Stable?”</span> <em>Nature</em> 238: 413–14. <a href="https://doi.org/10.1038/238413a0">https://doi.org/10.1038/238413a0</a>.
</div>
<div id="ref-miklos2004" class="csl-entry">
Miklós, István, and János Podani. 2004. <span>“Randomization of Presence–Absence Matrices: Comments and New Algorithms.”</span> <em>Ecology</em> 85 (1): 86–92. <a href="https://doi.org/10.1890/03-0101">https://doi.org/10.1890/03-0101</a>.
</div>
<div id="ref-newman2006" class="csl-entry">
Newman, M. E. J. 2006. <span>“Modularity and Community Structure in Networks.”</span> <em>PNAS</em> 103 (23): 8577–82. <a href="https://doi.org/10.1073/pnas.0601602103">https://doi.org/10.1073/pnas.0601602103</a>.
</div>
<div id="ref-vegan2025" class="csl-entry">
Oksanen, Jari et al. 2025. <em>Vegan: Community Ecology Package</em>. <a href="https://CRAN.R-project.org/package=vegan">https://CRAN.R-project.org/package=vegan</a>.
</div>
<div id="ref-olesen2007" class="csl-entry">
Olesen, J. M., J. Bascompte, Y. L. Dupont, and P. Jordano. 2007. <span>“The Modularity of Pollination Networks.”</span> <em>PNAS</em> 104 (50): 19891–96. <a href="https://doi.org/10.1073/pnas.0706375104">https://doi.org/10.1073/pnas.0706375104</a>.
</div>
<div id="ref-pascualdunne2006" class="csl-entry">
Pascual, Mercedes, and Jennifer A. Dunne. 2006. <em>Ecological Networks: Linking Structure to Dynamics in Food Webs</em>. Oxford University Press.
</div>
<div id="ref-rmangal2019" class="csl-entry">
Poisot, Timothée et al. 2019. <span>“Rmangal: Mangal Client for r.”</span> <a href="https://docs.ropensci.org/rmangal/">https://docs.ropensci.org/rmangal/</a>.
</div>
<div id="ref-ponisio2020" class="csl-entry">
Ponisio, Lauren C. et al. 2020. <span>“Pyrodiversity Promotes Interaction Complementarity and Functional Redundancy in Plant–Pollinator Networks.”</span> <em>Ecology and Evolution</em> 10 (13): 6623–35. <a href="https://doi.org/10.1002/ece3.6210">https://doi.org/10.1002/ece3.6210</a>.
</div>
<div id="ref-strona2014" class="csl-entry">
Strona, Giovanni, Domenico Nappo, Francesco Boccacci, Simone Fattorini, and Jesús San-Miguel-Ayanz. 2014. <span>“A Fast and Unbiased Procedure to Randomize Ecological Binary Matrices with Fixed Row and Column Totals.”</span> <em>Nature Communications</em> 5: 4114. <a href="https://doi.org/10.1038/ncomms5114">https://doi.org/10.1038/ncomms5114</a>.
</div>
<div id="ref-ulrich2009" class="csl-entry">
Ulrich, Werner, Mário Almeida-Neto, and Nicholas J. Gotelli. 2009. <span>“A Consumer’s Guide to Nestedness Analysis.”</span> <em>Oikos</em> 118 (1): 3–17. <a href="https://doi.org/10.1111/j.1600-0706.2008.17053.x">https://doi.org/10.1111/j.1600-0706.2008.17053.x</a>.
</div>
<div id="ref-ulrich2007" class="csl-entry">
Ulrich, Werner, and Nicholas J. Gotelli. 2007. <span>“Null Model Analysis of Species Nestedness Patterns.”</span> <em>Ecology</em> 88 (7): 1824–31. <a href="https://doi.org/10.1890/06-1208.1">https://doi.org/10.1890/06-1208.1</a>.
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="version-control-and-collaboration-with-git-and-github.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="string-processing-debugging.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
  "sharing": {
    "github": false,
    "facebook": true,
    "twitter": true,
    "linkedin": false,
    "weibo": false,
    "instapaper": false,
    "vk": false,
    "whatsapp": false,
    "all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
  },
  "fontsettings": {
    "theme": "white",
    "family": "sans",
    "size": 2
  },
  "edit": {
    "link": null,
    "text": null
  },
  "history": {
    "link": null,
    "text": null
  },
  "view": {
    "link": null,
    "text": null
  },
  "download": null,
  "search": {
    "engine": "fuse",
    "options": null
  },
  "toc": {
    "collapse": "subsection"
  }
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
